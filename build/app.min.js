!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function i(){return{templateUrl:"https://msit.powerbi.com/view?r=eyJrIjoiNDRmNzc4NjYtMWM2OS00NGFkLWI1MDctY2FhY2IwNzcyN2I5IiwidCI6IjcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0NyIsImMiOjV9",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[i];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function e(t,e,i,n,o){function a(){t.$broadcast("triggerNetworkDraw")}t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var c=this;t.$watch("minConnections",a),t.connectionChange=function(){console.log(c.minConnections),t.minConnections=c.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(e){"search"===e?(t.editing=!1,t.settingsEnabled=!1):"settings"===e?(t.editing=!1,t.showsearchMB=!1):"edit"===e?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(e){t.currentEntity=e,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,i=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(e.test(n)||i.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,e(function(){n.getAll().then(function(e){t.entities=e.nodes;var n=i.uniq(i.pluck(i.flatten(i.pluck(t.entities,"locations")),"locality")),o=i.map(n,function(e){var n=i.filter(t.entities,i.flow(i.property("locations"),i.partialRight(i.any,{locality:e})));return{name:e,type:"location",entities:n,dict:i.zipObject(i.pluck(n,"name"),i.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(e){t.currentLocation=null,t.currentEntity=e,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(e){t.setEntity(i.find(t.entities,{id:e}))},t.setLocation=function(e){t.currentLocation=e,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(e){"location"===e.type?t.setLocation(e):t[e%1===0?"setEntityID":"setEntity"](e),t.$broadcast("selectItem",e)},t.$on("setCurrentEntity",function(e,i){t.currentEntity=i.value}),t.$on("setCurrentLocation",function(e,i){t.currentLocation=i.value}),t.setEntities=function(e){t.entities=e},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(e){t.setEntities(e.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0,t.toggleNode=function(e){t.$broadcast("toggleNode",{name:e,enabled:t.entityTypes[e]})},t.toggleLink=function(e){t.$broadcast("toggleLink",{name:e,enabled:t.connectionTypes[e]})}}var i=["$scope","$timeout","_","entityService","connectionService",e];t.module("civic-graph").controller("homeCtrl",i)}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(e){"use strict";function n(e,n,t,i,c){function o(){function o(i){var o=n("filter")(e.entities,function(n){return n.collaborations.length>=e.minConnections}),a={};t.forEach(t.keys(i.connections),function(e){a[e]=[]}),t.forEach(i.connections,function(e,n){t.forEach(e,function(e){var i=t.find(o,{id:e.source}),r=t.find(o,{id:e.target});c.isDefined(i)&&c.isDefined(r)&&a[n].push({source:i,target:r})})}),t.forEach(t.keys(e.entityTypes),function(n){var i=t.takeRight(t.sortBy(t.filter(e.entities,{type:n}),"collaborations.length"),5);t.forEach(i,function(e){e.wellconnected=!0})}),o=t.sortBy(o,function(e){return e.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}e.isLoading=!0,e.connections={},o(),e.safeApply=function(e){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)},e.$on("triggerNetworkDraw",o),e.$on("viewChange",function(e){console.log(e)});var a,r=function(n,i){e.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),s=r.height,l=r.width;a=6;var u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(n,function(e){return parseInt(e.employees)}),k=d3.max(n,function(e){return parseInt(e.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([l,s]).nodes(n).links(t.flatten(t.values(i))).charge(function(e){return e.employees?-2*g.employees(e.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(e,n){m[n]=o.selectAll(".link ."+n+"-link").data(e).enter().append("line").attr("class",function(e){return c.isDefined(e.source)&&c.isDefined(e.target)?(e.type=n,"link "+n+"-link "+e.source.type+"-link "+e.target.type+"-link"):""})});var x=o.selectAll(".node").data(n).enter().append("g").attr("class",function(e){return"node "+e.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(e){return e.employees?g.employees(e.employees):u}),x.append("text").text(function(e){return e.nickname?e.nickname:e.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(e){var i=a*e.alpha;t.forEach(n,function(e){e.x&&d[e.type]&&(e.x+=d[e.type].x*i,e.y+=d[e.type].y*i,e.x=Math.max(y,Math.min(l-y,e.x)),e.y=Math.max(y,Math.min(s-y,e.y)))}),t.forEach(m,function(e){e.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})}),x.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})});var E=function(e){requestAnimationFrame(function n(){for(var t=0;t<e;t++)h.tick();h.alpha()>0&&requestAnimationFrame(n)})};e.mobile&&(a=2,console.log("in mobile")),E(7),h.start();var v={};t.forEach(m,function(e){t.forEach(e[0],function(e){var n=e.__data__.source,t=e.__data__.target;v[n.index+","+t.index]=!0,v[t.index+","+n.index]=!0})});var L,T=function(e,n){return v[e.index+","+n.index]||e.index===n.index},A=function(e){x.classed("focused",function(n){return T(e,n)}).classed("unfocused",function(n){return!T(e,n)}),t.forEach(m,function(n){n.classed("focused",function(n){return e.index===n.source.index||e.index===n.target.index}).classed("unfocused",function(n){return!(e.index===n.source.index||e.index===n.target.index)})})},w=function(n){e.currentEntity!==n&&e.setEntity(n),e.safeApply(),A(n)},$=function(n){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),n.fixed=!1,e.clickedEntity.entity&&h.resume()},b=function(n){e.clickedEntity.entity||e.editing||e.currentLocation||(L=setTimeout(function(){w(n)},500)),e.actions.interacted=!0,e.safeApply()},D=function(n){e.clickedEntity.entity||e.currentLocation||($(n),clearTimeout(L)),e.actions.interacted=!0,e.safeApply()},_=function(n){e.safeApply(),x.classed("focused",function(e){return e.name in n.dict}).classed("unfocused",function(e){return!(e.name in n.dict)}),t.forEach(m,function(e){e.classed("focused",function(e){return e.source.name in n.dict&&e.target.name in n.dict}).classed("unfocused",function(e){return!(e.source.name in n.dict&&e.target.name in n.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),e.clickedLocation.location&&h.resume()},P=function(n){e.showLicense=!1,e.clickedEntity.entity&&($(e.clickedEntity.entity),e.clickedEntity.entity=null),e.clickedLocation.location!==n?(B(e.clickedLocation.location),_(n)):e.clickedLocation.location===n&&(e.clickedLocation.location=n,_(n)),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},C=function(n){e.showLicense=!1,c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&(B(e.clickedLocation.entity),e.clickedLocation.location=null),e.clickedEntity.entity===n?(e.clickedEntity.entity=null,w(n)):(e.clickedEntity.entity&&$(e.clickedEntity.entity),e.clickedEntity.entity=n,w(n))),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},I=function(){c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&($(e.clickedLocation.location),e.clickedLocation.location=null),c.isDefined(e.clickedEntity.entity)&&($(e.clickedEntity.entity),e.clickedEntity.entity=null)),e.safeApply()},S=function(n){n.fixed?$(n):(n.x=l/2,n.y=s/2,n.px=l/2,n.py=s/2,n.fixed=!0,e.clickedEntity.entity=n),e.actions.interacted=!0,e.safeApply()};x.on("mouseover",b),x.on("mouseout",D),x.on("click",C),x.on("dblclick",S),o.on("click",I),x.classed("wellconnected",function(e){return e.hasOwnProperty("wellconnected")}),e.$on("changeSizeBy",function(e,n){o.selectAll("circle").transition().duration(250).attr("r",function(e){return e[n]?g[n](e[n]):u})}),e.$on("toggleLink",function(n,i){e.connectionTypes[i.name]=i.enabled,t.map(e.entityTypes,function(n,t){o.selectAll("."+t+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})})}),e.$on("toggleNode",function(n,t){e.entityTypes[t.name]=t.enabled,o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})}),e.$on("selectItem",function(n,t){console.log("Select Item"),"location"===t.type?P(e.currentLocation):C(e.currentEntity)})}}n.$inject=["$scope","$filter","_","connectionService","cgUtilService"],e.module("civic-graph").controller("networkCtrl",n)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function l(){console.log("inside controlCtrl switch view"),c.changeView(c.toggleNetwork?"Network":"Map")}var c=this;c.entityTypes=e.getEntityTypes(),c.connectionTypes=o.getConnectionTypes(),c.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],c.sizeBy="employees",c.showView={Network:!0,Map:!1},c.switchView=l,c.changeView=function(e){console.log("inside controlCtrl changeview"),t.forEach(t.keys(c.showView),function(o){c.showView[o]=e===o}),n.$broadcast("viewChange",c.showView)},c.showAbout=function(){console.log("Inside the controlCtrl showAbout"),i.open({animation:!1,templateUrl:"js/control/about.html",controller:"modalCtrl"})},c.toggleNode=function(e){console.log("Inside the controlCtrl toggleNode"),n.$broadcast("toggleNode",{name:e,enabled:c.entityTypes[e]})},c.toggleLink=function(e){console.log("Inside the controlCtrl toggleLink"),n.$broadcast("toggleLink",{name:e,enabled:c.connectionTypes[e]})},c.changeSizeBy=function(){n.$broadcast("changeSizeBy",c.sizeBy)},c.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},t.safeApply=function(t){var e=this.$root.$$phase;"$apply"===e||"$digest"===e?t&&"function"==typeof t&&t():this.$apply(t)},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),p=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return p.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),p.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,p=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(p,p)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});p.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},p=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(p),e.on("locationerror",c),p.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyIsImRldGFpbC9jb250cm9sbGVyL2RldGFpbHNDdHJsLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiU2VydmljZSIsImFwaUNhbGxlciIsInV0aWxzIiwiQ2F0ZWdvcnkiLCJvYmoiLCJnZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5RnJvbU9iaiIsInRoaXMiLCJpZCIsIm5hbWUiLCJlbmFibGVkIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImdldEFsbCIsImdldCIsIiRpbmplY3QiLCJmYWN0b3J5IiwiZ2V0Q29ubmVjdGlvblR5cGVzIiwiRnVuZGluZyIsIkRhdGEiLCJFbXBsb3ltZW50IiwiQ29sbGFib3JhdGlvbiIsIkNvbm5lY3Rpb24iLCJkZXRhaWxzIiwiZW50aXR5IiwiZW50aXR5X2lkIiwiZ2V0Q29ubmVjdGlvbk1vZGVsIiwidXJsIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJjb250cm9sRGlyZWN0aXZlIiwidG9nZ2xlTmV0d29yayIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJtaW5Db25uZWN0aW9ucyIsImNvbnRyb2xEZXBlbmRlbmNpZXMiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJzZWxmIiwiY3NzIiwiY2xpY2siLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsInBhcnNlSW50IiwiZGV0YWlsc1BhbmVsIiwibW9iaWxlIiwic2Nyb2xsVG9wIiwiYWRkTW9iaWxlRXZlbnRzIiwibGluayIsIm1vZGFsQ3RybCIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2VXaW5kb3ciLCJjbG9zZSIsImNvbnN0YW50IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJ3YXRjaE1pbkNvbm5lY3Rpb24iLCIkYnJvYWRjYXN0Iiwic2VhcmNoSXRlbXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImNvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwiY29ubmVjdGlvbkNoYW5nZSIsImNvbnNvbGUiLCJoeWRlUGFydGlhbHMiLCJleGNlcHQiLCJzZXR0aW5nc0VuYWJsZWQiLCJzaG93U2VhcmNoIiwidG9nZ2xlU2V0dGluZ3MiLCJzdGFydEVkaXQiLCJjdXJyZW50RW50aXR5Iiwic3dpdGNoVmlldyIsIm1vYmlsZWNoZWNrIiwiY2hlY2siLCJyZWdleCIsInJlZ2V4MiIsImEiLCJ0ZXN0Iiwic3Vic3RyIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidmVuZG9yIiwib3BlcmEiLCJub2RlcyIsInVuaXEiLCJwbHVjayIsImZsYXR0ZW4iLCJlbnRpdGllc0J5TG9jYXRpb24iLCJtYXAiLCJsb2MiLCJmaW5kaW5ncyIsImZsb3ciLCJwcm9wZXJ0eSIsInBhcnRpYWxSaWdodCIsImFueSIsInR5cGUiLCJkaWN0IiwiemlwT2JqZWN0IiwiY29uY2F0Iiwib3ZlcnZpZXdVcmwiLCJzZXRFbnRpdHkiLCJzdG9wRWRpdCIsInNldEVudGl0eUlEIiwiZmluZCIsInNlbGVjdEl0ZW0iLCJpdGVtIiwiJG9uIiwiZXZlbnQiLCJhcmdzIiwidmFsdWUiLCJzZXRFbnRpdGllcyIsImFuaW1hdGlvbnNFbmFibGVkIiwidG9nZ2xlTm9kZSIsInRvZ2dsZUxpbmsiLCJob21lRGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jaWVzIiwiJGZpbHRlciIsInN0YXJ0TG9hZCIsImZpbHRlcmVkRW50aXRpZXMiLCJjb2xsYWJvcmF0aW9ucyIsImZpbHRlcmVkQ29ubmVjdGlvbnMiLCJmb3JFYWNoIiwia2V5cyIsInNvdXJjZU5vZGUiLCJzb3VyY2UiLCJ0YXJnZXROb2RlIiwidGFyZ2V0IiwidG9wNSIsInRha2VSaWdodCIsInNvcnRCeSIsIndlbGxjb25uZWN0ZWQiLCJlIiwiZHJhd05ldHdvcmsiLCJpc0xvYWRpbmciLCJzYWZlQXBwbHkiLCJmbiIsInBoYXNlIiwiJHJvb3QiLCIkJHBoYXNlIiwiJGFwcGx5Iiwidmlld09iaiIsIm9mZnNldFNjYWxlIiwiZW50aXR5QXJyYXkiLCJjb25uZWN0aW9uQXJyYXkiLCJzdmciLCJkMyIsInNlbGVjdCIsInNlbGVjdEFsbCIsInJlbW92ZSIsImJvdW5kcyIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWlnaHQiLCJ3aWR0aCIsImRlZmF1bHROb2RlU2l6ZSIsIm9mZnNldHMiLCJJbmRpdmlkdWFsIiwieCIsInkiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkdvdmVybm1lbnQiLCJsb3dlckJvdW5kUmFkaXVzIiwidXBwZXJCb3VuZFJhZGl1cyIsIm1heEVtcGxveWVlcyIsIm1heCIsImVsIiwiZW1wbG95ZWVzIiwibWF4Rm9sbG93ZXJzIiwiZm9sbG93ZXJzIiwic2NhbGUiLCJzcXJ0IiwiZG9tYWluIiwicmFuZ2UiLCJsaW5rcyIsImZvcmNlIiwibGF5b3V0Iiwic2l6ZSIsInZhbHVlcyIsImNoYXJnZSIsImQiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJjYWxsIiwiZHJhZyIsInRleHQiLCJuaWNrbmFtZSIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsInBhcmVudE5vZGUiLCJnZXRCQm94Iiwib24iLCJrIiwiYWxwaGEiLCJtaW4iLCJzcGVlZEFuaW1hdGUiLCJ0aWNrcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbmRlciIsImkiLCJ0aWNrIiwic3RhcnQiLCJsaW5rZWRCeUluZGV4IiwibCIsIl9fZGF0YV9fIiwiaW5kZXgiLCJob3ZlclRpbWVyIiwibmVpZ2hib3JpbmciLCJiIiwiZm9jdXNuZWlnaGJvcnMiLCJjbGFzc2VkIiwibiIsIm8iLCJmb2N1cyIsInVuZm9jdXMiLCJmaXhlZCIsInJlc3VtZSIsImhvdmVyIiwic2V0VGltZW91dCIsInVuaG92ZXIiLCJjbGVhclRpbWVvdXQiLCJmb2N1c0xvY2F0aW9uIiwidW5mb2N1c0xvY2F0aW9uIiwiaGlnaGxpZ2h0TG9jYXRpb24iLCJzaG93TGljZW5zZSIsInN0b3BQcm9wYWdhdGlvbiIsImJhY2tncm91bmRjbGljayIsImRibGNsaWNrIiwicHgiLCJweSIsInNpemVCeSIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsInZhbCIsInZpc2libGUiLCJoaWRkZW4iLCJSVFAiLCJyZXN0aWN0IiwicmVxdWlyZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJ0b0xvd2VyQ2FzZSIsIiRwYXJzZXJzIiwicGFyc2VGbG9hdCIsIm92ZXJ2aWV3Q3RybCIsImNhdGVnb3JpemVkRW50aXRpZXMiLCJpc09iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsImRlZk9iaiIsImRlZmF1bHRWYWx1ZSIsImxvb3BBbmRJbml0IiwibW9kZWxBcnJheSIsImluaXRNb2RlbEZ1bmN0aW9uIiwibmV3QXJyYXkiLCJhbmFseXRpY3NDdHJsIiwiQ29uZmlnIiwiJGh0dHBQcm92aWRlciIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIiRxIiwibG9nQXBpRXJyb3IiLCJlcnIiLCJyZWplY3QiLCJ1bndyYXBBbmd1bGFySHR0cCIsImFwaVVybCIsImRlZmF1bHRIZWFkZXIiLCJwb3N0IiwiTG9jYXRpb24iLCJidWlsZEZvcm1hdHRlZEFkZHJlc3MiLCJjb3VudHJ5Q29kZSIsInRyaW0iLCJmdW5Db25uU2VydmljZSIsImNvbm5TZXJ2aWNlIiwiZmluYW5jZVNlcnZpY2UiLCJFbnRpdHkiLCJkYk1vZGVsIiwicG9wIiwiZ3JhbnRzX3JlY2VpdmVkIiwiZ3JhbnRzX2dpdmVuIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiZGF0YV9naXZlbiIsImRhdGFfcmVjZWl2ZWQiLCJlbXBsb3ltZW50cyIsInJldmVudWVzIiwiZXhwZW5zZXMiLCJkZXNjcmlwdGlvbiIsImluZmx1ZW5jZSIsInR3aXR0ZXJfaGFuZGxlIiwiY29udHJvbEN0cmwiLCIkcm9vdFNjb3BlIiwiJG1vZGFsIiwidm0iLCJjaGFuZ2VWaWV3Iiwic2l6ZUJ5TGlzdCIsInNob3dWaWV3IiwiTmV0d29yayIsIk1hcCIsInZpZXciLCJzaG93QWJvdXQiLCJvcGVuIiwiYW5pbWF0aW9uIiwiY2hhbmdlU2l6ZUJ5IiwiY29udHJvbERlcHMiLCJkZXRhaWxzQ3RybCIsIml0ZW1zU2hvd25EZWZhdWx0IiwicmVsYXRpb25zIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJzaG93TGVzcyIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsInNvcnQiLCJhcmMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJhcmNzIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiY29udHJvbCIsImxvY2F0ZSIsInNob3dQb3B1cCIsImljb25VcmwiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJsYXllciIsInNldFZpZXciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFHLE9BQU8sY0FBZUYsSUFFL0JEO0NDZEgsU0FBV0EsR0FFUCxZQUlBLFNBQVNJLEtBQ0wsT0FFSUMsWUFBYSwrSkFDYkMsU0FBYSxJQUNiQyxTQUNBQyxXQUFlLGlCQVJ2QixHQUFJQyxJQUF5QkwsRUFZN0JKLEdBQVFHLE9BQU8sZUFDVk8sVUFBVSxZQUFhRCxJQUU3QlQ7Q0NwQkgsU0FBV0EsR0FFUCxZQUVBLFNBQVNXLEdBQVFDLEVBQVdDLEdBRXhCLFFBQVNDLEdBQVNDLEdBQ2QsR0FBSUMsR0FBY0gsRUFBTUksbUJBQW1CRixFQUUzQ0csTUFBS0MsR0FBS0gsRUFBWSxNQUN0QkUsS0FBS0UsS0FBT0osRUFBWSxRQUN4QkUsS0FBS0csUUFBVUwsRUFBWSxVQUFVLEdBR3pDLFFBQVNNLEdBQWlCUCxHQUN0QixNQUFPLElBQUlELEdBQVNDLEdBR3hCLFFBQVNRLEtBQ0wsTUFBT1gsR0FBVVksSUFBSSxlQUd6QixPQUNJRixpQkFBb0JBLEVBQ3BCQyxPQUFVQSxHQUlsQlosRUFBUWMsU0FBVyxjQUFlLGlCQUVsQ3pCLEVBQ0tHLE9BQU8sbUJBQ1B1QixRQUFRLGtCQUFtQmYsSUFFakNYO0NDbkNILFNBQVdBLEdBRVAsWUFJQSxTQUFTMkIsS0FDTCxPQUNJQyxTQUFXLEVBQ1hDLE1BQVEsRUFDUkMsWUFBYyxFQUNkQyxlQUFpQixHQUl6QixRQUFTcEIsR0FBUUMsRUFBV0MsR0FFeEIsUUFBU21CLEdBQVdqQixHQUNoQixHQUFJQyxHQUFjSCxFQUFNSSxtQkFBbUJGLEVBRTNDRyxNQUFLQyxHQUFLSCxFQUFZLE1BQ3RCRSxLQUFLRSxLQUFPSixFQUFZLFFBQ3hCRSxLQUFLZSxRQUFVakIsRUFBWSxXQUMzQkUsS0FBS2dCLE9BQVNsQixFQUFZLFVBQzFCRSxLQUFLaUIsVUFBWW5CLEVBQVksYUFHakMsUUFBU29CLEdBQW1CckIsR0FDeEIsTUFBTyxJQUFJaUIsR0FBV2pCLEdBRzFCLFFBQVNRLEtBQ0wsTUFBT1gsR0FBVVksSUFBSWEsR0FHekIsT0FDSWQsT0FBVUEsRUFDVkksbUJBQXNCQSxFQUN0QlMsbUJBQXNCQSxHQWxDOUIsR0FBSUMsR0FBTSxjQXNDVjFCLEdBQVFjLFNBQVcsY0FBZSxpQkFFbEN6QixFQUNLRyxPQUFPLG1CQUNQdUIsUUFBUSxvQkFBcUJmLElBRW5DWDtDQ2hESCxTQUFXQSxHQUVQLFlBRUEsU0FBU1csR0FBUUUsR0FDYixRQUFTeUIsR0FBUXZCLEdBQ2IsR0FBSUMsR0FBY0gsRUFBTUksbUJBQW1CRixFQUUzQ0csTUFBS0MsR0FBS0gsRUFBWSxNQUN0QkUsS0FBS3FCLEtBQU92QixFQUFZLFFBQ3hCRSxLQUFLc0IsT0FBU3hCLEVBQVksU0FBVSxHQUd4QyxRQUFTeUIsR0FBZ0IxQixHQUNyQixNQUFPLElBQUl1QixHQUFRdkIsR0FHdkIsT0FDSTBCLGdCQUFtQkEsR0FJM0I5QixFQUFRYyxTQUFXLGlCQUVuQnpCLEVBQ0tHLE9BQU8sbUJBQ1B1QixRQUFRLGlCQUFrQmYsSUFFaENYO0NDNUJILFNBQVdBLEdBRVAsWUFFQSxTQUFTVyxHQUFRRSxHQUViLFFBQVM2QixHQUFrQjNCLEdBQ3ZCLEdBQUlDLEdBQWNILEVBQU1JLG1CQUFtQkYsRUFFM0NHLE1BQUtDLEdBQUtILEVBQVksTUFDdEJFLEtBQUtxQixLQUFPdkIsRUFBWSxRQUN4QkUsS0FBS3NCLE9BQVN4QixFQUFZLFVBQzFCRSxLQUFLZ0IsT0FBU2xCLEVBQVksU0FBVSxJQUd4QyxRQUFTMkIsR0FBMEI1QixHQUMvQixNQUFPLElBQUkyQixHQUFrQjNCLEdBR2pDLE9BQ0k0QiwwQkFBNkJBLEdBSXJDaEMsRUFBUWMsU0FBVyxpQkFFbkJ6QixFQUNLRyxPQUFPLG1CQUNQdUIsUUFBUSwyQkFBNEJmLElBRTFDWDtDQzdCSCxTQUFXQSxHQUVQLFlBSUEsU0FBUzRDLEtBQ0wsT0FDSXZDLFlBQWEsMkJBQ2JDLFNBQWEsSUFDYkMsT0FDSXNDLGNBQWdCLEtBRXBCckMsV0FBZSxjQUNmc0MsYUFBZSxVQUNmQyxrQkFDSUMsZUFBaUIsTUFaN0IsR0FBSUMsSUFBdUJMLEVBaUIzQjVDLEdBQVFHLE9BQU8sZUFDVk8sVUFBVSxVQUFXdUMsSUFFM0JqRDtDQzVCSCxTQUFXQSxHQUVQLFlBRUEsU0FBU2tELEdBQVdDLEVBQVFDLEVBQU9DLEVBQVVDLEVBQUdDLEVBQWVDLEVBQWlCQyxFQUFpQjVDLEdBNEs3RixRQUFTNkMsS0FDTCxHQUFJQyxHQUNBQyxFQUNBQyxFQUNBQyxDQUVKLEtBQUtGLElBQWlCVCxHQUFPWSxXQUN6QixHQUFLWixFQUFPWSxXQUFXQyxlQUFlSixHQUF0QyxDQUdBRCxFQUFXUixFQUFPWSxXQUFXSCxFQUM3QixLQUFLQyxJQUF1QlYsR0FBT2MsV0FBV0YsV0FDckNaLEVBQU9jLFdBQVdGLFdBQVdDLGVBQWVILEtBR2pEQyxFQUFpQlgsRUFBT2MsV0FBV0YsV0FBV0YsR0FDMUNGLEVBQVN4QyxLQUFPMkMsRUFBZTNDLEtBQy9Cd0MsRUFBU3RDLFFBQVV5QyxFQUFlekMsV0E1TGxEOEIsRUFBT2UsV0FBWSxFQUNuQmYsRUFBT2MsV0FBYVYsRUFBY1ksZUFBZWhCLEVBQU9qQixRQUN4RGlCLEVBQU9pQixZQUFjYixFQUFjYyxpQkFDbkNsQixFQUFPbUIsZUFBaUJmLEVBQWNnQixtQkFFdEMsSUFBSUMsRUFFSnJCLEdBQU9ZLGNBRVBaLEVBQU9zQixjQUFnQixTQUFVQyxHQUM3QixNQUFPdEIsR0FBTXVCLE1BQU0sa0RBQ2ZDLFFBQ0lDLE1BQU9ILEVBQ1BJLElBQUssbUVBQ0xILE1BQVMsZ0JBQ1RJLFFBQVcsV0FHZEMsS0FBSyxTQUFVQyxHQUNaLEdBQUlwRSxFQUFNcUUsVUFBVUQsRUFBU0UsS0FBS0MsZUFBaUJILEVBQVNFLEtBQUtDLGFBQWFDLE9BQ3hFLEVBQ0YsTUFBT0osR0FBU0UsS0FBS0MsYUFBYSxHQUFHRSxhQUtyRG5DLEVBQU9vQyxlQUFpQixTQUFVNUIsR0FDOUIsR0FBNEMsSUFBeENSLEVBQU9jLFdBQVdGLFdBQVdzQixPQUM3QmxDLEVBQU9jLFdBQVdGLFdBQVd5QixLQUFLN0IsT0FFakMsQ0FDRCxHQUFJOEIsSUFBUSxDQUVaLEtBQUssR0FBSTdCLEtBQWlCVCxHQUFPYyxXQUFXRixXQUN4QyxHQUFLWixFQUFPYyxXQUFXRixXQUFXQyxlQUFlSixHQUFqRCxDQUdBLEdBQUlFLEdBQWlCWCxFQUFPYyxXQUFXRixXQUFXSCxFQUNsRCxJQUFJRSxFQUFlM0MsS0FBT3dDLEVBQVN4QyxHQUFJLENBQ25Dc0UsR0FBUSxFQUNSM0IsRUFBZXpDLFFBQVVzQyxFQUFTdEMsT0FDbEMsUUFHSG9FLEdBQ0R0QyxFQUFPYyxXQUFXRixXQUFXeUIsS0FBSzdCLEtBSzlDUixFQUFPdUMsWUFBYyxTQUFVQyxFQUFVQyxHQUNyQ3pDLEVBQU9zQixjQUFja0IsRUFBU0Usa0JBQ3pCYixLQUFLLFNBQVVjLEdBQ1osR0FBSWpGLEVBQU1xRSxVQUFVWSxFQUFjLElBQWxDLENBR0EsR0FBSUMsR0FBU0QsRUFBYyxHQUN2QkUsRUFBVUQsRUFBT0MsUUFDakJDLEVBQVFGLEVBQU9FLEtBQ25COUMsR0FBTytDLFlBQVlOLEdBR25CRCxFQUFTUSxhQUFldEYsRUFBTXFFLFVBQVVjLEVBQVFJLGFBQWVKLEVBQVFJLFlBQWMsR0FDckZULEVBQVNVLFNBQVd4RixFQUFNcUUsVUFBVWMsRUFBUUssVUFBWUwsRUFBUUssU0FBVyxHQUMzRVYsRUFBU1csU0FDTHpGLEVBQU1xRSxVQUFVYyxFQUFRTyxlQUFpQlAsRUFBUU8sY0FBZ0IsR0FDckVaLEVBQVNhLFFBQ0wzRixFQUFNcUUsVUFBVWMsRUFBUVMsZUFBaUJULEVBQVFTLGNBQWdCLEtBQ3JFZCxFQUFTZSxhQUNMN0YsRUFBTXFFLFVBQVVjLEVBQVFXLG1CQUFxQlgsRUFBUVcsa0JBQW9CLEdBQzdFaEIsRUFBU2lCLFlBQWMvRixFQUFNcUUsVUFBVWUsRUFBTVcsYUFBZVgsRUFBTVcsWUFBYyxLQUNoRmpCLEVBQVNrQixZQUFjaEcsRUFBTXFFLFVBQVVjLEVBQVFjLFlBQWNkLEVBQVFjLFdBQWEsU0FJOUYzRCxFQUFPK0MsWUFBYyxTQUFVTixHQUN2QkEsR0FDQXpDLEVBQU9jLFdBQVc4QyxVQUFVdkIsS0FBSy9CLEVBQWdCdUQscUJBSXpEN0QsRUFBTzhELGFBQWUsV0FJWjNELEVBQUU0RCxLQUFLL0QsRUFBT2MsV0FBV2tELFlBQWEvRixLQUFRLEdBQUlELEdBQU0sUUFDMURnQyxFQUFPYyxXQUFXa0QsV0FBVzNCLE1BQU1wRSxLQUFRLEdBQUlELEdBQU0sUUFJN0RnQyxFQUFPaUUscUJBQXVCLFNBQVVsRixFQUFRbUYsR0FFNUNBLEVBQVFsRixVQUFZRCxFQUFPZixJQUcvQmdDLEVBQU9tRSxxQkFBdUIsU0FBVUQsR0FDL0IvRCxFQUFFNEQsS0FBS0csR0FBVW5GLE9BQVUsTUFFNUJtRixFQUFRN0IsTUFBTXRELE9BQVUsR0FBSU0sT0FBVSxLQUFNRCxLQUFRLEtBQU1wQixHQUFNLFFBSXhFZ0MsRUFBT29FLGNBQWdCLFNBQVVyRixFQUFRc0YsR0FDckNBLEVBQVdyRixVQUFZRCxFQUFPZixJQUdsQ2dDLEVBQU9zRSxjQUFnQixTQUFVQyxHQUV4QnBFLEVBQUU0RCxLQUFLUSxHQUFjeEYsT0FBVSxHQUFJZixHQUFNLFFBQzFDdUcsRUFBWWxDLE1BQU10RCxPQUFVLEdBQUlmLEdBQU0sS0FBTWMsUUFBVyxRQUkvRGtCLEVBQU93RSxXQUFhLFNBQVVDLEdBRXRCdEUsRUFBRXVFLE1BQU1ELEVBQVMsU0FBVUUsR0FDdkIsTUFBT0EsR0FBRXRGLE9BQVMsR0FBS3NGLEVBQUV2RixLQUFPLFFBRXBDcUYsRUFBUXBDLE1BQU1oRCxPQUFVLEtBQU1ELEtBQVEsS0FBTXBCLEdBQU0sUUFJMURnQyxFQUFPNEUsS0FBTyxXQUdWLFFBQVNDLEdBQVEvQyxHQUNiOUIsRUFBTzhFLFVBQVcsRUFDbEI5RSxFQUFPK0UsTUFBTSxvQkFBcUJqRCxHQUdsQzlCLEVBQU9nRixhQUdYLFFBQVNDLEtBQ0xqRixFQUFPa0YsU0FBVSxFQUNqQmhGLEVBQVMsV0FDTEYsRUFBT2tGLFNBQVUsR0FDbEIsS0FkUGxGLEVBQU84RSxVQUFXLEVBaUJsQjFFLEVBQ0srRSxXQUFXbkYsRUFBT2MsV0FBV3NFLG1CQUM3QnZELEtBQUtnRCxFQUFTSSxJQUd2QmpGLEVBQU9nRixXQUFhLFdBQ2hCaEYsRUFBT3FGLFFBQVMsR0FHcEJyRixFQUFPc0YsT0FBTyxTQUFVLFNBQVVDLEVBQVFDLEdBQ2xDM0ksRUFBUTRJLE9BQU9GLEVBQVFDLEtBSTNCeEYsRUFBT2MsV0FBYVYsRUFBY1ksZUFBZXVFLEdBQ2pEdkYsRUFBT1ksV0FBYS9ELEVBQVE2SSxLQUFLckUsR0FFakNkLElBRUFQLEVBQU9lLFVBQVlyRCxFQUFNcUUsVUFBVS9CLEVBQU9jLFdBQVc5QyxPQW9DekRxQyxFQUNLakMsU0FDQXlELEtBQUssU0FBVUcsR0FDWlgsRUFBaUJXLEVBQUtwQixXQUd0QlosRUFBT1ksV0FBYS9ELEVBQVE2SSxLQUFLckUsS0FLN0N0QixFQUFXekIsU0FDUCxTQUNBLFFBQ0EsV0FDQSxJQUNBLGdCQUNBLGtCQUNBLGtCQUNBLGlCQUdKekIsRUFDS0csT0FBTyxlQUNQSyxXQUFXLFdBQVkwQyxJQUU3QmxEO0NDN05ILFNBQVdBLEdBRVAsWUFJQSxTQUFTOEksS0FDTCxPQUNJekksWUFBYSwyQkFDYkMsU0FBYSxJQUNiQyxPQUNJMkIsT0FBWSxJQUNaNkcsU0FBWSxJQUNaUCxPQUFZLEtBRWhCaEksV0FBYSxZQVhyQixHQUFJd0ksSUFBMEJGLEVBZTlCOUksR0FBUUcsT0FBTyxlQUNWTyxVQUFVLGFBQWNzSSxJQUU5QmhKO0NDM0JILFNBQVdBLEVBQVNpSixHQUVoQixZQUVBLFNBQVNDLEdBQWEzSSxHQUVsQixRQUFTNEksS0FDTCxHQUFJQyxHQUFPSCxFQUFFL0gsS0FDYmtJLEdBQUtDLElBQUksU0FBVSxRQUd2QixRQUFTQyxLQUNMLEdBQUlGLEdBQU9ILEVBQUUvSCxLQUNUcUksUUFBT0MsWUFBYyxFQUFJQyxTQUFTTCxFQUFLQyxJQUFJLFdBQzNDRCxFQUFLQyxJQUFJLFNBQVUsUUFFbkJELEVBQUtDLElBQUksU0FBVSxRQUkzQixHQUFJSyxFQUNBbkosR0FBTW9KLFNBQ05ELEVBQWVULEVBQUUsa0JBQ2pCUyxFQUFhTCxJQUFJLFNBQVUsUUFDM0JLLEVBQWFFLFVBQVUsR0FDdkJGLEVBQWFQLE9BQU9BLEdBQ3BCTyxFQUFhSixNQUFNQSxJQUkzQixRQUFTTyxLQUNMLE9BQ0l2SixTQUFVLElBQ1Z3SixLQUFNWixHQUlkbEosRUFBUUcsT0FBTyxlQUNWTyxVQUFVLG1CQUFvQm1KLEtBQ3BDN0osUUFBU2lKO0NDdkNaLFNBQVVqSixHQUVOLFlBRUEsU0FBUytKLEdBQVU1RyxFQUFRNkcsR0FDdkI3RyxFQUFPOEcsWUFBYyxXQUNqQkQsRUFBZUUsU0FJdkJsSyxFQUFRRyxPQUFPLGVBQ1ZLLFdBQVcsYUFBYyxTQUFVLGlCQUFrQnVKLEtBRTNEL0o7Q0NiSCxTQUFXQSxHQUVQLFlBRUFBLEdBQVFHLE9BQU8sZUFDVmdLLFNBQVMsSUFBS1osT0FBT2pHLEdBQ3JCOEcsUUFBUSxvQkFBcUIsbUJBQzFCLFNBQVVDLEVBQW1CQyxHQUN6QkQsRUFBa0JFLFdBQVUsR0FDNUJELEVBQWlCRSxrQkFBaUIsTUFFekNDLE9BQU8saUJBQWtCLFdBQ3RCLE1BQU8sVUFBVUMsRUFBT0MsR0FDcEIsR0FBSUMsR0FDQUMsR0FBWSxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFFekMsT0FBSXRCLFFBQU91QixNQUFNSixHQUNOLEtBR1BBLEVBQVEsSUFDREEsR0FHWEUsRUFBTUcsS0FBS0MsTUFBTUQsS0FBS0UsSUFBSVAsR0FBU0ssS0FBS0UsSUFBSSxPQUVwQ1AsRUFBUUssS0FBS0csSUFBSSxJQUFNTixJQUFNTyxRQUFRUixHQUFZRSxFQUFTRCxFQUFNLFFBSXJGNUs7Q0M5QkgsU0FBV0EsR0FFUCxZQVdBLFNBQVNvTCxHQUFTakksRUFBUUUsRUFBVUMsRUFBR0MsRUFBZThILEdBa0NsRCxRQUFTQyxLQUNMbkksRUFBT29JLFdBQVcsc0JBbEN0QnBJLEVBQU80RixZQUNQNUYsRUFBT3FJLFlBQTJCLEtBQ2xDckksRUFBT1ksY0FDUFosRUFBT3NJLGdCQUEyQixLQUNsQ3RJLEVBQU91SSxtQkFDUHZJLEVBQU91SSxnQkFBZ0IvRixTQUFXLEtBQ2xDeEMsRUFBT3dJLGlCQUNQeEksRUFBT3dJLGNBQWN6SixPQUFhLEtBQ2xDaUIsRUFBT3lJLFNBQTJCLEVBQ2xDekksRUFBTzBJLFNBQTRCQyxZQUFjLEdBQ2pEM0ksRUFBTzRJLGNBQTJCLEVBQ2xDNUksRUFBTzZJLGVBQTJCLEVBQ2xDN0ksRUFBT2lCLFlBQTJCYixFQUFjYyxpQkFDaERsQixFQUFPOEksZ0JBQTJCWixFQUFrQjFKLHFCQUNwRHdCLEVBQU8rSSxRQUNIQyxnQkFBa0IsRUFDbEJDLFNBQWtCLEVBQ2xCQyxnQkFBa0IsR0FHdEJsSixFQUFPbUosZ0JBQWtCLFdBQ3JCbkosRUFBTzZJLGVBQWlCN0ksRUFBTzZJLGVBR25DOUssS0FBSzhCLGVBQWlCRyxFQUFPSCxlQUFpQixDQUM5QyxJQUFJb0csR0FBT2xJLElBTVhpQyxHQUFPc0YsT0FBTyxpQkFBa0I2QyxHQU1oQ25JLEVBQU9vSixpQkFBbUIsV0FDdEJDLFFBQVF2QixJQUFJN0IsRUFBS3BHLGdCQUNqQkcsRUFBT0gsZUFBaUJvRyxFQUFLcEcsZUFDN0JHLEVBQU9vSSxXQUFXLHVCQUd0QnBJLEVBQU9zSixhQUFlLFNBQVVDLEdBQ2IsV0FBWEEsR0FDQXZKLEVBQU95SSxTQUFrQixFQUN6QnpJLEVBQU93SixpQkFBa0IsR0FDUCxhQUFYRCxHQUNQdkosRUFBT3lJLFNBQWUsRUFDdEJ6SSxFQUFPNEksY0FBZSxHQUNKLFNBQVhXLEdBQ1B2SixFQUFPd0osaUJBQWtCLEVBQ3pCeEosRUFBTzRJLGNBQWtCLElBRXpCNUksRUFBT3lJLFNBQWtCLEVBQ3pCekksRUFBT3dKLGlCQUFrQixFQUN6QnhKLEVBQU80SSxjQUFrQixJQUtqQzVJLEVBQU95SixXQUFhLFdBQ2hCekosRUFBT3NKLGFBQWEsVUFDcEJ0SixFQUFPNEksY0FBa0I1SSxFQUFPNEksYUFFaEM1SSxFQUFPK0ksT0FBT0UsU0FBVSxHQUc1QmpKLEVBQU8wSixlQUFpQixXQUNwQjFKLEVBQU9zSixhQUFhLFlBQ3BCdEosRUFBT3dKLGlCQUFtQnhKLEVBQU93SixpQkFHckN4SixFQUFPMkosVUFBWSxTQUFVNUssR0FDekJpQixFQUFPNEosY0FBZ0I3SyxFQUNuQmlCLEVBQU93RyxRQUNQeEcsRUFBT3NKLGFBQWEsUUFFeEJ0SixFQUFPeUksU0FBVSxHQUdyQnpJLEVBQU82SixXQUFhLFdBR2hCN0osRUFBTytJLE9BQU9DLGdCQUFrQmhKLEVBQU8rSSxPQUFPQyxlQUMxQ2hKLEVBQU8rSSxPQUFPQyxnQkFDZGhKLEVBQU9vSSxXQUFXLHVCQUkxQmhDLE9BQU8wRCxZQUFrQixXQUNyQixHQUFJQyxJQUFTLEVBQ1RDLEVBQVMsMlRBQ1RDLEVBQVMseWtEQU1iLE9BTEEsVUFBV0MsSUFDSEYsRUFBTUcsS0FBS0QsSUFBTUQsRUFBT0UsS0FBS0QsRUFBRUUsT0FBTyxFQUFHLE9BQ3pDTCxHQUFRLElBRWJNLFVBQVVDLFdBQWFELFVBQVVFLFFBQVVuRSxPQUFPb0UsT0FDOUNULEdBRVgvSixFQUFPd0csT0FBa0JKLE9BQU8wRCxjQUNoQzlKLEVBQU93SixpQkFBbUJ4SixFQUFPd0csT0FFakN0RyxFQUFTLFdBQ0xFLEVBQ0toQyxTQUNBeUQsS0FBSyxTQUFVRyxHQUNaaEMsRUFBTzRGLFNBQVc1RCxFQUFLeUksS0FDdkIsSUFBSTdHLEdBQWN6RCxFQUFFdUssS0FDaEJ2SyxFQUFFd0ssTUFBTXhLLEVBQUV5SyxRQUFRekssRUFBRXdLLE1BQU0zSyxFQUFPNEYsU0FBVSxjQUFlLGFBRTFEaUYsRUFBcUIxSyxFQUFFMkssSUFBSWxILEVBQVcsU0FBVW1ILEdBQ2hELEdBQUlDLEdBQVc3SyxFQUFFbUgsT0FBT3RILEVBQU80RixTQUFVekYsRUFBRThLLEtBQ3ZDOUssRUFBRStLLFNBQVMsYUFDWC9LLEVBQUVnTCxhQUFhaEwsRUFBRWlMLEtBQU1sSSxTQUFVNkgsS0FHckMsUUFDSTlNLEtBQVU4TSxFQUNWTSxLQUFVLFdBQ1Z6RixTQUFVb0YsRUFDVk0sS0FBVW5MLEVBQUVvTCxVQUFVcEwsRUFBRXdLLE1BQU1LLEVBQVUsUUFDbEI3SyxFQUFFd0ssTUFBTUssRUFBVSxZQUloRGhMLEdBQU9xSSxZQUFjd0MsRUFBbUJXLE9BQU94TCxFQUFPNEYsVUFNdEQ1RixFQUFPeUwsWUFBYyw0QkFDckJ6TCxFQUFPb0ksV0FBVyx5QkFFM0IsS0FFSHBJLEVBQU95TCxZQUFjLEtBRXJCekwsRUFBTzBMLFVBQWMsU0FBVTNNLEdBQzNCaUIsRUFBT3NJLGdCQUFrQixLQUN6QnRJLEVBQU80SixjQUFrQjdLLEVBQ3JCaUIsRUFBT3lJLFNBQ1B6SSxFQUFPMkwsV0FFWDNMLEVBQU9vSSxXQUFXLGlCQUd0QnBJLEVBQU80TCxZQUFjLFNBQVU1TixHQUMzQmdDLEVBQU8wTCxVQUFVdkwsRUFBRTBMLEtBQUs3TCxFQUFPNEYsVUFBVzVILEdBQU1BLE1BR3BEZ0MsRUFBT3VDLFlBQWMsU0FBVUMsR0FDM0J4QyxFQUFPc0ksZ0JBQWtCOUYsRUFDckJ4QyxFQUFPeUksU0FDUHpJLEVBQU8yTCxXQUVYM0wsRUFBT29JLFdBQVcsZUFHdEJwSSxFQUFPOEwsV0FBYSxTQUFVQyxHQUNSLGFBQWRBLEVBQUtWLEtBQ0xyTCxFQUFPdUMsWUFBWXdKLEdBR25CL0wsRUFBTytMLEVBQU8sSUFBTSxFQUFJLGNBQWdCLGFBQWFBLEdBRXpEL0wsRUFBT29JLFdBQVcsYUFBYzJELElBR3BDL0wsRUFBT2dNLElBQUksbUJBQW9CLFNBQVVDLEVBQU9DLEdBQzVDbE0sRUFBTzRKLGNBQWdCc0MsRUFBS0MsUUFHaENuTSxFQUFPZ00sSUFBSSxxQkFBc0IsU0FBVUMsRUFBT0MsR0FDOUNsTSxFQUFPc0ksZ0JBQWtCNEQsRUFBS0MsUUFHbENuTSxFQUFPb00sWUFBYyxTQUFVeEcsR0FDM0I1RixFQUFPNEYsU0FBV0EsR0FHdEI1RixFQUFPMkwsU0FBVyxXQUNkM0wsRUFBT3lJLFNBQVUsR0FHckJ6SSxFQUFPZ00sSUFBSSxvQkFBcUIsU0FBVWxLLEdBQ3RDOUIsRUFBT29NLFlBQVl0SyxFQUFTMkksT0FFNUJ6SyxFQUFPb0ksV0FBVyx3QkFHdEJwSSxFQUFPcU0sbUJBQW9CLEVBRWpDck0sRUFBT3NNLFdBQWEsU0FBVWpCLEdBQ3BCckwsRUFBT29JLFdBQVcsY0FBZW5LLEtBQVFvTixFQUFNbk4sUUFBVzhCLEVBQU9pQixZQUFZb0ssTUFHakZyTCxFQUFPdU0sV0FBYSxTQUFVbEIsR0FDMUJyTCxFQUFPb0ksV0FBVyxjQUFlbkssS0FBUW9OLEVBQU1uTixRQUFXOEIsRUFBTzhJLGdCQUFnQnVDLE1BbE56RixHQUFJbUIsSUFDQSxTQUNBLFdBQ0EsSUFDQSxnQkFDQSxvQkFDQXZFLEVBbU5KcEwsR0FBUUcsT0FBTyxlQUNWSyxXQUFXLFdBQVltUCxJQUU3QjNQO0NDNU5ILFNBQVdBLEdBRVAsWUFFQSxJQUFJNFAsS0FTQTVQLEdBQVFHLE9BQU8sZUFDVk8sVUFBVSxNQUFPa1AsSUFFM0I1UDtDQ3BCSCxTQUFXQSxHQUVQLFlBRUEsU0FBU2tELEdBQVdDLEVBQVEwTSxFQUFTdk0sRUFBRytILEVBQW1CeEssR0FpZXZELFFBQVNpUCxLQUNMLFFBQVM5SCxHQUFRN0MsR0FDYixHQUFJNEssR0FBbUJGLEVBQVEsVUFBVTFNLEVBQU80RixTQUM1QyxTQUFVN0csR0FDTixNQUFPQSxHQUFPOE4sZUFBZTNLLFFBQ3RCbEMsRUFBT0gsaUJBR2xCaU4sSUFDSjNNLEdBQUU0TSxRQUFRNU0sRUFBRTZNLEtBQUtoTCxFQUFLdUMsYUFBYyxTQUFVOEcsR0FFMUN5QixFQUFvQnpCLFFBRXhCbEwsRUFBRTRNLFFBQVEvSyxFQUFLdUMsWUFBYSxTQUFVQSxFQUFhOEcsR0FDL0NsTCxFQUFFNE0sUUFBUXhJLEVBQWEsU0FBVUYsR0FDN0IsR0FBSTRJLEdBQWE5TSxFQUFFMEwsS0FBS2UsR0FBb0I1TyxHQUFNcUcsRUFBVzZJLFNBQ3pEQyxFQUFhaE4sRUFBRTBMLEtBQUtlLEdBQW9CNU8sR0FBTXFHLEVBQVcrSSxRQUN0RDFQLEdBQU1xRSxVQUFVa0wsSUFBZXZQLEVBQU1xRSxVQUFVb0wsSUFJdERMLEVBQW9CekIsR0FBTWhKLE1BQ3BCNkssT0FBVUQsRUFBWUcsT0FBVUQsUUFNOUNoTixFQUFFNE0sUUFBUTVNLEVBQUU2TSxLQUFLaE4sRUFBT2lCLGFBQWMsU0FBVW9LLEdBRTVDLEdBQUlnQyxHQUFPbE4sRUFBRW1OLFVBQVVuTixFQUFFb04sT0FBT3BOLEVBQUVtSCxPQUFPdEgsRUFBTzRGLFVBQVl5RixLQUFRQSxJQUNoRSx5QkFBMEIsRUFDOUJsTCxHQUFFNE0sUUFBUU0sRUFBTSxTQUFVdE8sR0FDdEJBLEVBQU95TyxlQUFnQixNQUkvQlosRUFBbUJ6TSxFQUFFb04sT0FBT1gsRUFBa0IsU0FBVWEsR0FDcEQsTUFBUUEsR0FBZSxjQUFJLEVBQUksSUFHbkNDLEVBQVlkLEVBQWtCRSxHQUdsQzVFLEVBQ0s5SixTQUNBeUQsS0FBS2dELEdBNWdCZDdFLEVBQU8yTixXQUFZLEVBQ25CM04sRUFBT3VFLGVBQ1BvSSxJQUdBM00sRUFBTzROLFVBQVksU0FBVUMsR0FDekIsR0FBSUMsR0FBUS9QLEtBQUtnUSxNQUFNQyxPQUNULFlBQVZGLEdBQWdDLFlBQVZBLEVBQ2xCRCxHQUFzQixrQkFBVCxJQUNiQSxJQUdKOVAsS0FBS2tRLE9BQU9KLElBSXBCN04sRUFBT2dNLElBQUkscUJBQXNCVyxHQUVqQzNNLEVBQU9nTSxJQUFJLGFBQWMsU0FBVWtDLEdBQy9CN0UsUUFBUXZCLElBQUlvRyxJQUloQixJQUFJQyxHQUdBVCxFQUFjLFNBQVVVLEVBQWFDLEdBQ3JDck8sRUFBTzJOLFdBQVksQ0FFbkIsSUFBSVcsR0FBTUMsR0FBR0MsT0FBTyxXQU1wQkYsR0FBSUcsVUFBVSxLQUFLQyxRQUNuQixJQUFJQyxHQUFTTCxFQUFJTSxPQUFPQyx3QkFDcEJDLEVBQVNILEVBQU9HLE9BQ2hCQyxFQUFRSixFQUFPSSxLQUNuQlosR0FBYyxDQUNkLElBQUlhLEdBQWtCLEVBQ2xCQyxHQUNBQyxZQUFnQkMsRUFBSyxFQUFHQyxFQUFLLEdBQzdCQyxjQUFnQkYsRUFBSyxFQUFHQyxNQUN4QkUsY0FBZ0JILEtBQVNDLEVBQUssR0FDOUJHLFlBQWdCSixLQUFTQyxPQUV6QkksRUFBbUIsR0FDbkJDLEVBQW1CLEdBQ25CQyxFQUFlbkIsR0FBR29CLElBQUl2QixFQUFhLFNBQVV3QixHQUM3QyxNQUFPdEosVUFBU3NKLEVBQUdDLGFBRW5CQyxFQUFldkIsR0FBR29CLElBQUl2QixFQUFhLFNBQVV3QixHQUM3QyxNQUFPdEosVUFBU3NKLEVBQUdHLGFBRW5CQyxHQUNBSCxVQUFhdEIsR0FBR3lCLE1BQU1DLE9BQU9DLFFBQVEsR0FBSVIsSUFDcENTLE9BQU9YLEVBQWtCQyxJQUM5Qk0sVUFBYXhCLEdBQUd5QixNQUFNQyxPQUFPQyxRQUFRLEdBQUlKLElBQ3BDSyxPQUFPWCxFQUFrQkMsS0FFOUJXLEtBQ0FDLEVBQVE5QixHQUFHK0IsT0FBT0QsUUFDakJFLE1BQU14QixFQUFPRCxJQUNickUsTUFBTTJELEdBQ05nQyxNQUFNalEsRUFBRXlLLFFBQVF6SyxFQUFFcVEsT0FBT25DLEtBQ3pCb0MsT0FBTyxTQUFVQyxHQUNkLE1BQU9BLEdBQUViLGFBQWlCRyxFQUFNSCxVQUFVYSxFQUFFYixpQkFFL0NjLGFBQWEsR0FDYkMsYUFBYSxHQUVsQnpRLEdBQUU0TSxRQUFRc0IsRUFBaUIsU0FBVTlKLEVBQWE4RyxHQUM5QytFLEVBQU0vRSxHQUFRaUQsRUFBSUcsVUFBVSxVQUFZcEQsRUFBTyxTQUMxQ3JKLEtBQUt1QyxHQUNMc00sUUFBUUMsT0FBTyxRQUNmQyxLQUFLLFFBQVMsU0FBVUwsR0FDckIsTUFBS2hULEdBQU1xRSxVQUFVMk8sRUFBRXhELFNBQVl4UCxFQUFNcUUsVUFBVTJPLEVBQUV0RCxTQUdyRHNELEVBQUVyRixLQUFPQSxFQUNGLFFBQVVBLEVBQU8sU0FBV3FGLEVBQUV4RCxPQUFPN0IsS0FBTyxTQUFXcUYsRUFBRXRELE9BQU8vQixLQUNqRSxTQUpLLE1BUXZCLElBQUl1RCxHQUFPTixFQUFJRyxVQUFVLFNBQ3BCek0sS0FBS29NLEdBQ0x5QyxRQUFRQyxPQUFPLEtBQ2ZDLEtBQUssUUFBUyxTQUFVTCxHQUNyQixNQUFPLFFBQVVBLEVBQUVyRixLQUFPLFVBRTdCMkYsS0FBS1gsRUFBTVksS0FFaEJyQyxHQUFLa0MsT0FBTyxVQUNQQyxLQUFLLElBQUssU0FBVUwsR0FDakIsTUFBT0EsR0FBRWIsVUFBWUcsRUFBaUIsVUFBRVUsRUFBRWIsV0FBYWIsSUFHL0RKLEVBQUtrQyxPQUFPLFFBQ1BJLEtBQUssU0FBVVIsR0FDWixNQUFPQSxHQUFFUyxTQUFXVCxFQUFFUyxTQUFXVCxFQUFFelMsT0FFdEM4UyxLQUFLLEtBQU0sV0FDUixZQUFpQmhULEtBQUtxVCx3QkFBMEIsRUFBSyxPQUV4REwsS0FBSyxLQUFNLFdBQ1IsTUFBUSxJQUFPaFQsS0FBS3NULFdBQVdDLFVBQVV4QyxPQUFTLEVBQUksR0FBTyxPQUdyRXVCLEVBQU1rQixHQUFHLE9BQVEsU0FBVTlELEdBRXZCLEdBQUkrRCxHQUFJckQsRUFBY1YsRUFBRWdFLEtBRXhCdFIsR0FBRTRNLFFBQVFxQixFQUFhLFNBQVVyUCxHQUN6QkEsRUFBT29RLEdBQUtGLEVBQVFsUSxFQUFPc00sUUFDM0J0TSxFQUFPb1EsR0FBS0YsRUFBUWxRLEVBQU9zTSxNQUFNOEQsRUFBSXFDLEVBQ3JDelMsRUFBT3FRLEdBQUtILEVBQVFsUSxFQUFPc00sTUFBTStELEVBQUlvQyxFQUNyQ3pTLEVBQU9vUSxFQUNIdkgsS0FBSytILElBQUlGLEVBQ0w3SCxLQUFLOEosSUFBSTNDLEVBQVFVLEVBQWtCMVEsRUFBT29RLElBQ2xEcFEsRUFBT3FRLEVBQ0h4SCxLQUFLK0gsSUFBSUYsRUFDTDdILEtBQUs4SixJQUFJNUMsRUFBU1csRUFBa0IxUSxFQUFPcVEsT0FJM0RqUCxFQUFFNE0sUUFBUXFELEVBQU8sU0FBVXpKLEdBQ3ZCQSxFQUNLb0ssS0FBSyxLQUFNLFNBQVVMLEdBQ2xCLE1BQU9BLEdBQUV4RCxPQUFPaUMsSUFFbkI0QixLQUFLLEtBQU0sU0FBVUwsR0FDbEIsTUFBT0EsR0FBRXhELE9BQU9rQyxJQUVuQjJCLEtBQUssS0FBTSxTQUFVTCxHQUNsQixNQUFPQSxHQUFFdEQsT0FBTytCLElBRW5CNEIsS0FBSyxLQUFNLFNBQVVMLEdBQ2xCLE1BQU9BLEdBQUV0RCxPQUFPZ0MsTUFHNUJSLEVBQUttQyxLQUFLLFlBQWEsU0FBVUwsR0FDN0IsTUFBTyxhQUFlQSxFQUFFdkIsRUFBSSxJQUFNdUIsRUFBRXRCLEVBQUksT0FHaEQsSUFBSXVDLEdBQWUsU0FBVUMsR0FHekJDLHNCQUFzQixRQUFTQyxLQUMzQixJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUgsRUFBT0csSUFDdkIxQixFQUFNMkIsTUFFTjNCLEdBQU1vQixRQUFVLEdBQ2hCSSxzQkFBc0JDLEtBUzlCOVIsR0FBT3dHLFNBQ1AySCxFQUFjLEVBQzFCOUUsUUFBUXZCLElBQUksY0FJSjZKLEVBQWEsR0FFYnRCLEVBQU00QixPQUlOLElBQUlDLEtBQ0ovUixHQUFFNE0sUUFBUXFELEVBQU8sU0FBVStCLEdBQ3ZCaFMsRUFBRTRNLFFBQVFvRixFQUFFLEdBQUksU0FBVTlOLEdBQ3RCLEdBQUk2SSxHQUFTN0ksRUFBVytOLFNBQVNsRixPQUM3QkUsRUFBUy9JLEVBQVcrTixTQUFTaEYsTUFDakM4RSxHQUFjaEYsRUFBT21GLE1BQVEsSUFBTWpGLEVBQU9pRixRQUFTLEVBQ25ESCxFQUFjOUUsRUFBT2lGLE1BQVEsSUFBTW5GLEVBQU9tRixRQUFTLEtBSTNELElBc0RJQyxHQXREQUMsRUFBYyxTQUFVckksRUFBR3NJLEdBQzNCLE1BQU9OLEdBQWNoSSxFQUFFbUksTUFBUSxJQUFNRyxFQUFFSCxRQUFVbkksRUFBRW1JLFFBQVVHLEVBQUVILE9BRy9ESSxFQUFpQixTQUFVMVQsR0FJM0I2UCxFQUNLOEQsUUFBUSxVQUFXLFNBQVVDLEdBQzFCLE1BQU9KLEdBQVl4VCxFQUFRNFQsS0FFOUJELFFBQVEsWUFBYSxTQUFVQyxHQUM1QixPQUFRSixFQUFZeFQsRUFBUTRULEtBR3BDeFMsRUFBRTRNLFFBQVFxRCxFQUFPLFNBQVV6SixHQUN2QkEsRUFDSytMLFFBQVEsVUFBVyxTQUFVRSxHQUMxQixNQUFPN1QsR0FBT3NULFFBQVVPLEVBQUUxRixPQUFPbUYsT0FBU3RULEVBQU9zVCxRQUN6Q08sRUFBRXhGLE9BQU9pRixRQUVwQkssUUFBUSxZQUFhLFNBQVVFLEdBQzVCLFFBQVM3VCxFQUFPc1QsUUFBVU8sRUFBRTFGLE9BQU9tRixPQUFTdFQsRUFBT3NULFFBQy9DTyxFQUFFeEYsT0FBT2lGLFlBS3pCUSxFQUFRLFNBQVU5VCxHQUNkaUIsRUFBTzRKLGdCQUFrQjdLLEdBQ3pCaUIsRUFBTzBMLFVBQVUzTSxHQUVyQmlCLEVBQU80TixZQUNQNkUsRUFBZTFULElBR2YrVCxFQUFVLFNBQVUvVCxHQUVwQjZQLEVBQ0s4RCxRQUFRLFdBQVcsR0FDbkJBLFFBQVEsYUFBYSxHQUMxQnZTLEVBQUU0TSxRQUFRcUQsRUFBTyxTQUFVekosR0FDdkJBLEVBQ0srTCxRQUFRLFdBQVcsR0FDbkJBLFFBQVEsYUFBYSxLQUU5QjNULEVBQU9nVSxPQUFRLEVBRVgvUyxFQUFPd0ksY0FBY3pKLFFBQ3JCc1IsRUFBTTJDLFVBS1ZDLEVBQVEsU0FBVWxVLEdBQ2JpQixFQUFPd0ksY0FBY3pKLFFBQVdpQixFQUFPeUksU0FBWXpJLEVBQU9zSSxrQkFDM0RnSyxFQUFhWSxXQUFXLFdBQ3BCTCxFQUFNOVQsSUFDUCxNQUVQaUIsRUFBTzBJLFFBQVFDLFlBQWEsRUFDNUIzSSxFQUFPNE4sYUFFUHVGLEVBQVUsU0FBVXBVLEdBQ2ZpQixFQUFPd0ksY0FBY3pKLFFBQVdpQixFQUFPc0ksa0JBQ3hDd0ssRUFBUS9ULEdBQ1JxVSxhQUFhZCxJQUVqQnRTLEVBQU8wSSxRQUFRQyxZQUFhLEVBQzVCM0ksRUFBTzROLGFBRVB5RixFQUFnQixTQUFVN1EsR0FHMUJ4QyxFQUFPNE4sWUFFUGdCLEVBQUs4RCxRQUFRLFVBQVcsU0FBVUMsR0FDOUIsTUFBT0EsR0FBRTFVLE9BQVF1RSxHQUFTOEksT0FFekJvSCxRQUFRLFlBQWEsU0FBVUMsR0FDNUIsUUFBU0EsRUFBRTFVLE9BQVF1RSxHQUFTOEksUUFHcENuTCxFQUFFNE0sUUFBUXFELEVBQU8sU0FBVXpKLEdBQ3ZCQSxFQUNLK0wsUUFBUSxVQUFXLFNBQVVFLEdBQzFCLE1BQVFBLEdBQUUxRixPQUFPalAsT0FBUXVFLEdBQVM4SSxNQUFRc0gsRUFBRXhGLE9BQU9uUCxPQUNoRHVFLEdBQVM4SSxPQUVmb0gsUUFBUSxZQUFhLFNBQVVFLEdBQzVCLFFBQVNBLEVBQUUxRixPQUFPalAsT0FBUXVFLEdBQVM4SSxNQUFXc0gsRUFBRXhGLE9BQU9uUCxPQUNoRHVFLEdBQVM4SSxXQUs1QmdJLEVBQWtCLFdBQ2xCMUUsRUFDSzhELFFBQVEsV0FBVyxHQUNuQkEsUUFBUSxhQUFhLEdBQzFCdlMsRUFBRTRNLFFBQVFxRCxFQUFPLFNBQVV6SixHQUN2QkEsRUFDSytMLFFBQVEsV0FBVyxHQUNuQkEsUUFBUSxhQUFhLEtBRzFCMVMsRUFBT3VJLGdCQUFnQi9GLFVBQ3ZCNk4sRUFBTTJDLFVBSVZPLEVBQW9CLFNBQVUvUSxHQUM5QnhDLEVBQU93VCxhQUFjLEVBQ2pCeFQsRUFBT3dJLGNBQWN6SixTQUNyQitULEVBQVE5UyxFQUFPd0ksY0FBY3pKLFFBQzdCaUIsRUFBT3dJLGNBQWN6SixPQUFTLE1BRTlCaUIsRUFBT3VJLGdCQUFnQi9GLFdBQWFBLEdBQ3BDOFEsRUFBZ0J0VCxFQUFPdUksZ0JBQWdCL0YsVUFFdkM2USxFQUFjN1EsSUFLVnhDLEVBQU91SSxnQkFBZ0IvRixXQUFhQSxJQUNwQ3hDLEVBQU91SSxnQkFBZ0IvRixTQUFXQSxFQUNsQzZRLEVBQWM3USxJQUlsQitMLEdBQUd0QyxPQUNIc0MsR0FBR3RDLE1BQU13SCxrQkFFYnpULEVBQU8wSSxRQUFRQyxZQUFhLEVBQzVCM0ksRUFBTzROLGFBRVB6SCxFQUFRLFNBQVVwSCxHQUNsQmlCLEVBQU93VCxhQUFjLEVBRWpCOVYsRUFBTXFFLFVBQVUvQixFQUFPdUksbUJBQ25CN0ssRUFBTXFFLFVBQVUvQixFQUFPdUksZ0JBQWdCL0YsWUFDdkM4USxFQUFnQnRULEVBQU91SSxnQkFBZ0J4SixRQUN2Q2lCLEVBQU91SSxnQkFBZ0IvRixTQUFXLE1BR2xDeEMsRUFBT3dJLGNBQWN6SixTQUFXQSxHQUNoQ2lCLEVBQU93SSxjQUFjekosT0FBUyxLQUc5QjhULEVBQU05VCxLQUlGaUIsRUFBT3dJLGNBQWN6SixRQUNyQitULEVBQVE5UyxFQUFPd0ksY0FBY3pKLFFBRWpDaUIsRUFBT3dJLGNBQWN6SixPQUFTQSxFQUM5QjhULEVBQU05VCxLQU1Wd1AsR0FBR3RDLE9BQ0hzQyxHQUFHdEMsTUFBTXdILGtCQUVielQsRUFBTzBJLFFBQVFDLFlBQWEsRUFDNUIzSSxFQUFPNE4sYUFHUDhGLEVBQWtCLFdBQ2RoVyxFQUFNcUUsVUFBVS9CLEVBQU91SSxtQkFDbkI3SyxFQUFNcUUsVUFBVS9CLEVBQU91SSxnQkFBZ0IvRixZQUN2Q3NRLEVBQVE5UyxFQUFPdUksZ0JBQWdCL0YsVUFDL0J4QyxFQUFPdUksZ0JBQWdCL0YsU0FBVyxNQUVsQzlFLEVBQU1xRSxVQUFVL0IsRUFBT3dJLGNBQWN6SixVQUNyQytULEVBQVE5UyxFQUFPd0ksY0FBY3pKLFFBQzdCaUIsRUFBT3dJLGNBQWN6SixPQUFTLE9BR3RDaUIsRUFBTzROLGFBR1ArRixFQUFXLFNBQVU1VSxHQUNoQkEsRUFBT2dVLE1BUVJELEVBQVEvVCxJQVBSQSxFQUFPb1EsRUFBSUosRUFBUSxFQUNuQmhRLEVBQU9xUSxFQUFJTixFQUFTLEVBQ3BCL1AsRUFBTzZVLEdBQUs3RSxFQUFRLEVBQ3BCaFEsRUFBTzhVLEdBQUsvRSxFQUFTLEVBQ3JCL1AsRUFBT2dVLE9BQVEsRUFDZi9TLEVBQU93SSxjQUFjekosT0FBU0EsR0FJbENpQixFQUFPMEksUUFBUUMsWUFBYSxFQUM1QjNJLEVBQU80TixZQVFYZ0IsR0FBSzJDLEdBQUcsWUFBYTBCLEdBQ3JCckUsRUFBSzJDLEdBQUcsV0FBWTRCLEdBQ3BCdkUsRUFBSzJDLEdBQUcsUUFBU3BMLEdBQ2pCeUksRUFBSzJDLEdBQUcsV0FBWW9DLEdBQ3BCckYsRUFBSWlELEdBQUcsUUFBU21DLEdBRWhCOUUsRUFDSzhELFFBQVEsZ0JBQWlCLFNBQVVoQyxHQUNoQyxNQUFPQSxHQUFFN1AsZUFBZSxtQkFHaENiLEVBQU9nTSxJQUFJLGVBQWdCLFNBQVVDLEVBQU82SCxHQUN4Q3hGLEVBQUlHLFVBQVUsVUFDVHNGLGFBQ0FDLFNBQVMsS0FDVGpELEtBQUssSUFBSyxTQUFVTCxHQUNqQixNQUFPQSxHQUFFb0QsR0FBVTlELEVBQU04RCxHQUFRcEQsRUFBRW9ELElBQVc5RSxNQUcxRGhQLEVBQU9nTSxJQUFJLGFBQWMsU0FBVUMsRUFBT3RGLEdBSXRDM0csRUFBTzhJLGdCQUFnQm5DLEVBQUsxSSxNQUFRMEksRUFBS3pJLFFBQ3pDaUMsRUFBRTJLLElBQUk5SyxFQUFPaUIsWUFBYSxTQUFVZ1QsRUFBS3RTLEdBQ3JDMk0sRUFDS0csVUFBVSxJQUFNOU0sRUFBTSxTQUN0QitRLFNBQ0d3QixRQUFXLFNBQVUvQixHQUlqQixNQUFPblMsR0FBTzhJLGdCQUFnQnFKLEVBQUU5RyxPQUM1QnJMLEVBQU9pQixZQUFZa1IsRUFBRWpGLE9BQU83QixPQUM3QnJMLEVBQU9pQixZQUFZa1IsRUFBRS9FLE9BQU8vQixPQUVuQzhJLE9BQVUsU0FBVWhDLEdBR2hCLE9BQVFuUyxFQUFPOEksZ0JBQWdCcUosRUFBRTlHLFFBQzVCckwsRUFBT2lCLFlBQVlrUixFQUFFakYsT0FBTzdCLFFBQzdCckwsRUFBT2lCLFlBQVlrUixFQUFFL0UsT0FBTy9CLGFBT3BEckwsRUFBT2dNLElBQUksYUFBYyxTQUFVQyxFQUFPWixHQUV0Q3JMLEVBQU9pQixZQUFZb0ssRUFBS3BOLE1BQVFvTixFQUFLbk4sUUFDckNvUSxFQUNLRyxVQUFVLElBQU1wRCxFQUFLcE4sS0FBTyxTQUM1QnlVLFNBQVV3QixRQUFXN0ksRUFBS25OLFFBQVNpVyxRQUFXOUksRUFBS25OLFVBRXhEb1EsRUFDS0csVUFBVSxJQUFNcEQsRUFBS3BOLEtBQU8sU0FDNUJ5VSxTQUNHd0IsUUFBVyxTQUFVL0IsR0FHakIsTUFBT25TLEdBQU84SSxnQkFBZ0JxSixFQUFFOUcsT0FDeEJyTCxFQUFPaUIsWUFBWWtSLEVBQUVqRixPQUFPN0IsT0FDN0JyTCxFQUFPaUIsWUFBWWtSLEVBQUUvRSxPQUFPL0IsT0FFdkM4SSxPQUFVLFNBQVVoQyxHQUdoQixPQUFRblMsRUFBTzhJLGdCQUFnQnFKLEVBQUU5RyxRQUN4QnJMLEVBQU9pQixZQUFZa1IsRUFBRWpGLE9BQU83QixRQUM3QnJMLEVBQU9pQixZQUFZa1IsRUFBRS9FLE9BQU8vQixXQU1wRHJMLEVBQU9nTSxJQUFJLGFBQWMsU0FBVUMsRUFBT0YsR0FDbEQxQyxRQUFRdkIsSUFBSSxlQUNrQixhQUFkaUUsRUFBS1YsS0FDTGtJLEVBQWtCdlQsRUFBT3NJLGlCQUd6Qm5DLEVBQU1uRyxFQUFPNEosa0JBdUQ3QjdKLEVBQVd6QixTQUFXLFNBQVUsVUFBVyxJQUFLLG9CQUFxQixpQkFFckV6QixFQUFRRyxPQUFPLGVBQ1ZLLFdBQVcsY0FBZTBDLElBRWhDbEQsUUFBU3VYO0NDeGhCWixTQUFXdlgsR0FFUCxZQU1BLFNBQVNVLEtBQ0wsT0FDSUosU0FBWSxJQUNaRCxZQUFlLDBCQUNmRyxXQUFjLGVBUnRCLEdBQUlvUCxJQUNBbFAsRUFXSlYsR0FBUUcsT0FBTyxlQUNWTyxVQUFVLFVBQVdrUCxJQUUzQjVQO0NDcEJILFNBQVVBLEdBQ04sWUFFQUEsR0FBUUcsT0FBTyxlQUNWTyxVQUFVLFFBQVMsV0FDcEIsT0FDSThXLFFBQVMsSUFDVEMsUUFBUyxXQUNUM04sS0FBTSxTQUFTdkosRUFBT21YLEVBQVNDLEVBQU9DLEdBQzdCLFFBQVVELElBQXNDLFVBQTdCQSxFQUFNbkosS0FBS3FKLGVBQy9CRCxFQUFRRSxTQUFTdFMsS0FBS3VTLGlCQUt2Qy9YO0NDbEJILFNBQVdBLEdBRVAsWUFFQSxTQUFTZ1ksR0FBYTdVLEVBQVFHLEdBQzFCSCxFQUFPOFUsdUJBQ1AzVSxFQUFFNE0sUUFBUTVNLEVBQUU2TSxLQUFLaE4sRUFBT2lCLGFBQWMsU0FBVW9LLEdBQzVDckwsRUFBTzhVLG9CQUFvQnpKLEdBQVFsTCxFQUFFbUgsT0FBT3RILEVBQU80RixVQUFXeUYsS0FBUUEsTUFJOUV4TyxFQUFRRyxPQUFPLGVBQ1ZLLFdBQVcsZ0JBQWlCLFNBQVUsSUFBS3dYLEtBQ2pEaFk7Q0NiSCxTQUFXQSxHQUVQLFlBRUEsU0FBU2tGLEdBQVU2USxHQUNmLFFBQXNCLG1CQUFOQSxJQUEyQixPQUFOQSxHQUd6QyxRQUFTbUMsR0FBU25DLEdBQ2QsTUFBTzdRLEdBQVU2USxLQUFPb0MsTUFBTUMsUUFBUXJDLElBQW9CLGdCQUFOQSxHQUd4RCxRQUFTOVUsR0FBbUJGLEdBQ3hCLEdBQUlzWCxHQUFTblQsRUFBVW5FLEdBQU9BLElBRTlCLE9BQU8sVUFBVXNOLEVBQVVpSyxHQUN2QixHQUFJaEosR0FBUXBLLEVBQVVvVCxHQUFnQkEsRUFBZSxJQUNyRCxPQUFPcFQsR0FBVW1ULEVBQU9oSyxJQUNsQmdLLEVBQU9oSyxHQUNQaUIsR0FJZCxRQUFTaUosR0FBWUMsRUFBWUMsR0FDN0IsR0FBSUMsR0FBV1AsTUFBTUMsUUFBUUksR0FDdkJBLEVBQVcvTixPQUFPeU4sR0FBVWpLLElBQUl3SyxLQUd0QyxPQUFPQyxHQUFTL0osUUFBUThKLE1BRzVCLFFBQVM5WCxLQUNMLE9BQ0l1RSxVQUFhQSxFQUNiZ1QsU0FBWUEsRUFFWmpYLG1CQUFzQkEsRUFDdEJzWCxZQUFlQSxHQUl2QnZZLEVBQ0tHLE9BQU8sb0JBQ1B1QixRQUFRLGdCQUFpQmYsSUFFL0JYO0NDekNILFNBQVdBLEdBRVAsWUFFQSxTQUFTMlksR0FBY3hWLElBSXZCbkQsRUFBUUcsT0FBTyxlQUNWSyxXQUFXLGlCQUFrQixTQUFVbVksS0FDN0MzWTtDQ2RILFNBQVdBLEdBRVAsWUFFQSxTQUFTNFksR0FBT0MsR0FDWkEsRUFBY0MsU0FBU0MsUUFBUUMsT0FBTyxvQkFBc0IsaUJBR2hFSixFQUFPblgsU0FBVyxpQkFFbEJ6QixFQUFRRyxPQUFPLG1CQUFtQmlLLE9BQU93TyxJQUUxQzVZO0NDWkgsU0FBV0EsR0FFUCxZQVNBLFNBQVNXLEdBQVF5QyxFQUFPNlYsR0FDcEIsUUFBU0MsR0FBWUMsR0FFakIsTUFEQTNNLFNBQVFwRSxNQUFNLG1EQUFvRCtRLEVBQUloVSxNQUMvRDhULEVBQUdHLE9BQU9ELEdBR3JCLFFBQVNFLEdBQWtCcFUsR0FDdkIsTUFBT0EsR0FBU0UsS0FHcEIsUUFBUzNELEdBQUlhLEVBQUt1QyxHQUNkLE1BQU94QixHQUNGNUIsSUFBSThYLEVBQVNqWCxHQUFPdUMsT0FBVUEsRUFBUW1VLFFBQVdRLElBQ2pEdlUsS0FBS3FVLEVBQW1CSCxHQUdqQyxRQUFTTSxHQUFLblgsRUFBSzhDLEdBQ2YsTUFBTy9CLEdBQ0ZvVyxLQUFLRixFQUFTalgsRUFBSzhDLEdBQVE0VCxRQUFXUSxJQUN0Q3ZVLEtBQUtxVSxFQUFtQkgsR0FHakMsT0FDSTFYLElBQU9BLEVBQ1BnWSxLQUFRQSxHQS9CaEIsR0FBSUYsR0FBUyxnQ0FHVEMsSUFnQ0o1WSxHQUFRYyxTQUFXLFFBQVMsTUFFNUJ6QixFQUFRRyxPQUFPLG1CQUFtQnVCLFFBQVEsY0FBZWYsSUFFMURYO0NDeENILFNBQVdBLEdBRVAsWUFFQSxTQUFTVyxHQUFRRSxHQUNiLFFBQVM0WSxHQUFTMVksR0FLZCxRQUFTMlksS0FDTCxHQUFJckIsR0FBU3hYLEVBQU1xRSxVQUFVbkUsR0FBT0EsS0FDaENxRixFQUFldkYsRUFBTXFFLFVBQVVtVCxFQUFPbFMsY0FBZ0JrUyxFQUFPbFMsYUFBZSxJQUFNLEdBQ2xGRSxFQUFZeEYsRUFBTXFFLFVBQVVtVCxFQUFPaFMsVUFBWWdTLEVBQU9oUyxTQUFXLEtBQU8sR0FDeEVzVCxFQUFlOVksRUFBTXFFLFVBQVVtVCxFQUFPM1IsY0FBZ0IyUixFQUFPM1IsYUFBZSxJQUFNLEdBQ2xGSSxFQUFjakcsRUFBTXFFLFVBQVVtVCxFQUFPeFIsYUFBZXdSLEVBQU94UixZQUFjLEVBRTdFLFFBQVFULEVBQWNDLEVBQVdzVCxFQUFjN1MsR0FBWThTLE9BWC9ELEdBQUl4USxHQUFPbEksS0FFUEYsRUFBY0gsRUFBTUksbUJBQW1CRixFQVkzQ3FJLEdBQUtqSSxHQUFLSCxFQUFZLE1BQ3RCb0ksRUFBS2pELGFBQWVuRixFQUFZLGdCQUNoQ29JLEVBQUsvQyxTQUFXckYsRUFBWSxZQUM1Qm9JLEVBQUs5QyxTQUFXdEYsRUFBWSxZQUM1Qm9JLEVBQUt2QyxZQUFjN0YsRUFBWSxlQUMvQm9JLEVBQUs1QyxRQUFVeEYsRUFBWSxXQUMzQm9JLEVBQUsxQyxhQUFlMUYsRUFBWSxnQkFDaENvSSxFQUFLeEMsWUFBYzVGLEVBQVksZUFLL0JvSSxFQUFLdkQsaUJBQW1CNlQsSUFHNUIsUUFBUzFTLEdBQWlCakcsR0FDdEIsTUFBTyxJQUFJMFksR0FBUzFZLEdBR3hCLE9BQ0lpRyxpQkFBb0JBLEdBSTVCckcsRUFBUWMsU0FBVyxpQkFFbkJ6QixFQUNLRyxPQUFPLG1CQUNQdUIsUUFBUSxrQkFBbUJmLElBRWpDWDtDQ2xESCxTQUFXQSxHQUVQLFlBRUEsU0FBU3FFLEtBQ0wsT0FDSXFPLFlBQWMsRUFDZEYsY0FBYyxFQUNkQyxjQUFjLEVBQ2RKLFlBQWMsR0FJdEIsUUFBUzlOLEtBQ0wsT0FBUSxRQUFTLFdBQVksVUFHakMsUUFBUzVELEdBQVFDLEVBQVdpWixFQUFnQkMsRUFBYUMsRUFBZ0J0VyxFQUFpQkQsRUFBaUIzQyxHQUV2RyxRQUFTbVosR0FBT2paLEdBS1osUUFBU3dILEtBQ0wsR0FBSTBSLEdBQVUsR0FBSUQsR0FBTzVRLEVBNkJ6QixPQTVCQTZRLEdBQVFsVCxVQUFVbVQsTUFDbEJELEVBQVFsVCxVQUFVbVQsTUFDbEJELEVBQVFFLGdCQUFnQkQsTUFDeEJELEVBQVFFLGdCQUFnQkQsTUFDeEJELEVBQVFHLGFBQWFGLE1BQ3JCRCxFQUFRRyxhQUFhRixNQUNyQkQsRUFBUUkscUJBQXFCSCxNQUM3QkQsRUFBUUkscUJBQXFCSCxNQUM3QkQsRUFBUUssaUJBQWlCSixNQUN6QkQsRUFBUUssaUJBQWlCSixNQUN6QkQsRUFBUU0sV0FBV0wsTUFDbkJELEVBQVFNLFdBQVdMLE1BQ25CRCxFQUFRTyxjQUFjTixNQUN0QkQsRUFBUU8sY0FBY04sTUFDdEJELEVBQVFqSyxlQUFla0ssTUFDdkJELEVBQVFqSyxlQUFla0ssTUFDdkJELEVBQVE5UyxXQUFXK1MsTUFDbkJELEVBQVE5UyxXQUFXK1MsTUFDbkJELEVBQVFRLFlBQVlQLE1BQ3BCRCxFQUFRUSxZQUFZUCxNQUNwQkQsRUFBUVMsU0FBU1IsTUFDakJELEVBQVFTLFNBQVNSLE1BQ2pCRCxFQUFRVSxTQUFTVCxNQUNqQkQsRUFBUVUsU0FBU1QsTUFDakJELEVBQVFsVyxXQUFXbVcsTUFDbkJELEVBQVFsVyxXQUFXbVcsTUFDbkJELEVBQVFXLFlBQWMsR0FFZlgsRUFsQ1gsR0FBSTdRLEdBQU9sSSxLQUNQbVgsRUFBU3hYLEVBQU1xRSxVQUFVbkUsR0FBT0EsS0FDaENDLEVBQWNILEVBQU1JLG1CQUFtQkYsRUFtQzNDcUksR0FBS2pJLEdBQUtILEVBQVksTUFDdEJvSSxFQUFLaEksS0FBT0osRUFBWSxRQUN4Qm9JLEVBQUt5UixVQUFZN1osRUFBWSxhQUM3Qm9JLEVBQUtvRixLQUFPeE4sRUFBWSxRQUN4Qm9JLEVBQUtrTCxTQUFXdFQsRUFBWSxZQUM1Qm9JLEVBQUsvRyxJQUFNckIsRUFBWSxPQUN2Qm9JLEVBQUswUixlQUFpQjlaLEVBQVksa0JBQ2xDb0ksRUFBSzRKLFVBQVloUyxFQUFZLGFBRTdCb0ksRUFBS3JDLFVBQVlsRyxFQUFNMFgsWUFBWUYsRUFBT3RSLFVBQVd0RCxFQUFnQnVELGtCQUNyRW9DLEVBQUsrUSxnQkFBa0J0WixFQUFNMFgsWUFBWUYsRUFBTzhCLGdCQUFpQk4sRUFBZWxYLDJCQUNoRnlHLEVBQUtpUixxQkFBdUJ4WixFQUFNMFgsWUFBWUYsRUFBT2dDLHFCQUFzQlIsRUFBZWxYLDJCQUMxRnlHLEVBQUtnUixhQUFldlosRUFBTTBYLFlBQVlGLEVBQU8rQixhQUFjUCxFQUFlbFgsMkJBQzFFeUcsRUFBS2tSLGlCQUFtQnpaLEVBQU0wWCxZQUFZRixFQUFPaUMsaUJBQWtCVCxFQUFlbFgsMkJBQ2xGeUcsRUFBS21SLFdBQWExWixFQUFNMFgsWUFBWUYsRUFBT2tDLFdBQVlULEVBQVkxWCxvQkFDbkVnSCxFQUFLb1IsY0FBZ0IzWixFQUFNMFgsWUFBWUYsRUFBT21DLGNBQWVWLEVBQVkxWCxvQkFDekVnSCxFQUFLNEcsZUFBaUJuUCxFQUFNMFgsWUFBWUYsRUFBT3JJLGVBQWdCOEosRUFBWTFYLG9CQUMzRWdILEVBQUtqQyxXQUFhdEcsRUFBTTBYLFlBQVlGLEVBQU9sUixXQUFZMlMsRUFBWTFYLG9CQUNuRWdILEVBQUtxUixZQUFjNVosRUFBTTBYLFlBQVlGLEVBQU9vQyxZQUFhWCxFQUFZMVgsb0JBQ3JFZ0gsRUFBS3NSLFNBQVc3WixFQUFNMFgsWUFBWUYsRUFBT3FDLFNBQVVYLEVBQWV0WCxpQkFDbEUyRyxFQUFLdVIsU0FBVzlaLEVBQU0wWCxZQUFZRixFQUFPc0MsU0FBVVosRUFBZXRYLGlCQUNsRTJHLEVBQUtyRixXQUFhbEQsRUFBTTBYLFlBQVlGLEVBQU90VSxXQUFZUCxFQUFnQmxDLGtCQUV2RThILEVBQUtiLGdCQUFrQkEsRUFHM0IsUUFBU3BFLEdBQWVwRCxHQUNwQixNQUFPLElBQUlpWixHQUFPalosR0FHdEIsUUFBU1EsS0FDTCxNQUFPWCxHQUFVWSxJQUFJLGFBR3pCLFFBQVM4RyxHQUFXcEcsR0FDaEIsTUFBT3RCLEdBQVU0WSxLQUFLLFNBQVd0WCxPQUFVQSxJQUcvQyxPQUNJaUMsZUFBa0JBLEVBQ2xCRSxlQUFrQkEsRUFDbEJFLGtCQUFxQkEsRUFDckJoRCxPQUFVQSxFQUNWK0csV0FBY0EsR0FJdEIzSCxFQUFRYyxTQUNKLGNBQ0EsMkJBQ0Esb0JBQ0EsaUJBQ0Esa0JBQ0Esa0JBQ0EsaUJBR0p6QixFQUNLRyxPQUFPLG1CQUNQdUIsUUFBUSxnQkFBaUJmLElBRS9CWDtDQ3JISCxTQUFXQSxHQUVQLFlBV0EsU0FBUythLEdBQVl4WCxFQUFlOEgsRUFBbUIyUCxFQUFZMVgsRUFBRzJYLEdBMkNsRSxRQUFTak8sS0FDZFIsUUFBUXZCLElBQUksa0NBQ0hpUSxFQUFHQyxXQUFZRCxFQUFHclksY0FBd0IsVUFBUixPQTVDdEMsR0FBSXFZLEdBQUtoYSxJQUNUZ2EsR0FBRzlXLFlBQWNiLEVBQWNjLGlCQUMvQjZXLEVBQUdqUCxnQkFBa0JaLEVBQWtCMUoscUJBQ3ZDdVosRUFBR0UsYUFDRWhhLEtBQVEsWUFBYWtPLE1BQVMsY0FDOUJsTyxLQUFRLG9CQUFxQmtPLE1BQVMsY0FFM0M0TCxFQUFHakUsT0FBUyxZQUNaaUUsRUFBR0csVUFDQ0MsU0FBVyxFQUNYQyxLQUFPLEdBRVhMLEVBQUdsTyxXQUFhQSxFQUNoQmtPLEVBQUdDLFdBQWEsU0FBVUssR0FDN0JoUCxRQUFRdkIsSUFBSSxpQ0FFTDNILEVBQUU0TSxRQUFRNU0sRUFBRTZNLEtBQUsrSyxFQUFHRyxVQUFXLFNBQVVqYSxHQUNyQzhaLEVBQUdHLFNBQVNqYSxHQUFRb2EsSUFBU3BhLElBRWpDNFosRUFBV3pQLFdBQVcsYUFBYzJQLEVBQUdHLFdBRTNDSCxFQUFHTyxVQUFZLFdBQ3BCalAsUUFBUXZCLElBQUksb0NBQ0hnUSxFQUFPUyxNQUNIQyxXQUFXLEVBQ1h0YixZQUFhLHdCQUNiRyxXQUFZLGVBR3BCMGEsRUFBR3pMLFdBQWEsU0FBVWpCLEdBQy9CaEMsUUFBUXZCLElBQUkscUNBQ0grUCxFQUFXelAsV0FBVyxjQUFlbkssS0FBUW9OLEVBQU1uTixRQUFXNlosRUFBRzlXLFlBQVlvSyxNQUdqRjBNLEVBQUd4TCxXQUFhLFNBQVVsQixHQUMvQmhDLFFBQVF2QixJQUFJLHFDQUNIK1AsRUFBV3pQLFdBQVcsY0FBZW5LLEtBQVFvTixFQUFNbk4sUUFBVzZaLEVBQUdqUCxnQkFBZ0J1QyxNQUdyRjBNLEVBQUdVLGFBQWUsV0FDZFosRUFBV3pQLFdBQVcsZUFBZ0IyUCxFQUFHakUsU0FPN0NpRSxFQUFHVSxlQXpEUCxHQUFJQyxJQUNBLGdCQUNBLG9CQUNBLGFBQ0EsSUFDQSxTQUNBZCxFQXVESi9hLEdBQVFHLE9BQU8sZUFDVkssV0FBVyxjQUFlcWIsSUFFaEM3YjtDQ3hFSCxTQUFXQSxHQUVQLFlBRUEsU0FBUzhiLEdBQVkzWSxFQUFRRyxHQUN6QkgsRUFBTzRZLG1CQUNINVUsV0FBYyxFQUNkaVQsYUFBZ0IsRUFDaEJELGdCQUFtQixFQUNuQkcsaUJBQW9CLEVBQ3BCRCxxQkFBd0IsRUFDeEJySyxlQUFrQixFQUNsQnlLLFlBQWUsRUFDZnVCLFVBQWEsRUFDYnpCLFdBQWMsRUFDZEMsY0FBaUIsRUFDakJFLFNBQVksRUFDWkMsU0FBWSxHQUdoQnhYLEVBQU84WSxXQUFhM1ksRUFBRTRZLE1BQU0vWSxFQUFPNFksbUJBRW5DNVksRUFBT2dNLElBQUksZUFBZ0IsV0FFdkJoTSxFQUFPOFksV0FBYTNZLEVBQUU0WSxNQUFNL1ksRUFBTzRZLHFCQUV2QzVZLEVBQU9nWixTQUFXLFNBQVUzTixHQUN4QnJMLEVBQU84WSxXQUFXek4sR0FBUXJMLEVBQU80SixjQUFjeUIsR0FBTW5KLFFBRXpEbEMsRUFBT2laLFNBQVcsU0FBVTVOLEdBQ3hCckwsRUFBTzhZLFdBQVd6TixHQUFRckwsRUFBTzRZLGtCQUFrQnZOLElBSTNEeE8sRUFBUUcsT0FBTyxlQUNWSyxXQUFXLGVBQWdCLFNBQVUsSUFBS3NiLEtBQ2hEOWI7Q0NwQ0gsU0FBV0EsRUFBUzBSLEVBQUkySyxHQUNwQixZQVdBLFNBQVNDLEdBQVFuWixFQUFRRSxFQUFVa1osRUFBYWpaLEVBQUd1TSxHQUUvQzFNLEVBQU9xWixTQUNIQyxRQUNJQyxJQUFNLEdBQ05DLFFBQ0FDLEtBQU0sR0FFVjlELFVBQ0krRCxVQUFvQixrTEFDcEJDLGtCQUNJQyxjQUFjLEVBQ2RDLFlBQWMsR0FFbEJDLGFBQW9CLEVBQ3BCQyxvQkFBb0IsSUFLNUIvWixFQUFPNE4sVUFBWSxTQUFVQyxHQUN6QixHQUFJQyxHQUFRL1AsS0FBS2dRLE1BQU1DLE9BQ1QsWUFBVkYsR0FBZ0MsWUFBVkEsRUFDbEJELEdBQXNCLGtCQUFULElBQ2JBLElBR0o5UCxLQUFLa1EsT0FBT0osSUFJcEIzTixFQUFTLFdBQ0wsR0FBSThaLEdBQWlCLFNBQVVYLEdBQzNCLEdBQUlyWCxHQUFTcVgsRUFBUXJYLEtBQ2pCaVksRUFBUzFMLEVBQUcrQixPQUFPMkosTUFBTUMsS0FBSyxNQUFNL04sTUFBTSxTQUFVdUUsR0FDcEQsTUFBT0EsR0FBRXZFLFFBRVRnTyxFQUFTNUwsRUFBR0QsSUFBSTZMLE1BQU1DLFlBQVlmLEVBQVExVSxHQUFHMFYsWUFBWWhCLEVBQVExVSxFQUFJLElBQ3JFMlUsRUFBU0QsRUFBUTFVLEVBQUkwVSxFQUFRaUIsWUFDN0JDLEVBQWtCLEVBQVRqQixFQUNUa0IsRUFBU0QsRUFDVGpNLEVBQVNtTSxTQUFTQyxnQkFBZ0JuTSxFQUFHb00sR0FBR0MsT0FBT3RNLElBQUssT0FDcER1TSxFQUFTdE0sRUFBR0MsT0FBT0YsR0FDbEJ0TSxLQUFLQSxHQUNMK08sS0FBSyxRQUFTLFlBQ2RBLEtBQUssUUFBU3dKLEdBQ2R4SixLQUFLLFNBQVV5SixHQUVoQk0sRUFBT0QsRUFBSXBNLFVBQVUsUUFDcEJ6TSxLQUFLaVksRUFBSWpZLElBQ1Q2TyxRQUFRQyxPQUFPLEtBQ2ZDLEtBQUssUUFBUyxPQUNkQSxLQUFLLFlBQWEsYUFBZXVJLEVBQVMsSUFBTUEsRUFBUyxJQXVCOUQsT0FoQkF3QixHQUFLaEssT0FBTyxRQUNQQyxLQUFLLElBQUtvSixHQUNWcEosS0FBSyxRQUFTLFNBQVVMLEdBQ3JCLE1BQU9BLEdBQUUxTyxLQUFLcUosS0FBTyxTQUc3QnlQLEVBQUtoSyxPQUFPLFlBQ1BJLEtBQUssU0FBVVIsRUFBR3FCLEdBQ2YsR0FBVSxJQUFOQSxFQUNBLE1BQU9zSCxHQUFRMEIsUUFHdEJoSyxLQUFLLE9BQVVzSSxFQUFRMEIsTUFBTUMsV0FBVzlZLFFBQ3hDNk8sS0FBSyxLQUFNLEdBQ1hBLEtBQUssUUFBUyxXQUVaM0ssT0FBTzZVLGVBQWdCLEdBQUs3VSxRQUFPNlUsZUFBaUJDLGtCQUFrQjVNLEdBQ3ZFQSxFQUFJNk0sSUFBTTdNLEVBQUk2TSxJQUFNLEdBRzlCL0IsR0FBWWdDLFNBQVN2WixLQUFLLFNBQVVpSixHQVdoQyxRQUFTdVEsR0FBWUMsR0FDakIsR0FBSUMsR0FBaUJELEVBQVFFLHFCQUN6QkMsRUFBaUJGLEVBQVNyWixPQUMxQndaLEVBQWlCdmIsRUFBRXdLLE1BQU00USxFQUFVLFdBQ25DSSxFQUFpQnhiLEVBQUUySyxJQUFJM0ssRUFBRXliLFFBQVFGLEVBQWdCLFFBQzFCLFNBQVVYLEVBQU8xUCxHQUNiLE9BQVFBLEtBQVFBLEVBQU1jLE1BQVM0TyxLQUUxRHBXLEVBQWlCLEdBQ2pCMlYsRUFBaUIsRUFDakJ1QixFQUFxQyxHQUFuQmxYLEVBQUkyVixHQUN0QndCLEVBQWlCOUIsR0FDaEJoWSxLQUFNMlosRUFBUWhYLEVBQUdBLEVBQUcyVixZQUFhQSxFQUFhUyxNQUFPVSxHQUMxRCxPQUFPLElBQUl2QyxHQUFFNkMsU0FDVEQsS0FBV0EsRUFDWEUsVUFBVyxpQkFDWEMsU0FBVyxHQUFJL0MsR0FBRXBXLE1BQU0rWSxFQUFTQSxLQWdDeEMsUUFBU0ssR0FBVW5kLEdBQ2YsUUFBU29kLEdBQVVwUixHQUNmLEdBQUs1SyxFQUFFdUUsTUFBTXFHLEVBQUl0SCxhQUFqQixDQUNzQyxhQUFsQ3NILEVBQUl0SCxZQUFZLEdBQUd1RSxRQUFRLElBQXVELGNBQWxDK0MsRUFBSXRILFlBQVksR0FBR3VFLFFBQVEsS0FDM0UrQyxFQUFJdEgsWUFBWSxHQUFLLFNBQ3JCc0gsRUFBSXRILFlBQVksYUFFcEIsSUFBSTJZLEdBQUlsRCxFQUFFbUQsT0FBT3RSLEVBQUl0SCxhQUNqQjZZLEtBQU1DLEVBQVd4ZCxFQUFPc00sTUFDeEJtUixNQUFTemQsRUFBT2QsS0FDaEJlLFVBQWFELEVBQU9mLEdBQ3BCeWUsUUFBVzFkLEVBQU9kLEtBQ2xCb04sS0FBUXRNLEVBQU9zTSxNQUVuQnFSLEdBQVFDLFNBQVNQLElBR3JCamMsRUFBRTRNLFFBQVFoTyxFQUFPNkUsVUFBV3VZLEdBU2hDLFFBQVNTLEdBQWdCQyxHQUNyQnhULFFBQVFwRSxNQUFNNFgsRUFBYUosUUFBVSxPQUFRSSxHQXJGakQsR0FBSWpRLEdBQW1CNU0sRUFBTzRGLFFBRTlCa0YsR0FBSWdTLGlCQUVKLEdBQUk1RCxHQUFFNkQsUUFBUUMsTUFBTUMsU0FBVSxhQUFhQyxNQUFNcFMsR0FDakRvTyxFQUFFaUUsUUFBUUMsUUFDTEgsU0FBVSxXQUFZSSxXQUFXLEVBQU9mLEtBQU0seUJBRTlDWSxNQUFNcFMsRUFxQlgsSUFBSXlSLElBQ0FqTixhQUFjNEosRUFBRW9ELE1BQ1NnQixRQUFVLHlCQUNWckIsVUFBVyxHQUFJLE1BRXhDNU0sYUFBYzZKLEVBQUVvRCxNQUNTZ0IsUUFBVSxzQkFDVnJCLFVBQVcsR0FBSSxNQUV4Qy9NLFdBQWNnSyxFQUFFb0QsTUFDU2dCLFFBQVUscUJBQ1ZyQixVQUFXLEdBQUksTUFFeEMxTSxXQUFjMkosRUFBRW9ELE1BQ1NnQixRQUFVLHFCQUNWckIsVUFBVyxHQUFJLE9BSXhDUyxFQUFVeEQsRUFBRXFFLG9CQUVaQyxtQkFBbUIsRUFDbkJDLHFCQUFxQixFQUNyQkMsbUJBQW9CckMsRUFDcEJzQyxpQkFBa0IsR0FDbEJDLDJCQUE0QixLQXdCaEN2VSxTQUFRdkIsSUFBSSxlQUFnQjlILEVBQU80RixVQUNuQ3lELFFBQVF2QixJQUFJLGVBQWdCOEUsR0FFNUJ6TSxFQUFFNE0sUUFBUUgsRUFBa0JzUCxHQUM1QnBSLEVBQUk2UixTQUFTRCxHQU1iNVIsRUFBSXlHLEdBQUcsZ0JBQWlCcUwsR0FFeEJGLEVBQVFuTCxHQUFHLFFBQVMsU0FBVThLLEdBQzFCcmMsRUFBTzRMLFlBQVl5USxFQUFPd0IsTUFBTXhFLFFBQVFyYSxXQUN4Q2dCLEVBQU93SSxjQUFjekosT0FBU2lCLEVBQU80SixjQUNyQzVKLEVBQU8wSSxRQUFRQyxZQUFlLEVBQzFCM0ksRUFBT3dKLGlCQUFtQnhKLEVBQU93RyxRQUNqQ3hHLEVBQU8wSixpQkFFWDFKLEVBQU80TixjQUdYOUMsRUFBSXlHLEdBQUcsUUFBUyxXQUNadlIsRUFBT3dJLGNBQWN6SixPQUFTLEtBQzlCaUIsRUFBTzBJLFFBQVFDLFlBQWUsRUFDOUIzSSxFQUFPNE4sY0FFWDVOLEVBQU9nTSxJQUFJLGFBQWMsV0FDckIsR0FBSXZJLEdBQWN6RCxFQUFPNEosY0FBY2hHLFVBQVUxQixPQUFTLEVBQUkvQixFQUFFd0ssTUFDNUQzSyxFQUFPNEosY0FBY2hHLFVBQVcsZUFBaUIsSUFDakRILEdBQVl2QixPQUFTLEdBQ3JCNEksRUFBSWdULFFBQVFyYSxFQUFZLEdBQUksSUFFaEN6RCxFQUFPMEksUUFBUUMsWUFBYSxFQUM1QjNJLEVBQU80TixrQkF6TXZCLEdBQUluQixJQUNBLFNBQ0EsV0FDQSxjQUNBLElBQ0EsVUFDQTBNLEVBeU1KdGMsR0FBUUcsT0FBTyxlQUVWSyxXQUFXLFVBQVdvUCxJQUM1QjVQLFFBQVMwUixHQUFJMksiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbWFpbkRlcGVuZGVuY3lMaXN0ID0gW1xuICAgICAgICBcInVpLmJvb3RzdHJhcFwiLFxuICAgICAgICBcImxlYWZsZXQtZGlyZWN0aXZlXCIsXG4gICAgICAgIFwibmdBbmltYXRlXCIsXG4gICAgICAgIFwidGVtcGxhdGVDYWNoZVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLmFwaVwiLFxuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIlxuICAgIF07XG5cbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC51dGlsXCIsIFtdKTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiLCBtYWluRGVwZW5kZW5jeUxpc3QpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYW5hbHl0aWNzRGVwZW5kZW5jaWVzID0gW2FuYWx5dGljc0RpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAnanMvYW5hbHl0aWMvYW5hbHl0aWNzLmh0bWwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdodHRwczovL21zaXQucG93ZXJiaS5jb20vdmlldz9yPWV5SnJJam9pTkRSbU56YzROall0TVdNMk9TMDBOR0ZrTFdJMU1EY3RZMkZoWTJJd056Y3lOMkk1SWl3aWRDSTZJamN5WmprNE9HSm1MVGcyWmpFdE5ERmhaaTA1TVdGaUxUSmtOMk5rTURFeFpHSTBOeUlzSW1NaU9qVjknLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7fSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdhbmFseXRpY3NDdHJsJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FuYWx5dGljcycsIGFuYWx5dGljc0RlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI4LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBDYXRlZ29yeShvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGdldFByb3BlcnR5KFwiZW5hYmxlXCIsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlNb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2F0ZWdvcnkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRDYXRlZ29yeU1vZGVsXCI6IGdldENhdGVnb3J5TW9kZWwsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjYXRlZ29yeVNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxuICovXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHVybCA9IFwiL2Nvbm5lY3Rpb25zXCI7XG5cbiAgICBmdW5jdGlvbiBnZXRDb25uZWN0aW9uVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcIkZ1bmRpbmdcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiRGF0YVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJFbXBsb3ltZW50XCI6IHRydWUsXG4gICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIjogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCB1dGlscykge1xuXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBnZXRQcm9wZXJ0eShcIm5hbWVcIik7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHMgPSBnZXRQcm9wZXJ0eShcImRldGFpbHNcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlfaWQgPSBnZXRQcm9wZXJ0eShcImVudGl0eV9pZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29ubmVjdGlvbihvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25UeXBlc1wiOiBnZXRDb25uZWN0aW9uVHlwZXMsXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjb25uZWN0aW9uU2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XG4gICAgICAgIGZ1bmN0aW9uIEZpbmFuY2Uob2JqKSB7XG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcblxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5hbmNlKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRGaW5hbmNlTW9kZWxcIjogZ2V0RmluYW5jZU1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxuICAgICAgICAuZmFjdG9yeShcImZpbmFuY2VTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBGdW5kaW5nQ29ubmVjdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHRoaXMueWVhciA9IGdldFByb3BlcnR5KFwieWVhclwiKTtcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIsIFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuZGluZ0Nvbm5lY3Rpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcbiAgICAgICAgLmZhY3RvcnkoXCJmdW5kaW5nQ29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGNvbnRyb2xEZXBlbmRlbmNpZXMgPSBbY29udHJvbERpcmVjdGl2ZV07XG5cbiAgICBmdW5jdGlvbiBjb250cm9sRGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb250cm9sL2NvbnRyb2xzLmh0bWwnLFxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlTmV0d29yayA6ICc9JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnY29udHJvbEN0cmwnLFxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogJ2NvbnRyb2wnLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlciA6IHtcbiAgICAgICAgICAgICAgICBtaW5Db25uZWN0aW9ucyA6IFwiPVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnY29udHJvbCcsIGNvbnRyb2xEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKCRzY29wZSwgJGh0dHAsICR0aW1lb3V0LCBfLCBlbnRpdHlTZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIGxvY2F0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZWRpdEVudGl0eSA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5TW9kZWwoJHNjb3BlLmVudGl0eSk7XG4gICAgICAgICRzY29wZS5lbnRpdHlUeXBlcyA9IGVudGl0eVNlcnZpY2UuZ2V0RW50aXR5VHlwZXMoKTtcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xuXG4gICAgICAgIHZhciBjYXRlZ29yeUJhY2t1cDtcblxuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKCdodHRwczovL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zJywge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdBaTU4NTgxeUMtU3I3bWNGYllUdFVrUzNpeEU3ZjZadUpuYkZKQ1ZJNGhBdFcxWG9ERWVaeWlkUXoyZ0xDQ3lEJyxcbiAgICAgICAgICAgICAgICAgICAgJ2pzb25wJzogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzKSAmJiByZXNwb25zZS5kYXRhLnJlc291cmNlU2V0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS50b2dnbGVDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eUNhdGVnb3J5LmlkID09PSBjYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnkuZW5hYmxlZCA9IGNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgaXNMYXN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhcGlDYWxsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCF1dGlscy5pc0RlZmluZWQoYXBpQ2FsbFJlc3VsdFswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gYXBpQ2FsbFJlc3VsdFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmVzdWx0LnBvaW50O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTG9jYXRpb24oaXNMYXN0KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZXMgQVBJIGNhbGwgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmFkZHJlc3NfbGluZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmFkZHJlc3NMaW5lKSA/IGFkZHJlc3MuYWRkcmVzc0xpbmUgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmRpc3RyaWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLmFkbWluRGlzdHJpY3QpID8gYWRkcmVzcy5hZG1pbkRpc3RyaWN0IDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbikgPyBhZGRyZXNzLmNvdW50cnlSZWdpb24gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb3VudHJ5X2NvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb29yZGluYXRlcyA9IHV0aWxzLmlzRGVmaW5lZChwb2ludC5jb29yZGluYXRlcykgPyBwb2ludC5jb29yZGluYXRlcyA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnBvc3RhbF9jb2RlID0gdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MucG9zdGFsQ29kZSkgPyBhZGRyZXNzLnBvc3RhbENvZGUgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5sb2NhdGlvbnMucHVzaChsb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb25Nb2RlbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQWRkIGJsYW5rIGZpZWxkIHRvIGVkaXQgaWYgdGhlcmUgYXJlIG5vbmUuXG4gICAgICAgICAgICAvLyBXQVRDSCBPVVQhIFRPRE86IElmIHNvbWVvbmUgZGVsZXRlcyBhbiBvbGQgcGVyc29uLCBkZWxldGUgdGhlaXIgaWQgdG9vLlxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXG4gICAgICAgICAgICBpZiAoIShfLnNvbWUoJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZSwgeyduYW1lJzogJycsICdpZCc6IG51bGx9KSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLnB1c2goeyduYW1lJzogJycsICdpZCc6IG51bGx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgZW50aXR5J3MgaWQgdG8gdGhpcyBmaW5hbmNlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBmdW5kaW5nLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkRnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZnVuZGluZykge1xuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XG4gICAgICAgICAgICAgICAgLy8gTWF5YmUgc2V0IGFtb3VudCB0byAwIGluc3RlYWQgb2YgbnVsbD9cbiAgICAgICAgICAgICAgICBmdW5kaW5nLnB1c2goeydlbnRpdHknOiAnJywgJ2Ftb3VudCc6IG51bGwsICd5ZWFyJzogbnVsbCwgJ2lkJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZENvbm5lY3Rpb24gPSBmdW5jdGlvbiAoY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbiBlbXB0eSBjb25uZWN0aW9uIHRvIGVkaXQgaWYgbm9uZSBleGlzdC5cbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHsnZW50aXR5JzogJycsICdpZCc6IG51bGwsICdkZXRhaWxzJzogbnVsbH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5hZGRGaW5hbmNlID0gZnVuY3Rpb24gKHJlY29yZHMpIHtcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxuICAgICAgICAgICAgaWYgKF8uZXZlcnkocmVjb3JkcywgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYW1vdW50ID4gMCAmJiByLnllYXIgPiAxNzUwO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgcmVjb3Jkcy5wdXNoKHsnYW1vdW50JzogbnVsbCwgJ3llYXInOiBudWxsLCAnaWQnOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIC8vIENhbGwgdG8gaG9tZUN0cmwncyBwYXJlbnQgc3RvcEVkaXQoKSB0byBjaGFuZ2UgdmlldyBiYWNrIGFuZCBhbnkgb3RoZXJcbiAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbEVkaXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5zYXZlRW50aXR5KCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdlbnRpdHknLCBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbChuZXdWYWwpO1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuXG4gICAgICAgICAgICBpbml0Q2F0ZWdvcnlBcnJheSgpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdXRpbHMuaXNEZWZpbmVkKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIGNhdGVnb3J5IGZpZWxkcyB3aXRoIGVudGl0eSB2YWx1ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcbiAgICAgICAgICogY2F0ZWdvcmllcyBlbmFibGVkIGluIHRoZSBlbnRpdHkgYW5kIHNldHMgbG9jYWwgZGlzcGxheSBkYXRhLiBUaGlzIGlzIGJlY2F1c2Ugd2UgY3JlYXRlZFxuICAgICAgICAgKiBhIGJhY2t1cCBvZiBlbnRpdHkgZGF0YSBzbyB0aGF0IHRoZSBhcGkgZGF0YSBpcyBub3QgdGFtcGVyZWQgd2l0aCBkaXJlY3RseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVE9ETzogcmVwbGFjZSB3aXRoIGJldHRlciBkYXRhIHN0cnVjdHVyZSBmb3IgY2F0ZWdvcmllcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5SW5kZXgsXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcbiAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeTtcblxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcmllcy5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnkgPSAkc2NvcGUuY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICBmb3IgKGVudGl0eUNhdGVnb3J5SW5kZXggaW4gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmlkID09PSBlbnRpdHlDYXRlZ29yeS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuZW5hYmxlZCA9IGVudGl0eUNhdGVnb3J5LmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXRyaWV2ZSBDYXRlZ29yaWVzIGZyb20gREJcbiAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlcyBiYWNrdXAgb2YgZGF0YSB1c2luZyBBbmd1bGFyIHRvIHByZXZlbnQgYXBpIGRhdGEgZnJvbSBiZWluZyB0YW1wZXJlZFxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xuICAgICAgICAgICAgICAgIC8vICRzY29wZS5jYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICBcIiRzY29wZVwiLFxuICAgICAgICBcIiRodHRwXCIsXG4gICAgICAgIFwiJHRpbWVvdXRcIixcbiAgICAgICAgXCJfXCIsXG4gICAgICAgIFwiZW50aXR5U2VydmljZVwiLFxuICAgICAgICBcImNhdGVnb3J5U2VydmljZVwiLFxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNnVXRpbFNlcnZpY2VcIlxuICAgIF07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuY29udHJvbGxlcihcImVkaXRDdHJsXCIsIENvbnRyb2xsZXIpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICpcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZWRpdEVudGl0eURlcGVuZGVuY2llcyA9IFtlZGl0RW50aXR5RGlyZWN0aXZlXTtcblxuICAgIGZ1bmN0aW9uIGVkaXRFbnRpdHlEaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2VkaXQtZW50aXR5L2VkaXQuaHRtbCcsXG4gICAgICAgICAgICByZXN0cmljdCAgIDogJ0UnLFxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcbiAgICAgICAgICAgICAgICAnZW50aXR5JyAgOiBcIj1cIixcbiAgICAgICAgICAgICAgICAnZW50aXRpZXMnOiBcIj1cIixcbiAgICAgICAgICAgICAgICAnaXNPcGVuJyAgOiBcIj1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnZWRpdEN0cmwnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnZWRpdEVudGl0eScsIGVkaXRFbnRpdHlEZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgJCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKHNjb3BlKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xuICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGljaygpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAzID4gcGFyc2VJbnQoc2VsZi5jc3MoJ2hlaWdodCcpKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3NzKCdoZWlnaHQnLCAnNTV2aCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzMwdmgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZXRhaWxzUGFuZWw7XG4gICAgICAgIGlmIChzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbCA9ICQoXCIjZGV0YWlscy1wYW5lbFwiKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jc3MoXCJoZWlnaHRcIiwgXCIzMHZoXCIpO1xuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGwoc2Nyb2xsKTtcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5jbGljayhjbGljayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRNb2JpbGVFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogbGlua0Z1bmN0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYWRkTW9iaWxlRXZlbnRzJywgW2FkZE1vYmlsZUV2ZW50c10pO1xufSkoYW5ndWxhciwgJCk7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gbW9kYWxDdHJsKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcbiAgICAgICAgJHNjb3BlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbW9kYWxDdHJsJywgWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnLCBtb2RhbEN0cmxdKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29uc3RhbnQoJ18nLCB3aW5kb3cuXylcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRjb21waWxlUHJvdmlkZXInLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIH1dKVxuICAgICAgICAuZmlsdGVyKCd0aG91c2FuZFN1ZmZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGRlY2ltYWxzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4cCxcbiAgICAgICAgICAgICAgICAgICAgc3VmZml4ZXMgPSBbJ2snLCAnTScsICdHJywgJ1QnLCAnUCcsICdFJ107XG5cbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmlzTmFOKGlucHV0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQgPCAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKGlucHV0KSAvIE1hdGgubG9nKDEwMDApKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoaW5wdXQgLyBNYXRoLnBvdygxMDAwLCBleHApKS50b0ZpeGVkKGRlY2ltYWxzKSArIHN1ZmZpeGVzW2V4cCAtIDFdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgaG9tZURlcGVuZGVuY2llcyA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICckdGltZW91dCcsXG4gICAgICAgICdfJyxcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxuICAgICAgICAnY29ubmVjdGlvblNlcnZpY2UnLFxuICAgICAgICBob21lQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBob21lQ3RybCgkc2NvcGUsICR0aW1lb3V0LCBfLCBlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuZW50aXRpZXMgICAgICAgICAgICAgICAgID0gW107XG4gICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyAgICAgICAgICAgICAgPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyAgICAgICAgICAgICAgID0gW107XG4gICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gICAgICAgICAgPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uICAgICAgICAgID0ge307XG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eSAgICAgICAgICAgID0ge307XG4gICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAgICAgPSBudWxsO1xuICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5hY3Rpb25zICAgICAgICAgICAgICAgICAgPSB7J2ludGVyYWN0ZWQnOiBmYWxzZX07XG4gICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgICAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnNob3dBbmFseXRpY3MgICAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgICAgICAgICAgICAgID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICAkc2NvcGUuY29ubmVjdGlvblR5cGVzICAgICAgICAgID0gY29ubmVjdGlvblNlcnZpY2UuZ2V0Q29ubmVjdGlvblR5cGVzKCk7XG4gICAgICAgICRzY29wZS5zdGF0dXMgICAgICAgICAgICAgICAgICAgPSB7XG4gICAgICAgICAgICBcImlzTmV0d29ya1Nob3duXCI6IHRydWUsXG4gICAgICAgICAgICBcImxpY2Vuc2VcIiAgICAgICA6IHRydWUsXG4gICAgICAgICAgICBcIm5ldHdvcmtMb2FkaW5nXCI6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlQW5hbHl0aWNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNob3dBbmFseXRpY3MgPSAhJHNjb3BlLnNob3dBbmFseXRpY3M7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5taW5Db25uZWN0aW9ucyA9ICRzY29wZS5taW5Db25uZWN0aW9ucyA9IDI7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAvLyAkc2NvcGUuJHdhdGNoKCdtaW5Db25uZWN0aW9ucycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtaW5Db25uZWN0aW9ucycsIHdhdGNoTWluQ29ubmVjdGlvbik7XG5cbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hNaW5Db25uZWN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmNvbm5lY3Rpb25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLm1pbkNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgICRzY29wZS5taW5Db25uZWN0aW9ucyA9IHNlbGYubWluQ29ubmVjdGlvbnM7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyA9IGZ1bmN0aW9uIChleGNlcHQpIHtcbiAgICAgICAgICAgIGlmIChleGNlcHQgPT09IFwic2VhcmNoXCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwic2V0dGluZ3NcIikge1xuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4Y2VwdCA9PT0gXCJlZGl0XCIpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmh5ZGVQYXJ0aWFscyhcInNlYXJjaFwiKTtcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICA9ICEkc2NvcGUuc2hvd3NlYXJjaE1CO1xuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ2hpZGVMaWNlbnNlJyk7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdHVzLmxpY2Vuc2UgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2V0dGluZ3NcIik7XG4gICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5zZXR0aW5nc0VuYWJsZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0RWRpdCA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gZW50aXR5O1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwiZWRpdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3dpdGNoVmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICRzY29wZS4kYnJvYWRjYXN0KCd2aWV3Q2hhbmdlJywgISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XG4gICAgICAgICAgICAvLyAkc2NvcGUuY2hhbmdlVmlldyghJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPSAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bjtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3RhdHVzLmlzTmV0d29ya1Nob3duKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5tb2JpbGVjaGVjayAgICAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2sgID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVnZXggID0gLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLFxuICAgICAgICAgICAgICAgIHJlZ2V4MiA9IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pO1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QoYSkgfHwgcmVnZXgyLnRlc3QoYS5zdWJzdHIoMCwgNCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KShuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhKTtcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLm1vYmlsZSAgICAgICAgICA9IHdpbmRvdy5tb2JpbGVjaGVjaygpO1xuICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5tb2JpbGU7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZW50aXR5U2VydmljZVxuICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgICA9IF8udW5pcShcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucGx1Y2soXy5mbGF0dGVuKF8ucGx1Y2soJHNjb3BlLmVudGl0aWVzLCAnbG9jYXRpb25zJykpLCAnbG9jYWxpdHknKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzQnlMb2NhdGlvbiA9IF8ubWFwKGxvY2F0aW9ucywgZnVuY3Rpb24gKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmRpbmdzID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCBfLmZsb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wYXJ0aWFsUmlnaHQoXy5hbnksIHtsb2NhbGl0eTogbG9jfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBsb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXM6IGZpbmRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3QgICAgOiBfLnppcE9iamVjdChfLnBsdWNrKGZpbmRpbmdzLCAnbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hJdGVtcyA9IGVudGl0aWVzQnlMb2NhdGlvbi5jb25jYXQoJHNjb3BlLmVudGl0aWVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIFNldCB0aGUgZW50aXR5IHRvIHRoZSBJRCBpbiB0aGUgVVJMIGlmIGl0IGV4aXN0cy5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzY29wZS5zZXRFbnRpdHlJRCgkc2NvcGUuZ2V0VVJMSUQoKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gJ2pzL292ZXJ2aWV3L292ZXJ2aWV3Lmh0bWwnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gbnVsbDtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5ICAgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ICAgPSBlbnRpdHk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbnRpdHlDaGFuZ2UnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoXy5maW5kKCRzY29wZS5lbnRpdGllcywgeydpZCc6IGlkfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnaXRlbUNoYW5nZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24oaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGVbaXRlbSAlIDEgPT09IDAgPyAnc2V0RW50aXR5SUQnIDogJ3NldEVudGl0eSddKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NlbGVjdEl0ZW0nLCBpdGVtKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS4kb24oJ3NldEN1cnJlbnRMb2NhdGlvbicsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRMb2NhdGlvbiA9IGFyZ3MudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5zZXRFbnRpdGllcyA9IGZ1bmN0aW9uIChlbnRpdGllcykge1xuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0b3BFZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKFwiZWRpdEVudGl0eVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMocmVzcG9uc2Uubm9kZXMpO1xuICAgICAgICAgICAgLy8gJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5jdXJyZW50RW50aXR5LmlkKTtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblx0XHQvL1RISVMgSVMgV0hFUkUgVEhFIE1PQklMRSBTVFVGRiBHT0VTXG5cdFx0JHNjb3BlLnRvZ2dsZU5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZU5vZGUnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6ICRzY29wZS5lbnRpdHlUeXBlc1t0eXBlXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS50b2dnbGVMaW5rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0b2dnbGVMaW5rJywgeyduYW1lJzogdHlwZSwgJ2VuYWJsZWQnOiAkc2NvcGUuY29ubmVjdGlvblR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIFxuXG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDdHJsJywgaG9tZURlcGVuZGVuY2llcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzE0LzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gZGlyZWN0aXZlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJyZXN0cmljdFwiOiBcIkVcIixcbiAgICAgICAgICAgIFwidGVtcGxhdGVVcmxcIjogXCIvbWFwL21hcC5odG1sXCIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJtYXBDdHJsXCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcbiAgICAgICAgICAgIC5kaXJlY3RpdmUoXCJtYXBcIiwgZGVwZW5kZW5jaWVzKTtcblxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyLCBfLCBjb25uZWN0aW9uU2VydmljZSwgdXRpbHMpIHtcbiAgICAgICAgLy8gVE9ETzogTWFrZSBhIGhhc2htYXAgb24gdGhlIGJhY2tlbmQgb2YgaWQgLT4gcG9zaXRpb24sIHRoZW4gdXNlIHNvdXJjZTpcbiAgICAgICAgLy8gZW50aXRpZXNbbWFwW3NvdXJjZWlkXV0gdG8gZ2V0IG5vZGVzLiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTY4MjQzMDhcbiAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICRzY29wZS5jb25uZWN0aW9ucyA9IHt9O1xuICAgICAgICBzdGFydExvYWQoKTtcblxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlcndhbGwuY29tL3Avbmdpc21hL3NhZmUtYXBwbHktaW4tYW5ndWxhci1qc1xuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICAgICAgICBpZiAocGhhc2UgPT09ICckYXBwbHknIHx8IHBoYXNlID09PSAnJGRpZ2VzdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbigndHJpZ2dlck5ldHdvcmtEcmF3Jywgc3RhcnRMb2FkKTtcblxuICAgICAgICAkc2NvcGUuJG9uKCd2aWV3Q2hhbmdlJywgZnVuY3Rpb24gKHZpZXdPYmopIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZXdPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBtYWtlIG9mZnNldCBzY2FsZSBnbG9iYWwgdmFyaWFibGVcbiAgICAgICAgdmFyIG9mZnNldFNjYWxlO1xuXG5cbiAgICAgICAgdmFyIGRyYXdOZXR3b3JrID0gZnVuY3Rpb24gKGVudGl0eUFycmF5LCBjb25uZWN0aW9uQXJyYXkpIHtcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnI25ldHdvcmsnKTtcbiAgICAgIC8vICAgICAgIC5jbGFzc2VkKFwibmV0d29yay1jb250YWluZXJcIiwgdHJ1ZSlcbiAgICAgIC8vICAgICAgIC5hdHRyKFwicHJlc2VydmVBc3BlY3RSYXRpb1wiLCBcInhNaW5ZTWluIG1lZXRcIilcbiAgICAgIC8vIC5hdHRyKFwidmlld0JveFwiLCBcIjAgMCA2MDAgNDAwXCIgKTtcbiAgIC8vY2xhc3MgdG8gbWFrZSBpdCByZXNwb25zaXZlXG4gICAvLyAuY2xhc3NlZChcInN2Zy1jb250ZW50LXJlc3BvbnNpdmVcIiwgdHJ1ZSk7IFxuICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gYm91bmRzLndpZHRoO1xuICAgICAgICAgICAgb2Zmc2V0U2NhbGUgPSA2O1xuICAgICAgICAgICAgdmFyIGRlZmF1bHROb2RlU2l6ZSA9IDc7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0cyA9IHtcbiAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IHsgJ3gnOiAxLCAneSc6IDEgfSxcbiAgICAgICAgICAgICAgICAnRm9yLVByb2ZpdCc6IHsgJ3gnOiAxLCAneSc6IC0xIH0sXG4gICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiB7ICd4JzogLTEsICd5JzogMSB9LFxuICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogeyAneCc6IC0xLCAneSc6IC0xIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbG93ZXJCb3VuZFJhZGl1cyA9IDEwO1xuICAgICAgICAgICAgdmFyIHVwcGVyQm91bmRSYWRpdXMgPSA1MDtcbiAgICAgICAgICAgIHZhciBtYXhFbXBsb3llZXMgPSBkMy5tYXgoZW50aXR5QXJyYXksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbC5lbXBsb3llZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgbWF4Rm9sbG93ZXJzID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZm9sbG93ZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0ge1xuICAgICAgICAgICAgICAgICdlbXBsb3llZXMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4RW1wbG95ZWVzXSlcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFtsb3dlckJvdW5kUmFkaXVzLCB1cHBlckJvdW5kUmFkaXVzXSksXG4gICAgICAgICAgICAgICAgJ2ZvbGxvd2Vycyc6IGQzLnNjYWxlLnNxcnQoKS5kb21haW4oWzEwLCBtYXhGb2xsb3dlcnNdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsaW5rcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGZvcmNlID0gZDMubGF5b3V0LmZvcmNlKClcbiAgICAgICAgICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXG4gICAgICAgICAgICAgICAgLm5vZGVzKGVudGl0eUFycmF5KVxuICAgICAgICAgICAgICAgIC5saW5rcyhfLmZsYXR0ZW4oXy52YWx1ZXMoY29ubmVjdGlvbkFycmF5KSkpXG4gICAgICAgICAgICAgICAgLmNoYXJnZShmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyAtMiAqIHNjYWxlLmVtcGxveWVlcyhkLmVtcGxveWVlcykgOiAtMjA7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubGlua1N0cmVuZ3RoKDApXG4gICAgICAgICAgICAgICAgLmxpbmtEaXN0YW5jZSg1MCk7XG5cbiAgICAgICAgICAgIF8uZm9yRWFjaChjb25uZWN0aW9uQXJyYXksIGZ1bmN0aW9uIChjb25uZWN0aW9ucywgdHlwZSkge1xuICAgICAgICAgICAgICAgIGxpbmtzW3R5cGVdID0gc3ZnLnNlbGVjdEFsbCgnLmxpbmsgLicgKyB0eXBlICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoY29ubmVjdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmlzRGVmaW5lZChkLnNvdXJjZSkgfHwgIXV0aWxzLmlzRGVmaW5lZChkLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGQudHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpbmsgJyArIHR5cGUgKyAnLWxpbmsgJyArIGQuc291cmNlLnR5cGUgKyAnLWxpbmsgJyArIGQudGFyZ2V0LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICctbGluayc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBub2RlID0gc3ZnLnNlbGVjdEFsbCgnLm5vZGUnKVxuICAgICAgICAgICAgICAgIC5kYXRhKGVudGl0eUFycmF5KVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub2RlICcgKyBkLnR5cGUgKyAnLW5vZGUnO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhbGwoZm9yY2UuZHJhZyk7XG5cbiAgICAgICAgICAgIG5vZGUuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gc2NhbGVbJ2VtcGxveWVlcyddKGQuZW1wbG95ZWVzKSA6IGRlZmF1bHROb2RlU2l6ZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbm9kZS5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLm5pY2tuYW1lID8gZC5uaWNrbmFtZSA6IGQubmFtZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgtMC4wNjUgKiB0aGlzLmdldENvbXB1dGVkVGV4dExlbmd0aCgpIC8gMikgKyAnZW0nO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2R5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAuMDggKiB0aGlzLnBhcmVudE5vZGUuZ2V0QkJveCgpLmhlaWdodCAvIDIgKyAwLjUpICsgJ2VtJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yY2Uub24oJ3RpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIENsdXN0ZXIgaW4gZm91ciBjb3JuZXJzIGJhc2VkIG9uIG9mZnNldC5cbiAgICAgICAgICAgICAgICB2YXIgayA9IG9mZnNldFNjYWxlICogZS5hbHBoYTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLmFscGhhKVxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5LnggJiYgb2Zmc2V0c1tlbnRpdHkudHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS54ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnggKiBrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgKz0gb2Zmc2V0c1tlbnRpdHkudHlwZV0ueSAqIGs7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodXBwZXJCb3VuZFJhZGl1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4od2lkdGggLSB1cHBlckJvdW5kUmFkaXVzLCBlbnRpdHkueCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnkgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGhlaWdodCAtIHVwcGVyQm91bmRSYWRpdXMsIGVudGl0eS55KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnNvdXJjZS55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHNwZWVkQW5pbWF0ZSA9IGZ1bmN0aW9uICh0aWNrcykge1xuICAgICAgICAgICAgICAgIC8vIFNwZWVkIHVwIHRoZSBpbml0aWFsIGFuaW1hdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjYxODkxMTBcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpY2tzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlLnRpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9yY2UuYWxwaGEoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gaWYgKCEkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAvLyAgICAgc3BlZWRBbmltYXRlKDcpO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAvLyBhZGQgY2hlY2sgZm9yIG1vYmlsZSB0byBjaGFuZ2Ugc2NhbGVcbiAgICAgICAgICAgIGlmICgkc2NvcGUubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0U2NhbGUgPSAyO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImluIG1vYmlsZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3BlZWQgdXAgYW5pbWF0aW9uIGZvciBtb2JpbGUgYW5kIGRlc2t0b3AgbmV0d29yayBncmFwaCByZW5kZXJpbmdcbiAgICAgICAgICAgIHNwZWVkQW5pbWF0ZSg3KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yY2Uuc3RhcnQoKTtcblxuICAgICAgICAgICAgLy8gSGFzaCBsaW5rZWQgbmVpZ2hib3JzIGZvciBlYXN5IGhvdmVyaW5nIGVmZmVjdHMuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvODc4MDI3N1xuICAgICAgICAgICAgdmFyIGxpbmtlZEJ5SW5kZXggPSB7fTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobFswXSwgZnVuY3Rpb24gKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGNvbm5lY3Rpb24uX19kYXRhX18uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gY29ubmVjdGlvbi5fX2RhdGFfXy50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbc291cmNlLmluZGV4ICsgJywnICsgdGFyZ2V0LmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlZEJ5SW5kZXhbdGFyZ2V0LmluZGV4ICsgJywnICsgc291cmNlLmluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG5laWdoYm9yaW5nID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlua2VkQnlJbmRleFthLmluZGV4ICsgJywnICsgYi5pbmRleF0gfHwgYS5pbmRleCA9PT0gYi5pbmRleDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBmb2N1c25laWdoYm9ycyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSAndW5mb2N1c2VkJyBjbGFzcyB0byBhbGwgbm9uLW5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSAnZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5laWdoYm9ycy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZWUgaWYgaXQgY2FuIGJlIGRvbmUgd2l0aCBqdXN0IG9uZSBjbGFzcyBhbmQgOm5vdCguZm9jdXNlZCkgQ1NTIHNlbGVjdG9ycy5cbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhbmVpZ2hib3JpbmcoZW50aXR5LCBuKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmluZGV4ID09PSBvLnNvdXJjZS5pbmRleCB8fCBlbnRpdHkuaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPT09IG8udGFyZ2V0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKGVudGl0eS5pbmRleCA9PT0gby5zb3VyY2UuaW5kZXggfHwgZW50aXR5LmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPT09IG8udGFyZ2V0LmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGZvY3VzID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudEVudGl0eSAhPT0gZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgICAgIGZvY3VzbmVpZ2hib3JzKGVudGl0eSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdW5mb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvL3ZhciB0cmFuc2l0aW9uZGVsYXkgPSA3NTtcbiAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbnRpdHkuZml4ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyBSZXN0YXJ0IGQzIGFuaW1hdGlvbnMuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZS5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBTaG93IGdlbmVyaWMgZGV0YWlscyBhbmQgbm90IGluZGl2aWR1YWwgZW50aXR5IGRldGFpbHM/XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGhvdmVyVGltZXI7XG4gICAgICAgICAgICB2YXIgaG92ZXIgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5lZGl0aW5nICYmICEkc2NvcGUuY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvdmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdW5ob3ZlciA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBmb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gIElmIHRoZSBjdXJyZW50IGVudGl0eSBpcyBzaG93biBhbmQgaXQgZG9lc24ndCBtYXRjaCB0aGUgY2xpY2tlZCBub2RlLCB0aGVuIHNldFxuICAgICAgICAgICAgICAgIC8vIHRoZSBuZXcgbm9kZSB0byBjbGlja2VkLlxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcblxuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm5hbWUgaW4gbG9jYXRpb24uZGljdDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG8uc291cmNlLm5hbWUgaW4gbG9jYXRpb24uZGljdCAmJiBvLnRhcmdldC5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoby5zb3VyY2UubmFtZSBpbiBsb2NhdGlvbi5kaWN0KSB8fCAhKG8udGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gbG9jYXRpb24uZGljdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciB1bmZvY3VzTG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmb3JjZS5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaGlnaGxpZ2h0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd0xpY2Vuc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gIT09IGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuZm9jdXNMb2NhdGlvbigkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICBmb2N1c0xvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRklYIEZPUiBMT0NBVElPTiBOT1QgSElHSExJR0hUSU5HIG9uIHNlYXJjaCBlbnRlcjpcbiAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9PT0gbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNsaWNrID0gZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TGljZW5zZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5lbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gIElmIHRoZSBwcmV2aW91cyBub2RlIGlzIGVxdWFsIHRvIHRoZSBuZXcgbm9kZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9PT0gZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYIEZPUiBTRUFSQ0ggTk9UIFdPUktJTkc6IGVudGl0eSB3YXMgbm90IGZvY3VzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHN3aXRjaGluZyB0byBzdGFydGxvYWQgZnVuY3Rpb24gZm9yIG5ldHdvcmsgZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgVW5mb2N1cyBvbiBwcmV2aW91cyBub2RlIGFuZCBmb2N1cyBvbiBuZXcgbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBlbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3RvcCBldmVudCBzbyB3ZSBkb24ndCBkZXRlY3QgYSBjbGljayBvbiB0aGUgYmFja2dyb3VuZC5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMjI5NDE3OTZcbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscy5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZGJsY2xpY2sgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbnRpdHkuZml4ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB4ID0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZml4ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBlbnRpdHk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XG4gICAgICAgICAgICB9O1xuXHRcdFx0XG5cdFx0XHR2YXIgdG9nZ2xlTGluayA9IGZ1bmN0aW9uIChldmVudCl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiWW8sIHRoaXMgd29ya3MhXCIpO1xuXHRcdFx0XHRcblx0XHRcdH07XG5cbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3ZlcicsIGhvdmVyKTtcbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3V0JywgdW5ob3Zlcik7XG4gICAgICAgICAgICBub2RlLm9uKCdjbGljaycsIGNsaWNrKTtcbiAgICAgICAgICAgIG5vZGUub24oJ2RibGNsaWNrJywgZGJsY2xpY2spO1xuICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGJhY2tncm91bmRjbGljayk7XG5cbiAgICAgICAgICAgIG5vZGVcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnd2VsbGNvbm5lY3RlZCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmhhc093blByb3BlcnR5KCd3ZWxsY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ2NoYW5nZVNpemVCeScsIGZ1bmN0aW9uIChldmVudCwgc2l6ZUJ5KSB7XG4gICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFtzaXplQnldID8gc2NhbGVbc2l6ZUJ5XShkW3NpemVCeV0pIDogZGVmYXVsdE5vZGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTGluaycsIGZ1bmN0aW9uIChldmVudCwgbGluaykge1xuICAgICAgICAgICAgICAgIC8vIGxpbmtzW2xpbmsubmFtZV1cbiAgICAgICAgICAgICAgICAvLyAuY2xhc3NlZCh7J3Zpc2libGUnOiBsaW5rLmVuYWJsZWQsICdoaWRkZW4nOiAhbGluay5lbmFibGVkfSk7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBuZXh0IGxpbmUgdXBkYXRlcyBhIGRpY3Rpb25hcnkgd2l0aCBrZXlzIG9mIHRoZSBjb25uZWN0aW9uIHR5cGVzIGFuZCB2YWx1ZXMgdGhhdCBhcmUgVHJ1ZS9GYWxzZSBjb3JyZXNwb25kaW5nIHRvIENoZWNrL1VuY2hlY2tcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2xpbmsubmFtZV0gPSBsaW5rLmVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgXy5tYXAoJHNjb3BlLmVudGl0eVR5cGVzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIGtleSArICctbGluaycpIFxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgZW5hYmxlZCwgY29ubmVjdGlvbiB0YXJnZXQgZW50aXR5IHR5cGUgaXMgZW5hYmxlZC5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudGl0eSB0eXBlIGFyZSBkaXNhYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgISRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd0b2dnbGVOb2RlJywgZnVuY3Rpb24gKGV2ZW50LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBuZXh0IGxpbmUgdXBkYXRlcyBhIGRpY3Rpb25hcnkgd2l0aCBrZXlzIG9mIHRoZSBlbnRpdGllcyBhbmQgdmFsdWVzIHRoYXQgYXJlIFRydWUvRmFsc2UgY29ycmVzcG9uZGluZyB0byBDaGVjay9VbmNoZWNrXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVudGl0eVR5cGVzW3R5cGUubmFtZV0gPSB0eXBlLmVuYWJsZWQ7IFxuICAgICAgICAgICAgICAgIHN2Z1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbm9kZScpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHsgJ3Zpc2libGUnOiB0eXBlLmVuYWJsZWQsICdoaWRkZW4nOiAhdHlwZS5lbmFibGVkIH0pO1xuXG4gICAgICAgICAgICAgICAgc3ZnXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsgdHlwZS5uYW1lICsgJy1saW5rJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3Rpb25UeXBlIGVuYWJsZWQsIGNvbm5lY3Rpb24gc291cmNlIGVudGl0eSB0eXBlIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlZCwgY29ubmVjdGlvbiB0YXJnZXQgZW50aXR5IHR5cGUgaXMgZW5hYmxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGlkZGVuJzogZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICghJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoZXZlbnQsIGl0ZW0pIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTZWxlY3QgSXRlbVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExvY2F0aW9uKCRzY29wZS5jdXJyZW50TG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2soJHNjb3BlLmN1cnJlbnRFbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TG9hZCgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmVudGl0aWVzLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmNvbGxhYm9yYXRpb25zLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID49ICRzY29wZS5taW5Db25uZWN0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkQ29ubmVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKGRhdGEuY29ubmVjdGlvbnMpLCBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRDb25uZWN0aW9uc1t0eXBlXSA9IFtdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChkYXRhLmNvbm5lY3Rpb25zLCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKGNvbm5lY3Rpb25zLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSBfLmZpbmQoZmlsdGVyZWRFbnRpdGllcywgeyAnaWQnOiBjb25uZWN0aW9uLnNvdXJjZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsgJ2lkJzogY29ubmVjdGlvbi50YXJnZXQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISggdXRpbHMuaXNEZWZpbmVkKHNvdXJjZU5vZGUpICYmIHV0aWxzLmlzRGVmaW5lZCh0YXJnZXROb2RlKSApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6IHRhcmdldE5vZGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0ucHVzaCh7J3NvdXJjZSc6IHNvdXJjZU5vZGUsICd0YXJnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFyZ2V0Tm9kZX0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHNob3cgbGFiZWxzIG9uIHRvcCA1IG1vc3QgY29ubmVjdGVkIGVudGl0aWVzIGluaXRpYWxseS5cbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRvcCA1IG1vc3QtY29ubmVjdGVkIGVudGl0aWVzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wNSA9IF8udGFrZVJpZ2h0KF8uc29ydEJ5KF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgeyAndHlwZSc6IHR5cGUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFib3JhdGlvbnMubGVuZ3RoJyksIDUpO1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2godG9wNSwgZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LndlbGxjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZpbHRlcmVkRW50aXRpZXMgPSBfLnNvcnRCeShmaWx0ZXJlZEVudGl0aWVzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUud2VsbGNvbm5lY3RlZCkgPyAxIDogMDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGRyYXdOZXR3b3JrKGZpbHRlcmVkRW50aXRpZXMsIGZpbHRlcmVkQ29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25uZWN0aW9uU2VydmljZVxuICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGZpbHRlclwiLCBcIl9cIiwgXCJjb25uZWN0aW9uU2VydmljZVwiLCBcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignbmV0d29ya0N0cmwnLCBDb250cm9sbGVyKTtcblxufSkoYW5ndWxhciwgUlRQKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xMS8xNi5cbiAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXG4gICAgICAgIGRpcmVjdGl2ZVxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBkaXJlY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVVybFwiOiBcImpzL25ldHdvcmsvbmV0d29yay5odG1sXCIsXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJuZXR3b3JrQ3RybFwiXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxuICAgICAgICAuZGlyZWN0aXZlKFwibmV0d29ya1wiLCBkZXBlbmRlbmNpZXMpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNi8xNi5cbiAqL1xuKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuZGlyZWN0aXZlKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RpY3Q6ICdFJyxcbiAgICAgICAgICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoICd0eXBlJyBpbiBhdHRycyAmJiBhdHRycy50eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdyYW5nZScgKSB7XG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChwYXJzZUZsb2F0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIG92ZXJ2aWV3Q3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXMgPSB7fTtcbiAgICAgICAgXy5mb3JFYWNoKF8ua2V5cygkc2NvcGUuZW50aXR5VHlwZXMpLCBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXNbdHlwZV0gPSBfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIHsndHlwZSc6IHR5cGV9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ292ZXJ2aWV3Q3RybCcsIFsnJHNjb3BlJywgJ18nLCBvdmVydmlld0N0cmxdKTtcbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIGlzRGVmaW5lZChvKSB7XG4gICAgICAgIHJldHVybiAhKHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiIHx8IG8gPT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzT2JqZWN0KG8pIHtcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChvKSAmJiAhQXJyYXkuaXNBcnJheShvKSAmJiAodHlwZW9mIG8gPT09IFwib2JqZWN0XCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RnJvbU9iaihvYmopIHtcbiAgICAgICAgdmFyIGRlZk9iaiA9IGlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBpc0RlZmluZWQoZGVmYXVsdFZhbHVlKSA/IGRlZmF1bHRWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKGRlZk9ialtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXG4gICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wQW5kSW5pdChtb2RlbEFycmF5LCBpbml0TW9kZWxGdW5jdGlvbikge1xuICAgICAgICB2YXIgbmV3QXJyYXkgPSBBcnJheS5pc0FycmF5KG1vZGVsQXJyYXkpXG4gICAgICAgICAgICA/IG1vZGVsQXJyYXkuZmlsdGVyKGlzT2JqZWN0KS5tYXAoaW5pdE1vZGVsRnVuY3Rpb24pXG4gICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIHJldHVybiBuZXdBcnJheS5jb25jYXQoW2luaXRNb2RlbEZ1bmN0aW9uKCldKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJpc0RlZmluZWRcIjogaXNEZWZpbmVkLFxuICAgICAgICAgICAgXCJpc09iamVjdFwiOiBpc09iamVjdCxcblxuICAgICAgICAgICAgXCJnZXRQcm9wZXJ0eUZyb21PYmpcIjogZ2V0UHJvcGVydHlGcm9tT2JqLFxuICAgICAgICAgICAgXCJsb29wQW5kSW5pdFwiOiBsb29wQW5kSW5pdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLnV0aWxcIilcbiAgICAgICAgLmZhY3RvcnkoXCJjZ1V0aWxTZXJ2aWNlXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xLzE2LlxuICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gYW5hbHl0aWNzQ3RybCgkc2NvcGUpIHtcblxuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdhbmFseXRpY3NDdHJsJywgWyckc2NvcGUnLCBhbmFseXRpY3NDdHJsXSk7XG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gQ29uZmlnKCRodHRwUHJvdmlkZXIpIHtcbiAgICAgICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbltcIlgtUmVxdWVzdGVkLVdpdGhcIl0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG4gICAgfVxuXG4gICAgQ29uZmlnLiRpbmplY3QgPSBbXCIkaHR0cFByb3ZpZGVyXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIikuY29uZmlnKENvbmZpZyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcGlVcmwgPSBcImh0dHBzOi8vYXBpLmNpdmljZ3JhcGguaW8vYXBpXCI7XG4gICAgLy92YXIgYXBpVXJsID0gXCIvYXBpXCI7XG5cbiAgICB2YXIgZGVmYXVsdEhlYWRlciA9IHtcbiAgICAgICAgLy8gXCJFdmVudC1OYW1lXCI6IFwiVGVzdC1FdmVudFwiXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoJGh0dHAsICRxKSB7XG4gICAgICAgIGZ1bmN0aW9uIGxvZ0FwaUVycm9yKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlY2lldmVkIGFuIGVycm9yIGZyb20gQVBJIHdpdGggdGhpcyBtZXNzYWdlOiAlT1wiLCBlcnIuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bndyYXBBbmd1bGFySHR0cChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXQodXJsLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5nZXQoYXBpVXJsICsgdXJsLCB7IFwicGFyYW1zXCI6IHBhcmFtcywgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcbiAgICAgICAgICAgICAgICAudGhlbih1bndyYXBBbmd1bGFySHR0cCwgbG9nQXBpRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9zdCh1cmwsIGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5wb3N0KGFwaVVybCArIHVybCwgZGF0YSwgeyBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJnZXRcIjogZ2V0LFxuICAgICAgICAgICAgXCJwb3N0XCI6IHBvc3RcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcIiRxXCJdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIikuZmFjdG9yeShcImNnQXBpQ2FsbGVyXCIsIFNlcnZpY2UpO1xuXG59KShhbmd1bGFyKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cbiAqL1xuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UodXRpbHMpIHtcbiAgICAgICAgZnVuY3Rpb24gTG9jYXRpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBidWlsZEZvcm1hdHRlZEFkZHJlc3MoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZk9iaiA9IHV0aWxzLmlzRGVmaW5lZChvYmopID8gb2JqIDoge307XG4gICAgICAgICAgICAgICAgdmFyIGFkZHJlc3NMaW5lID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmouYWRkcmVzc19saW5lKSA/IGRlZk9iai5hZGRyZXNzX2xpbmUgKyAnICcgOiAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsaXR5ID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmoubG9jYWxpdHkpID8gZGVmT2JqLmxvY2FsaXR5ICsgJywgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnRyeUNvZGUgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5jb3VudHJ5X2NvZGUpID8gZGVmT2JqLmNvdW50cnlfY29kZSArICcgJyA6ICcnKTtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdGFsQ29kZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLnBvc3RhbF9jb2RlKSA/IGRlZk9iai5wb3N0YWxfY29kZSA6ICcnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoYWRkcmVzc0xpbmUgKyBsb2NhbGl0eSArIGNvdW50cnlDb2RlICsgcG9zdGFsQ29kZSkudHJpbSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHNlbGYuYWRkcmVzc19saW5lID0gZ2V0UHJvcGVydHkoXCJhZGRyZXNzX2xpbmVcIik7XG4gICAgICAgICAgICBzZWxmLmxvY2FsaXR5ID0gZ2V0UHJvcGVydHkoXCJsb2NhbGl0eVwiKTtcbiAgICAgICAgICAgIHNlbGYuZGlzdHJpY3QgPSBnZXRQcm9wZXJ0eShcImRpc3RyaWN0XCIpO1xuICAgICAgICAgICAgc2VsZi5wb3N0YWxfY29kZSA9IGdldFByb3BlcnR5KFwicG9zdGFsX2NvZGVcIik7XG4gICAgICAgICAgICBzZWxmLmNvdW50cnkgPSBnZXRQcm9wZXJ0eShcImNvdW50cnlcIik7XG4gICAgICAgICAgICBzZWxmLmNvdW50cnlfY29kZSA9IGdldFByb3BlcnR5KFwiY291bnRyeV9jb2RlXCIpO1xuICAgICAgICAgICAgc2VsZi5jb29yZGluYXRlcyA9IGdldFByb3BlcnR5KFwiY29vcmRpbmF0ZXNcIik7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IENvbnZlcnQgdGhpcyB0byBhIG1ldGhvZCB0aGF0IGJ1aWxkcyBiYXNlZCBvZmYgb2YgdGhlIGN1cnJlbnQgb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgICAgICAgICAgIC8vIFVubGVzcyB0aGlzIGlzIG5lZWRlZCBmb3IgdGhlIEFQSSBzcGVjaWZpY2FsbHksIHRoZW4gaGF2ZSB0aGlzIGJ1aWx0IGluIGEgc2ltaWxhciBmdW5jdGlvbiBhcyB0aGUgb25lIGluXG4gICAgICAgICAgICAvLyBFbnRpdHlNb2RlbCBmb3IgYnVpbGRpbmcgQVBJIHNwZWNpZmljIG9iamVjdHNcbiAgICAgICAgICAgIHNlbGYuZm9ybWF0dGVkQWRkcmVzcyA9IGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TG9jYXRpb25Nb2RlbChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYXRpb24ob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldExvY2F0aW9uTW9kZWxcIjogZ2V0TG9jYXRpb25Nb2RlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnVXRpbFNlcnZpY2VcIl07XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NpdmljLWdyYXBoLmFwaScpXG4gICAgICAgIC5mYWN0b3J5KCdsb2NhdGlvblNlcnZpY2UnLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXG4gKi9cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBnZXRFbnRpdHlUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiR292ZXJubWVudFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJGb3ItUHJvZml0XCI6IHRydWUsXG4gICAgICAgICAgICBcIk5vbi1Qcm9maXRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiSW5kaXZpZHVhbFwiOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0SW5mbHVlbmNlVHlwZXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJMb2NhbFwiLCBcIk5hdGlvbmFsXCIsIFwiR2xvYmFsXCJdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoYXBpQ2FsbGVyLCBmdW5Db25uU2VydmljZSwgY29ublNlcnZpY2UsIGZpbmFuY2VTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIGNhdGVnb3J5U2VydmljZSwgdXRpbHMpIHtcblxuICAgICAgICBmdW5jdGlvbiBFbnRpdHkob2JqKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVmT2JqID0gdXRpbHMuaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZURCTW9kZWwoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRiTW9kZWwgPSBuZXcgRW50aXR5KHNlbGYpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfcmVjZWl2ZWQucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX21hZGUucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19tYWRlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmRhdGFfZ2l2ZW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kYXRhX3JlY2VpdmVkLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwua2V5X3Blb3BsZS5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmVtcGxveW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5leHBlbnNlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNhdGVnb3JpZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGVzY3JpcHRpb24gPSAnJztcblxuICAgICAgICAgICAgICAgIHJldHVybiBkYk1vZGVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcbiAgICAgICAgICAgIHNlbGYubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcbiAgICAgICAgICAgIHNlbGYuaW5mbHVlbmNlID0gZ2V0UHJvcGVydHkoXCJpbmZsdWVuY2VcIik7XG4gICAgICAgICAgICBzZWxmLnR5cGUgPSBnZXRQcm9wZXJ0eShcInR5cGVcIik7XG4gICAgICAgICAgICBzZWxmLm5pY2tuYW1lID0gZ2V0UHJvcGVydHkoXCJuaWNrbmFtZVwiKTtcbiAgICAgICAgICAgIHNlbGYudXJsID0gZ2V0UHJvcGVydHkoXCJ1cmxcIik7XG4gICAgICAgICAgICBzZWxmLnR3aXR0ZXJfaGFuZGxlID0gZ2V0UHJvcGVydHkoXCJ0d2l0dGVyX2hhbmRsZVwiKTtcbiAgICAgICAgICAgIHNlbGYuZW1wbG95ZWVzID0gZ2V0UHJvcGVydHkoXCJlbXBsb3llZXNcIik7XG5cbiAgICAgICAgICAgIHNlbGYubG9jYXRpb25zID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmxvY2F0aW9ucywgbG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5ncmFudHNfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX3JlY2VpdmVkLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuaW52ZXN0bWVudHNfcmVjZWl2ZWQgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouaW52ZXN0bWVudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5ncmFudHNfZ2l2ZW4gPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX2dpdmVuLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuaW52ZXN0bWVudHNfbWFkZSA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5pbnZlc3RtZW50c19tYWRlLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZGF0YV9naXZlbiA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5kYXRhX2dpdmVuLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfcmVjZWl2ZWQsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRpb25zID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmNvbGxhYm9yYXRpb25zLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5rZXlfcGVvcGxlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmtleV9wZW9wbGUsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmVtcGxveW1lbnRzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmVtcGxveW1lbnRzLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgc2VsZi5yZXZlbnVlcyA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5yZXZlbnVlcywgZmluYW5jZVNlcnZpY2UuZ2V0RmluYW5jZU1vZGVsKTtcbiAgICAgICAgICAgIHNlbGYuZXhwZW5zZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZXhwZW5zZXMsIGZpbmFuY2VTZXJ2aWNlLmdldEZpbmFuY2VNb2RlbCk7XG4gICAgICAgICAgICBzZWxmLmNhdGVnb3JpZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY2F0ZWdvcmllcywgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5TW9kZWwpO1xuXG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRlREJNb2RlbCA9IGdlbmVyYXRlREJNb2RlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEVudGl0eU1vZGVsKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRpdHkob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KCcvZW50aXRpZXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVFbnRpdHkoZW50aXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpQ2FsbGVyLnBvc3QoXCIvc2F2ZVwiLCB7IFwiZW50aXR5XCI6IGVudGl0eSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcImdldEVudGl0eU1vZGVsXCI6IGdldEVudGl0eU1vZGVsLFxuICAgICAgICAgICAgXCJnZXRFbnRpdHlUeXBlc1wiOiBnZXRFbnRpdHlUeXBlcyxcbiAgICAgICAgICAgIFwiZ2V0SW5mbHVlbmNlVHlwZXNcIjogZ2V0SW5mbHVlbmNlVHlwZXMsXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXG4gICAgICAgICAgICBcInNhdmVFbnRpdHlcIjogc2F2ZUVudGl0eVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcbiAgICAgICAgXCJjZ0FwaUNhbGxlclwiLFxuICAgICAgICBcImZ1bmRpbmdDb25uZWN0aW9uU2VydmljZVwiLFxuICAgICAgICBcImNvbm5lY3Rpb25TZXJ2aWNlXCIsXG4gICAgICAgIFwiZmluYW5jZVNlcnZpY2VcIixcbiAgICAgICAgXCJsb2NhdGlvblNlcnZpY2VcIixcbiAgICAgICAgXCJjYXRlZ29yeVNlcnZpY2VcIixcbiAgICAgICAgXCJjZ1V0aWxTZXJ2aWNlXCJcbiAgICBdO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGguYXBpXCIpXG4gICAgICAgIC5mYWN0b3J5KFwiZW50aXR5U2VydmljZVwiLCBTZXJ2aWNlKTtcblxufSkoYW5ndWxhcik7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXG4gKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgY29udHJvbERlcHMgPSBbXG4gICAgICAgICdlbnRpdHlTZXJ2aWNlJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcbiAgICAgICAgJyRyb290U2NvcGUnLFxuICAgICAgICAnXycsXG4gICAgICAgICckbW9kYWwnLFxuICAgICAgICBjb250cm9sQ3RybFxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjb250cm9sQ3RybChlbnRpdHlTZXJ2aWNlLCBjb25uZWN0aW9uU2VydmljZSwgJHJvb3RTY29wZSwgXywgJG1vZGFsKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xuICAgICAgICB2bS5jb25uZWN0aW9uVHlwZXMgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgICAgICAgdm0uc2l6ZUJ5TGlzdCA9IFtcbiAgICAgICAgICAgIHsnbmFtZSc6ICdFbXBsb3llZXMnLCAndmFsdWUnOiAnZW1wbG95ZWVzJ30sXG4gICAgICAgICAgICB7J25hbWUnOiAnVHdpdHRlciBGb2xsb3dlcnMnLCAndmFsdWUnOiAnZm9sbG93ZXJzJ31cbiAgICAgICAgXTtcbiAgICAgICAgdm0uc2l6ZUJ5ID0gJ2VtcGxveWVlcyc7XG4gICAgICAgIHZtLnNob3dWaWV3ID0ge1xuICAgICAgICAgICAgJ05ldHdvcmsnOiB0cnVlLFxuICAgICAgICAgICAgJ01hcCc6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHZtLnN3aXRjaFZpZXcgPSBzd2l0Y2hWaWV3O1xuICAgICAgICB2bS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImluc2lkZSBjb250cm9sQ3RybCBjaGFuZ2V2aWV3XCIpO1xuXG4gICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKHZtLnNob3dWaWV3KSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2bS5zaG93Vmlld1tuYW1lXSA9IHZpZXcgPT09IG5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsIHZtLnNob3dWaWV3KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uc2hvd0Fib3V0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGNvbnRyb2xDdHJsIHNob3dBYm91dFwiKTtcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9hYm91dC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnbW9kYWxDdHJsJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZtLnRvZ2dsZU5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGNvbnRyb2xDdHJsIHRvZ2dsZU5vZGVcIik7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZU5vZGUnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmVudGl0eVR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0udG9nZ2xlTGluayA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkluc2lkZSB0aGUgY29udHJvbEN0cmwgdG9nZ2xlTGlua1wiKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTGluaycsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogdm0uY29ubmVjdGlvblR5cGVzW3R5cGVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjaGFuZ2VTaXplQnknLCB2bS5zaXplQnkpO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBzd2l0Y2hWaWV3KCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJpbnNpZGUgY29udHJvbEN0cmwgc3dpdGNoIHZpZXdcIik7XG4gICAgICAgICAgICB2bS5jaGFuZ2VWaWV3KCF2bS50b2dnbGVOZXR3b3JrID8gJ01hcCcgOiAnTmV0d29yaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdm0uY2hhbmdlU2l6ZUJ5KCk7XG5cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuICAgICAgICAuY29udHJvbGxlcignY29udHJvbEN0cmwnLCBjb250cm9sRGVwcyk7XG5cbn0pKGFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBkZXRhaWxzQ3RybCgkc2NvcGUsIF8pIHtcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0ID0ge1xuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxuICAgICAgICAgICAgJ2dyYW50c19naXZlbic6IDMsXG4gICAgICAgICAgICAnZ3JhbnRzX3JlY2VpdmVkJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19yZWNlaXZlZCc6IDMsXG4gICAgICAgICAgICAnY29sbGFib3JhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcbiAgICAgICAgICAgICdyZWxhdGlvbnMnOiAzLFxuICAgICAgICAgICAgJ2RhdGFfZ2l2ZW4nOiAzLFxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxuICAgICAgICAgICAgJ3JldmVudWVzJzogMyxcbiAgICAgICAgICAgICdleHBlbnNlcyc6IDNcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcblxuICAgICAgICAkc2NvcGUuJG9uKCdlbnRpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpdGVtcyBzaG93biBpbiBkZXRhaWxzIGxpc3QuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5zaG93TW9yZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dMZXNzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdkZXRhaWxzQ3RybCcsIFsnJHNjb3BlJywgXCJfXCIsIGRldGFpbHNDdHJsXSk7XG59KShhbmd1bGFyKTtcbiIsIihmdW5jdGlvbiAoYW5ndWxhciwgZDMsIEwpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyR0aW1lb3V0JyxcbiAgICAgICAgJ2xlYWZsZXREYXRhJyxcbiAgICAgICAgJ18nLFxuICAgICAgICAnJGZpbHRlcicsXG4gICAgICAgIG1hcEN0cmxcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gbWFwQ3RybCgkc2NvcGUsICR0aW1lb3V0LCBsZWFmbGV0RGF0YSwgXywgJGZpbHRlcikge1xuXG4gICAgICAgICRzY29wZS5vcHRpb25zID0ge1xuICAgICAgICAgICAgY2VudGVyICA6IHtcbiAgICAgICAgICAgICAgICBsYXQgOiAyMC4wMCxcbiAgICAgICAgICAgICAgICBsbmcgOiAtNDAuMDAsXG4gICAgICAgICAgICAgICAgem9vbTogM1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgdGlsZUxheWVyICAgICAgICAgOiAnaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC9tYXBib3gubGlnaHQve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaVpHRjJhV1JzY201MElpd2lZU0k2SWpBME0yUmtOek16WldKbU56RXpOR1l6TVRkaFlURXhZekF5Wm1VNFpURTFJbjAuVE5ZbEZ0YTJWSXRya240TDBaOUJKUScsXG4gICAgICAgICAgICAgICAgdGlsZUxheWVyT3B0aW9ucyAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmV1c2VUaWxlcyAgOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2wgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYS9zYWZlLWFwcGx5LWluLWFuZ3VsYXItanNcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgdmFyIHBoYXNlID0gdGhpcy4kcm9vdC4kJHBoYXNlO1xuICAgICAgICAgICAgaWYgKHBoYXNlID09PSAnJGFwcGx5JyB8fCBwaGFzZSA9PT0gJyRkaWdlc3QnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYXBwbHkoZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjcmVhdGVQaWVDaGFydCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgICA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgICAgICAgICB2YXIgcGllICAgID0gZDMubGF5b3V0LnBpZSgpLnNvcnQobnVsbCkudmFsdWUoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGFyYyAgICA9IGQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyhvcHRpb25zLnIpLmlubmVyUmFkaXVzKG9wdGlvbnMuciAtIDEwKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gb3B0aW9ucy5yICsgb3B0aW9ucy5zdHJva2VXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgdyAgICAgID0gY2VudGVyICogMjtcbiAgICAgICAgICAgICAgICB2YXIgaCAgICAgID0gdztcbiAgICAgICAgICAgICAgICB2YXIgc3ZnICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGQzLm5zLnByZWZpeC5zdmcsICdzdmcnKTtcbiAgICAgICAgICAgICAgICB2YXIgdmlzICAgID0gZDMuc2VsZWN0KHN2ZylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BpZWNoYXJ0JylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyY3MgPSB2aXMuc2VsZWN0QWxsKCcuYXJjJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEocGllKGRhdGEpKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYXJjJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIGNlbnRlciArICcsJyArIGNlbnRlciArICcpJyk7XG5cbiAgICAgICAgICAgICAgICAvLyB2YXIgbWFwID0gTC5tYXBib3gubWFwKCdtYXAnLCAnZXhhbXBsZXMubWFwLTlpanVrMjR5Jywge1xuICAgICAgICAgICAgICAgIC8vICAgICBtaW5ab29tOiAxLFxuICAgICAgICAgICAgICAgIC8vICAgICBtYXhab29tOiAyXG4gICAgICAgICAgICAgICAgLy8gfSkuc2V0VmlldyhbNDAsIC03NC41MF0sIDkpO1xuXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGFyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEudHlwZSArICctYXJjJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZChcInN2Zzp0ZXh0XCIpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTQgKiBvcHRpb25zLmNvdW50LnRvU3RyaW5nKCkubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIDUpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJhcmNUZXh0XCIpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5YTUxTZXJpYWxpemVyID8gKG5ldyB3aW5kb3cuWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhzdmcpXG4gICAgICAgICAgICAgICAgICAgIDogc3ZnLnhtbCA/IHN2Zy54bWwgOiAnJztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gJHNjb3BlLmVudGl0aWVzO1xuXG4gICAgICAgICAgICAgICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG5cbiAgICAgICAgICAgICAgICBuZXcgTC5Db250cm9sLlpvb20oe3Bvc2l0aW9uOiAndG9wcmlnaHQnfSkuYWRkVG8obWFwKTtcbiAgICAgICAgICAgICAgICBMLmNvbnRyb2wubG9jYXRlKFxuICAgICAgICAgICAgICAgICAgICB7cG9zaXRpb246ICd0b3ByaWdodCcsIHNob3dQb3B1cDogZmFsc2UsIGljb246ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyd9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG8obWFwKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsdXN0ZXJJY29uKGNsdXN0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuICAgICAgID0gY2x1c3Rlci5nZXRBbGxDaGlsZE1hcmtlcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsICAgICAgICAgID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2x1c3Rlck1hcmtlcnMgPSBfLnBsdWNrKGNoaWxkcmVuLCAnb3B0aW9ucycpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRzICAgICAgICAgPSBfLm1hcChfLmNvdW50QnkoY2x1c3Rlck1hcmtlcnMsICd0eXBlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjb3VudCwgdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsndHlwZSc6IHR5cGUsICd2YWx1ZSc6IGNvdW50fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByICAgICAgICAgICAgICA9IDI4O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3Ryb2tlV2lkdGggICAgPSAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbkRpbSAgICAgICAgPSAociArIHN0cm9rZVdpZHRoKSAqIDI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sICAgICAgICAgICA9IGNyZWF0ZVBpZUNoYXJ0KFxuICAgICAgICAgICAgICAgICAgICAgICAge2RhdGE6IGNvdW50cywgcjogciwgc3Ryb2tlV2lkdGg6IHN0cm9rZVdpZHRoLCBjb3VudDogdG90YWx9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMLkRpdkljb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCAgICAgOiBodG1sLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbWFya2VyLWNsdXN0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemUgOiBuZXcgTC5wb2ludChpY29uRGltLCBpY29uRGltKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlckljb24gID0ge1xuICAgICAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItbm9ucHJvZi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnRm9yLVByb2ZpdCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItcHJvZi5zdmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAnSW5kaXZpZHVhbCc6IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItaW5kLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1nb3Yuc3ZnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHtcblxuICAgICAgICAgICAgICAgICAgICBzcGlkZXJmeU9uTWF4Wm9vbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGljb25DcmVhdGVGdW5jdGlvbjogY2x1c3Rlckljb24sXG4gICAgICAgICAgICAgICAgICAgIG1heENsdXN0ZXJSYWRpdXM6IDMwLFxuICAgICAgICAgICAgICAgICAgICBzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllcjogMS4zXG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG91dGVyTG9vcChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5uZXJMb29wKGxvYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmV2ZXJ5KGxvYy5jb29yZGluYXRlcykpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2MuY29vcmRpbmF0ZXNbMF0udG9GaXhlZCg1KSA9PT0gJzQwLjc4MjAwJyAmJiBsb2MuY29vcmRpbmF0ZXNbMV0udG9GaXhlZCg1KSA9PT0gJy03My44MzE3MCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMF0gPSA0MC43NzA2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMV0gPSAtNzMuOTc0MDY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IEwubWFya2VyKGxvYy5jb29yZGluYXRlcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG1hcmtlckljb25bZW50aXR5LnR5cGVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IGVudGl0eS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbnRpdHlfaWQnOiBlbnRpdHkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBlbnRpdHkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6IGVudGl0eS50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuYWRkTGF5ZXIobSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5LmxvY2F0aW9ucywgaW5uZXJMb29wKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9yaWdpbmFsOiAlT1wiLCAkc2NvcGUuZW50aXRpZXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmlsdGVyZWQ6ICVPXCIsIGZpbHRlcmVkRW50aXRpZXMpO1xuXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGZpbHRlcmVkRW50aXRpZXMsIG91dGVyTG9vcCk7XG4gICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKG1hcmtlcnMpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25Mb2NhdGlvbkVycm9yKGxlYWZsZXRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGxlYWZsZXRFcnJvci5tZXNzYWdlICsgXCIgICVPXCIsIGxlYWZsZXRFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdsb2NhdGlvbmVycm9yJywgb25Mb2NhdGlvbkVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBtYXAubG9jYXRlKHtzZXRWaWV3OiB0cnVlLCBtYXhab29tOiAxMX0pO1xuICAgICAgICAgICAgICAgIG1hcmtlcnMub24oJ2NsaWNrJywgZnVuY3Rpb24gKG1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RW50aXR5SUQobWFya2VyLmxheWVyLm9wdGlvbnMuZW50aXR5X2lkKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gJHNjb3BlLmN1cnJlbnRFbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2V0dGluZ3NFbmFibGVkICYmICRzY29wZS5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50b2dnbGVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1hcC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSAkc2NvcGUuY3VycmVudEVudGl0eS5sb2NhdGlvbnMubGVuZ3RoID4gMCA/IF8ucGx1Y2soXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eS5sb2NhdGlvbnMsICdjb29yZGluYXRlcycpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5zZXRWaWV3KGNvb3JkaW5hdGVzWzBdLCAxMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxuXG4gICAgICAgIC5jb250cm9sbGVyKCdtYXBDdHJsJywgZGVwZW5kZW5jaWVzKTtcbn0pKGFuZ3VsYXIsIGQzLCBMKTtcbiJdfQ==
