!function(i){"use strict";var a=["ui.bootstrap","leaflet-directive","ngAnimate","templateCache","civic-graph.api","civic-graph.util"],c=["civic-graph.util"];i.module("civic-graph.util",[]),i.module("civic-graph.api",c),i.module("civic-graph",a)}(angular);
!function(t){"use strict";function a(){return{templateUrl:"js/analytic/analytics.html",restrict:"E",scope:{},controller:"analyticsCtrl"}}var c=[a];t.module("civic-graph").directive("analytics",c)}(angular);
!function(e){"use strict";function t(e,t){function i(e){var i=t.getPropertyFromObj(e);this.id=i("id"),this.name=i("name"),this.enabled=i("enable",!0)}function n(e){return new i(e)}function r(){return e.get("/categories")}return{getCategoryModel:n,getAll:r}}t.$inject=["cgApiCaller","cgUtilService"],e.module("civic-graph.api").factory("categoryService",t)}(angular);
!function(t){"use strict";function n(){return{Funding:!0,Data:!0,Employment:!0,Collaboration:!0}}function i(t,i){function o(t){var n=i.getPropertyFromObj(t);this.id=n("id"),this.name=n("name"),this.details=n("details"),this.entity=n("entity"),this.entity_id=n("entity_id")}function c(t){return new o(t)}function r(){return t.get(e)}return{getAll:r,getConnectionTypes:n,getConnectionModel:c}}var e="/connections";i.$inject=["cgApiCaller","cgUtilService"],t.module("civic-graph.api").factory("connectionService",i)}(angular);
!function(i){"use strict";function n(i){function n(n){var t=i.getPropertyFromObj(n);this.id=t("id"),this.year=t("year"),this.amount=t("amount",0)}function t(i){return new n(i)}return{getFinanceModel:t}}n.$inject=["cgUtilService"],i.module("civic-graph.api").factory("financeService",n)}(angular);
!function(n){"use strict";function t(n){function t(t){var i=n.getPropertyFromObj(t);this.id=i("id"),this.year=i("year"),this.amount=i("amount"),this.entity=i("entity","")}function i(n){return new t(n)}return{getFundingConnectionModel:i}}t.$inject=["cgUtilService"],n.module("civic-graph.api").factory("fundingConnectionService",t)}(angular);
!function(o){"use strict";function r(){return{templateUrl:"js/control/controls.html",restrict:"E",scope:{toggleNetwork:"="},controller:"controlCtrl",controllerAs:"control",bindToController:{minConnections:"="}}}var t=[r];o.module("civic-graph").directive("control",t)}(angular);
!function(e){"use strict";function t(t,i,n,o,s,d,c,a){function r(){var e,i,n,o;for(i in t.categories)if(t.categories.hasOwnProperty(i)){e=t.categories[i];for(n in t.editEntity.categories)t.editEntity.categories.hasOwnProperty(n)&&(o=t.editEntity.categories[n],e.id===o.id&&(e.enabled=o.enabled))}}t.isEditing=!1,t.editEntity=s.getEntityModel(t.entity),t.entityTypes=s.getEntityTypes(),t.influenceTypes=s.getInfluenceTypes();var u;t.categories=[],t.addressSearch=function(e){return i.jsonp("https://dev.virtualearth.net/REST/v1/Locations",{params:{query:e,key:"Ai58581yC-Sr7mcFbYTtUkS3ixE7f6ZuJnbFJCVI4hAtW1XoDEeZyidQz2gLCCyD",jsonp:"JSON_CALLBACK",include:"ciso2"}}).then(function(e){if(a.isDefined(e.data.resourceSets)&&e.data.resourceSets.length>0)return e.data.resourceSets[0].resources})},t.toggleCategory=function(e){if(0===t.editEntity.categories.length)t.editEntity.categories.push(e);else{var i=!1;for(var n in t.editEntity.categories)if(t.editEntity.categories.hasOwnProperty(n)){var o=t.editEntity.categories[n];if(o.id===e.id){i=!0,o.enabled=e.enabled;break}}i||t.editEntity.categories.push(e)}},t.setLocation=function(e,i){t.addressSearch(e.formattedAddress).then(function(n){if(a.isDefined(n[0])){var o=n[0],s=o.address,d=o.point;t.addLocation(i),e.address_line=a.isDefined(s.addressLine)?s.addressLine:"",e.locality=a.isDefined(s.locality)?s.locality:"",e.district=a.isDefined(s.adminDistrict)?s.adminDistrict:"",e.country=a.isDefined(s.countryRegion)?s.countryRegion:null,e.country_code=a.isDefined(s.countryRegionIso2)?s.countryRegionIso2:"",e.coordinates=a.isDefined(d.coordinates)?d.coordinates:null,e.postal_code=a.isDefined(s.postalCode)?s.postalCode:null}})},t.addLocation=function(e){e&&t.editEntity.locations.push(c.getLocationModel())},t.addKeyPerson=function(){o.some(t.editEntity.key_people,{name:"",id:null})||t.editEntity.key_people.push({name:"",id:null})},t.setFundingConnection=function(e,t){t.entity_id=e.id},t.addFundingConnection=function(e){o.some(e,{entity:""})||e.push({entity:"",amount:null,year:null,id:null})},t.setConnection=function(e,t){t.entity_id=e.id},t.addConnection=function(e){o.some(e,{entity:"",id:null})||e.push({entity:"",id:null,details:null})},t.addFinance=function(e){o.every(e,function(e){return e.amount>0&&e.year>1750})&&e.push({amount:null,year:null,id:null})},t.save=function(){function e(e){t.isSaving=!1,t.$emit("editEntitySuccess",e),t.cancelEdit()}function i(){t.isError=!0,n(function(){t.isError=!1},2e3)}t.isSaving=!0,s.saveEntity(t.editEntity.generateDBModel()).then(e,i)},t.cancelEdit=function(){t.isOpen=!1},t.$watch("entity",function(i,n){e.equals(i,n)||(t.editEntity=s.getEntityModel(i),t.categories=e.copy(u),r(),t.isEditing=a.isDefined(t.editEntity.id))}),d.getAll().then(function(i){u=i.categories,t.categories=e.copy(u)})}t.$inject=["$scope","$http","$timeout","_","entityService","categoryService","locationService","cgUtilService"],e.module("civic-graph").controller("editCtrl",t)}(angular);
!function(t){"use strict";function e(){return{templateUrl:"js/edit-entity/edit.html",restrict:"E",scope:{entity:"=",entities:"=",isOpen:"="},controller:"editCtrl"}}var i=[e];t.module("civic-graph").directive("editEntity",i)}(angular);
!function(o){"use strict";o.module("civic-graph").constant("_",window._).config(["$locationProvider","$compileProvider",function(o,n){o.html5Mode(!0),n.debugInfoEnabled(!0)}]).filter("thousandSuffix",function(){return function(o,n){var t,i=["k","M","G","T","P","E"];return window.isNaN(o)?null:o<1e3?o:(t=Math.floor(Math.log(o)/Math.log(1e3)),(o/Math.pow(1e3,t)).toFixed(n)+i[t-1])}})}(angular);
!function(t){"use strict";function e(t,e,i,n,o){function a(){t.$broadcast("triggerNetworkDraw")}t.entities=[],t.searchItems=null,t.categories=[],t.currentLocation=null,t.clickedLocation={},t.clickedLocation.location=null,t.clickedEntity={},t.clickedEntity.entity=null,t.editing=!1,t.actions={interacted:!1},t.showsearchMB=!1,t.showAnalytics=!1,t.entityTypes=n.getEntityTypes(),t.connectionTypes=o.getConnectionTypes(),t.status={isNetworkShown:!0,license:!0,networkLoading:!0},t.toggleAnalytics=function(){t.showAnalytics=!t.showAnalytics},this.minConnections=t.minConnections=2;var c=this;t.$watch("minConnections",a),t.connectionChange=function(){console.log(c.minConnections),t.minConnections=c.minConnections,t.$broadcast("triggerNetworkDraw")},t.hydePartials=function(e){"search"===e?(t.editing=!1,t.settingsEnabled=!1):"settings"===e?(t.editing=!1,t.showsearchMB=!1):"edit"===e?(t.settingsEnabled=!1,t.showsearchMB=!1):(t.editing=!1,t.settingsEnabled=!1,t.showsearchMB=!1)},t.showSearch=function(){t.hydePartials("search"),t.showsearchMB=!t.showsearchMB,t.status.license=!1},t.toggleSettings=function(){t.hydePartials("settings"),t.settingsEnabled=!t.settingsEnabled},t.startEdit=function(e){t.currentEntity=e,t.mobile&&t.hydePartials("edit"),t.editing=!0},t.switchView=function(){t.status.isNetworkShown=!t.status.isNetworkShown,t.status.isNetworkShown&&t.$broadcast("triggerNetworkDraw")},window.mobilecheck=function(){var t=!1,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,i=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return function(n){(e.test(n)||i.test(n.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},t.mobile=window.mobilecheck(),t.settingsEnabled=!t.mobile,e(function(){n.getAll().then(function(e){t.entities=e.nodes;var n=i.uniq(i.pluck(i.flatten(i.pluck(t.entities,"locations")),"locality")),o=i.map(n,function(e){var n=i.filter(t.entities,i.flow(i.property("locations"),i.partialRight(i.any,{locality:e})));return{name:e,type:"location",entities:n,dict:i.zipObject(i.pluck(n,"name"),i.pluck(n,"index"))}});t.searchItems=o.concat(t.entities),t.overviewUrl="js/overview/overview.html",t.$broadcast("triggerNetworkDraw")})},100),t.overviewUrl=null,t.setEntity=function(e){t.currentLocation=null,t.currentEntity=e,t.editing&&t.stopEdit(),t.$broadcast("entityChange")},t.setEntityID=function(e){t.setEntity(i.find(t.entities,{id:e}))},t.setLocation=function(e){t.currentLocation=e,t.editing&&t.stopEdit(),t.$broadcast("itemChange")},t.selectItem=function(e){"location"===e.type?t.setLocation(e):t[e%1===0?"setEntityID":"setEntity"](e),t.$broadcast("selectItem",e)},t.$on("setCurrentEntity",function(e,i){t.currentEntity=i.value}),t.$on("setCurrentLocation",function(e,i){t.currentLocation=i.value}),t.setEntities=function(e){t.entities=e},t.stopEdit=function(){t.editing=!1},t.$on("editEntitySuccess",function(e){t.setEntities(e.nodes),t.$broadcast("triggerNetworkDraw")}),t.animationsEnabled=!0,t.toggleNode=function(e){t.$broadcast("toggleNode",{name:e,enabled:t.entityTypes[e]})},t.toggleLink=function(e){t.$broadcast("toggleLink",{name:e,enabled:t.connectionTypes[e]})}}var i=["$scope","$timeout","_","entityService","connectionService",e];t.module("civic-graph").controller("homeCtrl",i)}(angular);
!function(i,t){"use strict";function s(i){function s(){var i=t(this);i.css("height","55vh")}function c(){var i=t(this);window.innerHeight/3>parseInt(i.css("height"))?i.css("height","55vh"):i.css("height","30vh")}var e;i.mobile&&(e=t("#details-panel"),e.css("height","30vh"),e.scrollTop(0),e.scroll(s),e.click(c))}function c(){return{restrict:"A",link:s}}i.module("civic-graph").directive("addMobileEvents",[c])}(angular,$);
!function(o){"use strict";function c(o,c){o.closeWindow=function(){c.close()}}o.module("civic-graph").controller("modalCtrl",["$scope","$modalInstance",c])}(angular);
!function(i){"use strict";var a=[];i.module("civic-graph").directive("map",a)}(angular);
!function(e){"use strict";function n(e,n,t,i,c){function o(){function o(i){var o=n("filter")(e.entities,function(n){return n.collaborations.length>=e.minConnections}),a={};t.forEach(t.keys(i.connections),function(e){a[e]=[]}),t.forEach(i.connections,function(e,n){t.forEach(e,function(e){var i=t.find(o,{id:e.source}),r=t.find(o,{id:e.target});c.isDefined(i)&&c.isDefined(r)&&a[n].push({source:i,target:r})})}),t.forEach(t.keys(e.entityTypes),function(n){var i=t.takeRight(t.sortBy(t.filter(e.entities,{type:n}),"collaborations.length"),5);t.forEach(i,function(e){e.wellconnected=!0})}),o=t.sortBy(o,function(e){return e.wellconnected?1:0}),r(o,a)}i.getAll().then(o)}e.isLoading=!0,e.connections={},o(),e.safeApply=function(e){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)},e.$on("triggerNetworkDraw",o),e.$on("viewChange",function(e){console.log(e)});var a,r=function(n,i){e.isLoading=!1;var o=d3.select("#network");o.selectAll("*").remove();var r=o.node().getBoundingClientRect(),s=r.height,l=r.width;a=6;var u=7,d={Individual:{x:1,y:1},"For-Profit":{x:1,y:-1},"Non-Profit":{x:-1,y:1},Government:{x:-1,y:-1}},f=10,y=50,p=d3.max(n,function(e){return parseInt(e.employees)}),k=d3.max(n,function(e){return parseInt(e.followers)}),g={employees:d3.scale.sqrt().domain([10,p]).range([f,y]),followers:d3.scale.sqrt().domain([10,k]).range([f,y])},m={},h=d3.layout.force().size([l,s]).nodes(n).links(t.flatten(t.values(i))).charge(function(e){return e.employees?-2*g.employees(e.employees):-20}).linkStrength(0).linkDistance(50);t.forEach(i,function(e,n){m[n]=o.selectAll(".link ."+n+"-link").data(e).enter().append("line").attr("class",function(e){return c.isDefined(e.source)&&c.isDefined(e.target)?(e.type=n,"link "+n+"-link "+e.source.type+"-link "+e.target.type+"-link"):""})});var x=o.selectAll(".node").data(n).enter().append("g").attr("class",function(e){return"node "+e.type+"-node"}).call(h.drag);x.append("circle").attr("r",function(e){return e.employees?g.employees(e.employees):u}),x.append("text").text(function(e){return e.nickname?e.nickname:e.name}).attr("dx",function(){return-.065*this.getComputedTextLength()/2+"em"}).attr("dy",function(){return.08*this.parentNode.getBBox().height/2+.5+"em"}),h.on("tick",function(e){var i=a*e.alpha;t.forEach(n,function(e){e.x&&d[e.type]&&(e.x+=d[e.type].x*i,e.y+=d[e.type].y*i,e.x=Math.max(y,Math.min(l-y,e.x)),e.y=Math.max(y,Math.min(s-y,e.y)))}),t.forEach(m,function(e){e.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})}),x.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})});var E=function(e){requestAnimationFrame(function n(){for(var t=0;t<e;t++)h.tick();h.alpha()>0&&requestAnimationFrame(n)})};e.mobile&&(a=2,console.log("in mobile")),E(7),h.start();var v={};t.forEach(m,function(e){t.forEach(e[0],function(e){var n=e.__data__.source,t=e.__data__.target;v[n.index+","+t.index]=!0,v[t.index+","+n.index]=!0})});var L,T=function(e,n){return v[e.index+","+n.index]||e.index===n.index},A=function(e){x.classed("focused",function(n){return T(e,n)}).classed("unfocused",function(n){return!T(e,n)}),t.forEach(m,function(n){n.classed("focused",function(n){return e.index===n.source.index||e.index===n.target.index}).classed("unfocused",function(n){return!(e.index===n.source.index||e.index===n.target.index)})})},w=function(n){e.currentEntity!==n&&e.setEntity(n),e.safeApply(),A(n)},$=function(n){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),n.fixed=!1,e.clickedEntity.entity&&h.resume()},b=function(n){e.clickedEntity.entity||e.editing||e.currentLocation||(L=setTimeout(function(){w(n)},500)),e.actions.interacted=!0,e.safeApply()},D=function(n){e.clickedEntity.entity||e.currentLocation||($(n),clearTimeout(L)),e.actions.interacted=!0,e.safeApply()},_=function(n){e.safeApply(),x.classed("focused",function(e){return e.name in n.dict}).classed("unfocused",function(e){return!(e.name in n.dict)}),t.forEach(m,function(e){e.classed("focused",function(e){return e.source.name in n.dict&&e.target.name in n.dict}).classed("unfocused",function(e){return!(e.source.name in n.dict&&e.target.name in n.dict)})})},B=function(){x.classed("focused",!1).classed("unfocused",!1),t.forEach(m,function(e){e.classed("focused",!1).classed("unfocused",!1)}),e.clickedLocation.location&&h.resume()},P=function(n){e.showLicense=!1,e.clickedEntity.entity&&($(e.clickedEntity.entity),e.clickedEntity.entity=null),e.clickedLocation.location!==n?(B(e.clickedLocation.location),_(n)):e.clickedLocation.location===n&&(e.clickedLocation.location=n,_(n)),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},C=function(n){e.showLicense=!1,c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&(B(e.clickedLocation.entity),e.clickedLocation.location=null),e.clickedEntity.entity===n?(e.clickedEntity.entity=null,w(n)):(e.clickedEntity.entity&&$(e.clickedEntity.entity),e.clickedEntity.entity=n,w(n))),d3.event&&d3.event.stopPropagation(),e.actions.interacted=!0,e.safeApply()},I=function(){c.isDefined(e.clickedLocation)&&(c.isDefined(e.clickedLocation.location)&&($(e.clickedLocation.location),e.clickedLocation.location=null),c.isDefined(e.clickedEntity.entity)&&($(e.clickedEntity.entity),e.clickedEntity.entity=null)),e.safeApply()},S=function(n){n.fixed?$(n):(n.x=l/2,n.y=s/2,n.px=l/2,n.py=s/2,n.fixed=!0,e.clickedEntity.entity=n),e.actions.interacted=!0,e.safeApply()};x.on("mouseover",b),x.on("mouseout",D),x.on("click",C),x.on("dblclick",S),o.on("click",I),x.classed("wellconnected",function(e){return e.hasOwnProperty("wellconnected")}),e.$on("changeSizeBy",function(e,n){o.selectAll("circle").transition().duration(250).attr("r",function(e){return e[n]?g[n](e[n]):u})}),e.$on("toggleLink",function(n,i){e.connectionTypes[i.name]=i.enabled,t.map(e.entityTypes,function(n,t){o.selectAll("."+t+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})})}),e.$on("toggleNode",function(n,t){e.entityTypes[t.name]=t.enabled,o.selectAll("."+t.name+"-node").classed({visible:t.enabled,hidden:!t.enabled}),o.selectAll("."+t.name+"-link").classed({visible:function(n){return e.connectionTypes[n.type]&&e.entityTypes[n.source.type]&&e.entityTypes[n.target.type]},hidden:function(n){return!e.connectionTypes[n.type]||!e.entityTypes[n.source.type]||!e.entityTypes[n.target.type]}})}),e.$on("selectItem",function(n,t){console.log("Select Item"),"location"===t.type?P(e.currentLocation):C(e.currentEntity)})}}n.$inject=["$scope","$filter","_","connectionService","cgUtilService"],e.module("civic-graph").controller("networkCtrl",n)}(angular,RTP);
!function(r){"use strict";function t(){return{restrict:"E",templateUrl:"js/network/network.html",controller:"networkCtrl"}}var e=[t];r.module("civic-graph").directive("network",e)}(angular);
!function(e){"use strict";e.module("civic-graph").directive("input",function(){return{restict:"E",require:"?ngModel",link:function(e,r,t,i){"type"in t&&"range"===t.type.toLowerCase()&&i.$parsers.push(parseFloat)}}})}(angular);
!function(e){"use strict";function t(e,t){e.categorizedEntities={},t.forEach(t.keys(e.entityTypes),function(i){e.categorizedEntities[i]=t.filter(e.entities,{type:i})})}e.module("civic-graph").controller("overviewCtrl",["$scope","_",t])}(angular);
!function(r){"use strict";function n(r){return!("undefined"==typeof r||null===r)}function t(r){return n(r)&&!Array.isArray(r)&&"object"==typeof r}function e(r){var t=n(r)?r:{};return function(r,e){var i=n(e)?e:null;return n(t[r])?t[r]:i}}function i(r,n){var e=Array.isArray(r)?r.filter(t).map(n):[];return e.concat([n()])}function u(){return{isDefined:n,isObject:t,getPropertyFromObj:e,loopAndInit:i}}r.module("civic-graph.util").factory("cgUtilService",u)}(angular);
!function(c){"use strict";function n(c){}c.module("civic-graph").controller("analyticsCtrl",["$scope",n])}(angular);
!function(t){"use strict";function e(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}e.$inject=["$httpProvider"],t.module("civic-graph.api").config(e)}(angular);
!function(t){"use strict";function r(t,r){function a(t){return console.error("Recieved an error from API with this message: %O",t.data),r.reject(t)}function i(t){return t.data}function c(r,c){return t.get(e+r,{params:c,headers:n}).then(i,a)}function o(r,c){return t.post(e+r,c,{headers:n}).then(i,a)}return{get:c,post:o}}var e="https://api.civicgraph.io/api",n={};r.$inject=["$http","$q"],t.module("civic-graph.api").factory("cgApiCaller",r)}(angular);
!function(e){"use strict";function i(e){function i(i){function t(){var t=e.isDefined(i)?i:{},o=e.isDefined(t.address_line)?t.address_line+" ":"",c=e.isDefined(t.locality)?t.locality+", ":"",n=e.isDefined(t.country_code)?t.country_code+" ":"",r=e.isDefined(t.postal_code)?t.postal_code:"";return(o+c+n+r).trim()}var o=this,c=e.getPropertyFromObj(i);o.id=c("id"),o.address_line=c("address_line"),o.locality=c("locality"),o.district=c("district"),o.postal_code=c("postal_code"),o.country=c("country"),o.country_code=c("country_code"),o.coordinates=c("coordinates"),o.formattedAddress=t()}function t(e){return new i(e)}return{getLocationModel:t}}i.$inject=["cgUtilService"],e.module("civic-graph.api").factory("locationService",i)}(angular);
!function(e){"use strict";function n(){return{Government:!0,"For-Profit":!0,"Non-Profit":!0,Individual:!0}}function o(){return["Local","National","Global"]}function t(e,t,i,p,r,a,c){function l(e){function n(){var e=new l(o);return e.locations.pop(),e.locations.pop(),e.grants_received.pop(),e.grants_received.pop(),e.grants_given.pop(),e.grants_given.pop(),e.investments_received.pop(),e.investments_received.pop(),e.investments_made.pop(),e.investments_made.pop(),e.data_given.pop(),e.data_given.pop(),e.data_received.pop(),e.data_received.pop(),e.collaborations.pop(),e.collaborations.pop(),e.key_people.pop(),e.key_people.pop(),e.employments.pop(),e.employments.pop(),e.revenues.pop(),e.revenues.pop(),e.expenses.pop(),e.expenses.pop(),e.categories.pop(),e.categories.pop(),e.description="",e}var o=this,d=c.isDefined(e)?e:{},s=c.getPropertyFromObj(e);o.id=s("id"),o.name=s("name"),o.influence=s("influence"),o.type=s("type"),o.nickname=s("nickname"),o.url=s("url"),o.twitter_handle=s("twitter_handle"),o.employees=s("employees"),o.locations=c.loopAndInit(d.locations,r.getLocationModel),o.grants_received=c.loopAndInit(d.grants_received,t.getFundingConnectionModel),o.investments_received=c.loopAndInit(d.investments_received,t.getFundingConnectionModel),o.grants_given=c.loopAndInit(d.grants_given,t.getFundingConnectionModel),o.investments_made=c.loopAndInit(d.investments_made,t.getFundingConnectionModel),o.data_given=c.loopAndInit(d.data_given,i.getConnectionModel),o.data_received=c.loopAndInit(d.data_received,i.getConnectionModel),o.collaborations=c.loopAndInit(d.collaborations,i.getConnectionModel),o.key_people=c.loopAndInit(d.key_people,i.getConnectionModel),o.employments=c.loopAndInit(d.employments,i.getConnectionModel),o.revenues=c.loopAndInit(d.revenues,p.getFinanceModel),o.expenses=c.loopAndInit(d.expenses,p.getFinanceModel),o.categories=c.loopAndInit(d.categories,a.getCategoryModel),o.generateDBModel=n}function d(e){return new l(e)}function s(){return e.get("/entities")}function g(n){return e.post("/save",{entity:n})}return{getEntityModel:d,getEntityTypes:n,getInfluenceTypes:o,getAll:s,saveEntity:g}}t.$inject=["cgApiCaller","fundingConnectionService","connectionService","financeService","locationService","categoryService","cgUtilService"],e.module("civic-graph.api").factory("entityService",t)}(angular);
!function(e){"use strict";function o(e,o,n,t,i){function l(){console.log("inside controlCtrl switch view"),c.changeView(c.toggleNetwork?"Network":"Map")}var c=this;c.entityTypes=e.getEntityTypes(),c.connectionTypes=o.getConnectionTypes(),c.sizeByList=[{name:"Employees",value:"employees"},{name:"Twitter Followers",value:"followers"}],c.sizeBy="employees",c.showView={Network:!0,Map:!1},c.switchView=l,c.changeView=function(e){console.log("inside controlCtrl changeview"),t.forEach(t.keys(c.showView),function(o){c.showView[o]=e===o}),n.$broadcast("viewChange",c.showView)},c.showAbout=function(){console.log("Inside the controlCtrl showAbout"),i.open({animation:!1,templateUrl:"js/control/about.html",controller:"modalCtrl"})},c.toggleNode=function(e){console.log("Inside the controlCtrl toggleNode"),n.$broadcast("toggleNode",{name:e,enabled:c.entityTypes[e]})},c.toggleLink=function(e){console.log("Inside the controlCtrl toggleLink"),n.$broadcast("toggleLink",{name:e,enabled:c.connectionTypes[e]})},c.changeSizeBy=function(){n.$broadcast("changeSizeBy",c.sizeBy)},c.changeSizeBy()}var n=["entityService","connectionService","$rootScope","_","$modal",o];e.module("civic-graph").controller("controlCtrl",n)}(angular);
!function(e){"use strict";function n(e,n){e.itemsShownDefault={key_people:3,grants_given:3,grants_received:3,investments_made:3,investments_received:3,collaborations:3,employments:3,relations:3,data_given:3,data_received:3,revenues:3,expenses:3},e.itemsShown=n.clone(e.itemsShownDefault),e.$on("entityChange",function(){e.itemsShown=n.clone(e.itemsShownDefault)}),e.showMore=function(n){e.itemsShown[n]=e.currentEntity[n].length},e.showLess=function(n){e.itemsShown[n]=e.itemsShownDefault[n]}}e.module("civic-graph").controller("detailsCtrl",["$scope","_",n])}(angular);
!function(t,e,n){"use strict";function i(t,i,o,r,a){t.options={center:{lat:20,lng:-40,zoom:3},defaults:{tileLayer:"https://api.tiles.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGF2aWRscm50IiwiYSI6IjA0M2RkNzMzZWJmNzEzNGYzMTdhYTExYzAyZmU4ZTE1In0.TNYlFta2VItrkn4L0Z9BJQ",tileLayerOptions:{detectRetina:!0,reuseTiles:!1},zoomControl:!1,attributionControl:!1}},t.safeApply=function(t){var e=this.$root.$$phase;"$apply"===e||"$digest"===e?t&&"function"==typeof t&&t():this.$apply(t)},i(function(){var i=function(t){var n=t.data,i=e.layout.pie().sort(null).value(function(t){return t.value}),o=e.svg.arc().outerRadius(t.r).innerRadius(t.r-10),r=t.r+t.strokeWidth,a=2*r,c=a,l=document.createElementNS(e.ns.prefix.svg,"svg"),s=e.select(l).data(n).attr("class","piechart").attr("width",a).attr("height",c),p=s.selectAll(".arc").data(i(n)).enter().append("g").attr("class","arc").attr("transform","translate("+r+","+r+")");return p.append("path").attr("d",o).attr("class",function(t){return t.data.type+"-arc"}),p.append("svg:text").text(function(e,n){if(0===n)return t.count}).attr("x",-4*t.count.toString().length).attr("dy",5).attr("class","arcText"),window.XMLSerializer?(new window.XMLSerializer).serializeToString(l):l.xml?l.xml:""};o.getMap().then(function(e){function o(t){var e=t.getAllChildMarkers(),o=e.length,a=r.pluck(e,"options"),c=r.map(r.countBy(a,"type"),function(t,e){return{type:e,value:t}}),l=28,s=1,p=2*(l+s),u=i({data:c,r:l,strokeWidth:s,count:o});return new n.DivIcon({html:u,className:"marker-cluster",iconSize:new n.point(p,p)})}function a(t){function e(e){if(r.every(e.coordinates)){"40.78200"===e.coordinates[0].toFixed(5)&&"-73.83170"===e.coordinates[1].toFixed(5)&&(e.coordinates[0]=40.77065,e.coordinates[1]=-73.97406);var i=n.marker(e.coordinates,{icon:s[t.type],title:t.name,entity_id:t.id,message:t.name,type:t.type});p.addLayer(i)}}r.forEach(t.locations,e)}function c(t){console.error(t.message+"  %O",t)}var l=t.entities;e.invalidateSize(),new n.Control.Zoom({position:"topright"}).addTo(e),n.control.locate({position:"topright",showPopup:!1,icon:"fa fa-location-arrow"}).addTo(e);var s={"Non-Profit":n.icon({iconUrl:"img/marker-nonprof.svg",iconSize:[60,60]}),"For-Profit":n.icon({iconUrl:"img/marker-prof.svg",iconSize:[60,60]}),Individual:n.icon({iconUrl:"img/marker-ind.svg",iconSize:[60,60]}),Government:n.icon({iconUrl:"img/marker-gov.svg",iconSize:[60,60]})},p=n.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:o,maxClusterRadius:30,spiderfyDistanceMultiplier:1.3});console.log("Original: %O",t.entities),console.log("Filtered: %O",l),r.forEach(l,a),e.addLayer(p),e.on("locationerror",c),p.on("click",function(e){t.setEntityID(e.layer.options.entity_id),t.clickedEntity.entity=t.currentEntity,t.actions.interacted=!0,t.settingsEnabled&&t.mobile&&t.toggleSettings(),t.safeApply()}),e.on("click",function(){t.clickedEntity.entity=null,t.actions.interacted=!0,t.safeApply()}),t.$on("selectItem",function(){var n=t.currentEntity.locations.length>0?r.pluck(t.currentEntity.locations,"coordinates"):null;n.length>0&&e.setView(n[0],11),t.actions.interacted=!0,t.safeApply()})})})}var o=["$scope","$timeout","leafletData","_","$filter",i];t.module("civic-graph").controller("mapCtrl",o)}(angular,d3,L);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpdmljLWdyYXBoLm1vZHVsZS5qcyIsImFuYWx5dGljL2FuYWx5dGljc0RpcmVjdGl2ZS5qcyIsImFwaS9jYXRlZ29yeS5zZXJ2aWNlLmpzIiwiYXBpL2Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImFwaS9maW5hbmNlLnNlcnZpY2UuanMiLCJhcGkvZnVuZGluZ0Nvbm5lY3Rpb24uc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbERpcmVjdGl2ZS5qcyIsImVkaXQtZW50aXR5L2VkaXRDdHJsLmpzIiwiZWRpdC1lbnRpdHkvZWRpdEVudGl0eURpcmVjdGl2ZS5qcyIsIm1haW4vYXBwLmpzIiwibWFpbi9ob21lQ3RybC5qcyIsImV4dHJhL2FkZE1vYmlsZUV2ZW50cy5qcyIsImV4dHJhL21vZGFsQ3RybC5qcyIsIm1hcC9tYXBEaXJlY3RpdmUuanMiLCJuZXR3b3JrL25ldHdvcmtDdHJsLmpzIiwibmV0d29yay9uZXR3b3JrRGlyZWN0aXZlLmpzIiwibmV0d29yay9zbGlkZXJCYXIuanMiLCJvdmVydmlldy9vdmVydmlld0N0cmwuanMiLCJ1dGlsL3NlcnZpY2UuanMiLCJhbmFseXRpYy9jb250cm9sbGVyL2FuYWx5dGljc0N0cmwuanMiLCJhcGkvYXBpQ2FsbGVyL2NvbmZpZy5qcyIsImFwaS9hcGlDYWxsZXIvc2VydmljZS5qcyIsImFwaS9lbnRpdHkvbG9jYXRpb24uc2VydmljZS5qcyIsImFwaS9lbnRpdHkvc2VydmljZS5qcyIsImNvbnRyb2wvY29udHJvbGxlci9jb250cm9sQ3RybC5qcyIsImRldGFpbC9jb250cm9sbGVyL2RldGFpbHNDdHJsLmpzIiwibWFwL2NvbnRyb2xsZXIvbWFwQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibWFpbkRlcGVuZGVuY3lMaXN0IiwiYXBpRGVwZW5kZW5jeUxpc3QiLCJtb2R1bGUiLCJhbmFseXRpY3NEaXJlY3RpdmUiLCJ0ZW1wbGF0ZVVybCIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyIiwiYW5hbHl0aWNzRGVwZW5kZW5jaWVzIiwiZGlyZWN0aXZlIiwiU2VydmljZSIsImFwaUNhbGxlciIsInV0aWxzIiwiQ2F0ZWdvcnkiLCJvYmoiLCJnZXRQcm9wZXJ0eSIsImdldFByb3BlcnR5RnJvbU9iaiIsInRoaXMiLCJpZCIsIm5hbWUiLCJlbmFibGVkIiwiZ2V0Q2F0ZWdvcnlNb2RlbCIsImdldEFsbCIsImdldCIsIiRpbmplY3QiLCJmYWN0b3J5IiwiZ2V0Q29ubmVjdGlvblR5cGVzIiwiRnVuZGluZyIsIkRhdGEiLCJFbXBsb3ltZW50IiwiQ29sbGFib3JhdGlvbiIsIkNvbm5lY3Rpb24iLCJkZXRhaWxzIiwiZW50aXR5IiwiZW50aXR5X2lkIiwiZ2V0Q29ubmVjdGlvbk1vZGVsIiwidXJsIiwiRmluYW5jZSIsInllYXIiLCJhbW91bnQiLCJnZXRGaW5hbmNlTW9kZWwiLCJGdW5kaW5nQ29ubmVjdGlvbiIsImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwiLCJjb250cm9sRGlyZWN0aXZlIiwidG9nZ2xlTmV0d29yayIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJtaW5Db25uZWN0aW9ucyIsImNvbnRyb2xEZXBlbmRlbmNpZXMiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkdGltZW91dCIsIl8iLCJlbnRpdHlTZXJ2aWNlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwibG9jYXRpb25TZXJ2aWNlIiwiaW5pdENhdGVnb3J5QXJyYXkiLCJjYXRlZ29yeSIsImNhdGVnb3J5SW5kZXgiLCJlbnRpdHlDYXRlZ29yeUluZGV4IiwiZW50aXR5Q2F0ZWdvcnkiLCJjYXRlZ29yaWVzIiwiaGFzT3duUHJvcGVydHkiLCJlZGl0RW50aXR5IiwiaXNFZGl0aW5nIiwiZ2V0RW50aXR5TW9kZWwiLCJlbnRpdHlUeXBlcyIsImdldEVudGl0eVR5cGVzIiwiaW5mbHVlbmNlVHlwZXMiLCJnZXRJbmZsdWVuY2VUeXBlcyIsImNhdGVnb3J5QmFja3VwIiwiYWRkcmVzc1NlYXJjaCIsInNlYXJjaCIsImpzb25wIiwicGFyYW1zIiwicXVlcnkiLCJrZXkiLCJpbmNsdWRlIiwidGhlbiIsInJlc3BvbnNlIiwiaXNEZWZpbmVkIiwiZGF0YSIsInJlc291cmNlU2V0cyIsImxlbmd0aCIsInJlc291cmNlcyIsInRvZ2dsZUNhdGVnb3J5IiwicHVzaCIsImZvdW5kIiwic2V0TG9jYXRpb24iLCJsb2NhdGlvbiIsImlzTGFzdCIsImZvcm1hdHRlZEFkZHJlc3MiLCJhcGlDYWxsUmVzdWx0IiwicmVzdWx0IiwiYWRkcmVzcyIsInBvaW50IiwiYWRkTG9jYXRpb24iLCJhZGRyZXNzX2xpbmUiLCJhZGRyZXNzTGluZSIsImxvY2FsaXR5IiwiZGlzdHJpY3QiLCJhZG1pbkRpc3RyaWN0IiwiY291bnRyeSIsImNvdW50cnlSZWdpb24iLCJjb3VudHJ5X2NvZGUiLCJjb3VudHJ5UmVnaW9uSXNvMiIsImNvb3JkaW5hdGVzIiwicG9zdGFsX2NvZGUiLCJwb3N0YWxDb2RlIiwibG9jYXRpb25zIiwiZ2V0TG9jYXRpb25Nb2RlbCIsImFkZEtleVBlcnNvbiIsInNvbWUiLCJrZXlfcGVvcGxlIiwic2V0RnVuZGluZ0Nvbm5lY3Rpb24iLCJmdW5kaW5nIiwiYWRkRnVuZGluZ0Nvbm5lY3Rpb24iLCJzZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImFkZENvbm5lY3Rpb24iLCJjb25uZWN0aW9ucyIsImFkZEZpbmFuY2UiLCJyZWNvcmRzIiwiZXZlcnkiLCJyIiwic2F2ZSIsInN1Y2Nlc3MiLCJpc1NhdmluZyIsIiRlbWl0IiwiY2FuY2VsRWRpdCIsImVycm9yIiwiaXNFcnJvciIsInNhdmVFbnRpdHkiLCJnZW5lcmF0ZURCTW9kZWwiLCJpc09wZW4iLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJlcXVhbHMiLCJjb3B5IiwiZWRpdEVudGl0eURpcmVjdGl2ZSIsImVudGl0aWVzIiwiZWRpdEVudGl0eURlcGVuZGVuY2llcyIsImNvbnN0YW50Iiwid2luZG93IiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiZGVidWdJbmZvRW5hYmxlZCIsImZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJleHAiLCJzdWZmaXhlcyIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibG9nIiwicG93IiwidG9GaXhlZCIsImhvbWVDdHJsIiwiY29ubmVjdGlvblNlcnZpY2UiLCJ3YXRjaE1pbkNvbm5lY3Rpb24iLCIkYnJvYWRjYXN0Iiwic2VhcmNoSXRlbXMiLCJjdXJyZW50TG9jYXRpb24iLCJjbGlja2VkTG9jYXRpb24iLCJjbGlja2VkRW50aXR5IiwiZWRpdGluZyIsImFjdGlvbnMiLCJpbnRlcmFjdGVkIiwic2hvd3NlYXJjaE1CIiwic2hvd0FuYWx5dGljcyIsImNvbm5lY3Rpb25UeXBlcyIsInN0YXR1cyIsImlzTmV0d29ya1Nob3duIiwibGljZW5zZSIsIm5ldHdvcmtMb2FkaW5nIiwidG9nZ2xlQW5hbHl0aWNzIiwic2VsZiIsImNvbm5lY3Rpb25DaGFuZ2UiLCJjb25zb2xlIiwiaHlkZVBhcnRpYWxzIiwiZXhjZXB0Iiwic2V0dGluZ3NFbmFibGVkIiwic2hvd1NlYXJjaCIsInRvZ2dsZVNldHRpbmdzIiwic3RhcnRFZGl0IiwiY3VycmVudEVudGl0eSIsIm1vYmlsZSIsInN3aXRjaFZpZXciLCJtb2JpbGVjaGVjayIsImNoZWNrIiwicmVnZXgiLCJyZWdleDIiLCJhIiwidGVzdCIsInN1YnN0ciIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInZlbmRvciIsIm9wZXJhIiwibm9kZXMiLCJ1bmlxIiwicGx1Y2siLCJmbGF0dGVuIiwiZW50aXRpZXNCeUxvY2F0aW9uIiwibWFwIiwibG9jIiwiZmluZGluZ3MiLCJmbG93IiwicHJvcGVydHkiLCJwYXJ0aWFsUmlnaHQiLCJhbnkiLCJ0eXBlIiwiZGljdCIsInppcE9iamVjdCIsImNvbmNhdCIsIm92ZXJ2aWV3VXJsIiwic2V0RW50aXR5Iiwic3RvcEVkaXQiLCJzZXRFbnRpdHlJRCIsImZpbmQiLCJzZWxlY3RJdGVtIiwiaXRlbSIsIiRvbiIsImV2ZW50IiwiYXJncyIsInZhbHVlIiwic2V0RW50aXRpZXMiLCJhbmltYXRpb25zRW5hYmxlZCIsInRvZ2dsZU5vZGUiLCJ0b2dnbGVMaW5rIiwiaG9tZURlcGVuZGVuY2llcyIsIiQiLCJsaW5rRnVuY3Rpb24iLCJzY3JvbGwiLCJjc3MiLCJjbGljayIsImlubmVySGVpZ2h0IiwicGFyc2VJbnQiLCJkZXRhaWxzUGFuZWwiLCJzY3JvbGxUb3AiLCJhZGRNb2JpbGVFdmVudHMiLCJsaW5rIiwibW9kYWxDdHJsIiwiJG1vZGFsSW5zdGFuY2UiLCJjbG9zZVdpbmRvdyIsImNsb3NlIiwiZGVwZW5kZW5jaWVzIiwiJGZpbHRlciIsInN0YXJ0TG9hZCIsImZpbHRlcmVkRW50aXRpZXMiLCJjb2xsYWJvcmF0aW9ucyIsImZpbHRlcmVkQ29ubmVjdGlvbnMiLCJmb3JFYWNoIiwia2V5cyIsInNvdXJjZU5vZGUiLCJzb3VyY2UiLCJ0YXJnZXROb2RlIiwidGFyZ2V0IiwidG9wNSIsInRha2VSaWdodCIsInNvcnRCeSIsIndlbGxjb25uZWN0ZWQiLCJlIiwiZHJhd05ldHdvcmsiLCJpc0xvYWRpbmciLCJzYWZlQXBwbHkiLCJmbiIsInBoYXNlIiwiJHJvb3QiLCIkJHBoYXNlIiwiJGFwcGx5Iiwidmlld09iaiIsIm9mZnNldFNjYWxlIiwiZW50aXR5QXJyYXkiLCJjb25uZWN0aW9uQXJyYXkiLCJzdmciLCJkMyIsInNlbGVjdCIsInNlbGVjdEFsbCIsInJlbW92ZSIsImJvdW5kcyIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWlnaHQiLCJ3aWR0aCIsImRlZmF1bHROb2RlU2l6ZSIsIm9mZnNldHMiLCJJbmRpdmlkdWFsIiwieCIsInkiLCJGb3ItUHJvZml0IiwiTm9uLVByb2ZpdCIsIkdvdmVybm1lbnQiLCJsb3dlckJvdW5kUmFkaXVzIiwidXBwZXJCb3VuZFJhZGl1cyIsIm1heEVtcGxveWVlcyIsIm1heCIsImVsIiwiZW1wbG95ZWVzIiwibWF4Rm9sbG93ZXJzIiwiZm9sbG93ZXJzIiwic2NhbGUiLCJzcXJ0IiwiZG9tYWluIiwicmFuZ2UiLCJsaW5rcyIsImZvcmNlIiwibGF5b3V0Iiwic2l6ZSIsInZhbHVlcyIsImNoYXJnZSIsImQiLCJsaW5rU3RyZW5ndGgiLCJsaW5rRGlzdGFuY2UiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJjYWxsIiwiZHJhZyIsInRleHQiLCJuaWNrbmFtZSIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsInBhcmVudE5vZGUiLCJnZXRCQm94Iiwib24iLCJrIiwiYWxwaGEiLCJtaW4iLCJzcGVlZEFuaW1hdGUiLCJ0aWNrcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbmRlciIsImkiLCJ0aWNrIiwic3RhcnQiLCJsaW5rZWRCeUluZGV4IiwibCIsIl9fZGF0YV9fIiwiaW5kZXgiLCJob3ZlclRpbWVyIiwibmVpZ2hib3JpbmciLCJiIiwiZm9jdXNuZWlnaGJvcnMiLCJjbGFzc2VkIiwibiIsIm8iLCJmb2N1cyIsInVuZm9jdXMiLCJmaXhlZCIsInJlc3VtZSIsImhvdmVyIiwic2V0VGltZW91dCIsInVuaG92ZXIiLCJjbGVhclRpbWVvdXQiLCJmb2N1c0xvY2F0aW9uIiwidW5mb2N1c0xvY2F0aW9uIiwiaGlnaGxpZ2h0TG9jYXRpb24iLCJzaG93TGljZW5zZSIsInN0b3BQcm9wYWdhdGlvbiIsImJhY2tncm91bmRjbGljayIsImRibGNsaWNrIiwicHgiLCJweSIsInNpemVCeSIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsInZhbCIsInZpc2libGUiLCJoaWRkZW4iLCJSVFAiLCJyZXN0aWN0IiwicmVxdWlyZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJ0b0xvd2VyQ2FzZSIsIiRwYXJzZXJzIiwicGFyc2VGbG9hdCIsIm92ZXJ2aWV3Q3RybCIsImNhdGVnb3JpemVkRW50aXRpZXMiLCJpc09iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsImRlZk9iaiIsImRlZmF1bHRWYWx1ZSIsImxvb3BBbmRJbml0IiwibW9kZWxBcnJheSIsImluaXRNb2RlbEZ1bmN0aW9uIiwibmV3QXJyYXkiLCJhbmFseXRpY3NDdHJsIiwiQ29uZmlnIiwiJGh0dHBQcm92aWRlciIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsIiRxIiwibG9nQXBpRXJyb3IiLCJlcnIiLCJyZWplY3QiLCJ1bndyYXBBbmd1bGFySHR0cCIsImFwaVVybCIsImRlZmF1bHRIZWFkZXIiLCJwb3N0IiwiTG9jYXRpb24iLCJidWlsZEZvcm1hdHRlZEFkZHJlc3MiLCJjb3VudHJ5Q29kZSIsInRyaW0iLCJmdW5Db25uU2VydmljZSIsImNvbm5TZXJ2aWNlIiwiZmluYW5jZVNlcnZpY2UiLCJFbnRpdHkiLCJkYk1vZGVsIiwicG9wIiwiZ3JhbnRzX3JlY2VpdmVkIiwiZ3JhbnRzX2dpdmVuIiwiaW52ZXN0bWVudHNfcmVjZWl2ZWQiLCJpbnZlc3RtZW50c19tYWRlIiwiZGF0YV9naXZlbiIsImRhdGFfcmVjZWl2ZWQiLCJlbXBsb3ltZW50cyIsInJldmVudWVzIiwiZXhwZW5zZXMiLCJkZXNjcmlwdGlvbiIsImluZmx1ZW5jZSIsInR3aXR0ZXJfaGFuZGxlIiwiY29udHJvbEN0cmwiLCIkcm9vdFNjb3BlIiwiJG1vZGFsIiwidm0iLCJjaGFuZ2VWaWV3Iiwic2l6ZUJ5TGlzdCIsInNob3dWaWV3IiwiTmV0d29yayIsIk1hcCIsInZpZXciLCJzaG93QWJvdXQiLCJvcGVuIiwiYW5pbWF0aW9uIiwiY2hhbmdlU2l6ZUJ5IiwiY29udHJvbERlcHMiLCJkZXRhaWxzQ3RybCIsIml0ZW1zU2hvd25EZWZhdWx0IiwicmVsYXRpb25zIiwiaXRlbXNTaG93biIsImNsb25lIiwic2hvd01vcmUiLCJzaG93TGVzcyIsIkwiLCJtYXBDdHJsIiwibGVhZmxldERhdGEiLCJvcHRpb25zIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInRpbGVMYXllciIsInRpbGVMYXllck9wdGlvbnMiLCJkZXRlY3RSZXRpbmEiLCJyZXVzZVRpbGVzIiwiem9vbUNvbnRyb2wiLCJhdHRyaWJ1dGlvbkNvbnRyb2wiLCJjcmVhdGVQaWVDaGFydCIsInBpZSIsInNvcnQiLCJhcmMiLCJvdXRlclJhZGl1cyIsImlubmVyUmFkaXVzIiwic3Ryb2tlV2lkdGgiLCJ3IiwiaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwibnMiLCJwcmVmaXgiLCJ2aXMiLCJhcmNzIiwiY291bnQiLCJ0b1N0cmluZyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInhtbCIsImdldE1hcCIsImNsdXN0ZXJJY29uIiwiY2x1c3RlciIsImNoaWxkcmVuIiwiZ2V0QWxsQ2hpbGRNYXJrZXJzIiwidG90YWwiLCJjbHVzdGVyTWFya2VycyIsImNvdW50cyIsImNvdW50QnkiLCJpY29uRGltIiwiaHRtbCIsIkRpdkljb24iLCJjbGFzc05hbWUiLCJpY29uU2l6ZSIsIm91dGVyTG9vcCIsImlubmVyTG9vcCIsIm0iLCJtYXJrZXIiLCJpY29uIiwibWFya2VySWNvbiIsInRpdGxlIiwibWVzc2FnZSIsIm1hcmtlcnMiLCJhZGRMYXllciIsIm9uTG9jYXRpb25FcnJvciIsImxlYWZsZXRFcnJvciIsImludmFsaWRhdGVTaXplIiwiQ29udHJvbCIsIlpvb20iLCJwb3NpdGlvbiIsImFkZFRvIiwiY29udHJvbCIsImxvY2F0ZSIsInNob3dQb3B1cCIsImljb25VcmwiLCJtYXJrZXJDbHVzdGVyR3JvdXAiLCJzcGlkZXJmeU9uTWF4Wm9vbSIsInNob3dDb3ZlcmFnZU9uSG92ZXIiLCJpY29uQ3JlYXRlRnVuY3Rpb24iLCJtYXhDbHVzdGVyUmFkaXVzIiwic3BpZGVyZnlEaXN0YW5jZU11bHRpcGxpZXIiLCJsYXllciIsInNldFZpZXciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBRU4sWUFFQSxJQUFJQyxJQUNBLGVBQ0Esb0JBQ0EsWUFDQSxnQkFDQSxrQkFDQSxvQkFHQUMsR0FBcUIsbUJBRXpCRixHQUFRRyxPQUFPLHVCQUNmSCxFQUFRRyxPQUFPLGtCQUFtQkQsR0FDbENGLEVBQVFH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WyIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgbWFpbkRlcGVuZGVuY3lMaXN0ID0gW1xyXG4gICAgICAgIFwidWkuYm9vdHN0cmFwXCIsXHJcbiAgICAgICAgXCJsZWFmbGV0LWRpcmVjdGl2ZVwiLFxyXG4gICAgICAgIFwibmdBbmltYXRlXCIsXHJcbiAgICAgICAgXCJ0ZW1wbGF0ZUNhY2hlXCIsXHJcbiAgICAgICAgXCJjaXZpYy1ncmFwaC5hcGlcIixcclxuICAgICAgICBcImNpdmljLWdyYXBoLnV0aWxcIlxyXG4gICAgXTtcclxuXHJcbiAgICB2YXIgYXBpRGVwZW5kZW5jeUxpc3QgPSBbXCJjaXZpYy1ncmFwaC51dGlsXCJdO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGgudXRpbFwiLCBbXSk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiLCBhcGlEZXBlbmRlbmN5TGlzdCk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoXCIsIG1haW5EZXBlbmRlbmN5TGlzdCk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBhbmFseXRpY3NEZXBlbmRlbmNpZXMgPSBbYW5hbHl0aWNzRGlyZWN0aXZlXTtcclxuXHJcbiAgICBmdW5jdGlvbiBhbmFseXRpY3NEaXJlY3RpdmUoKXtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2FuYWx5dGljL2FuYWx5dGljcy5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyICAgOiAnYW5hbHl0aWNzQ3RybCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnYW5hbHl0aWNzJywgYW5hbHl0aWNzRGVwZW5kZW5jaWVzKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yOC8xNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgdXRpbHMpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gQ2F0ZWdvcnkob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gZ2V0UHJvcGVydHkoXCJlbmFibGVcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yeU1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENhdGVnb3J5KG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcGlDYWxsZXIuZ2V0KFwiL2NhdGVnb3JpZXNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcImdldENhdGVnb3J5TW9kZWxcIjogZ2V0Q2F0ZWdvcnlNb2RlbCxcclxuICAgICAgICAgICAgXCJnZXRBbGxcIjogZ2V0QWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ0FwaUNhbGxlclwiLCBcImNnVXRpbFNlcnZpY2VcIl07XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcclxuICAgICAgICAuZmFjdG9yeShcImNhdGVnb3J5U2VydmljZVwiLCBTZXJ2aWNlKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cclxuICovXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciB1cmwgPSBcIi9jb25uZWN0aW9uc1wiO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldENvbm5lY3Rpb25UeXBlcygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcIkZ1bmRpbmdcIjogdHJ1ZSxcclxuICAgICAgICAgICAgXCJEYXRhXCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwiRW1wbG95bWVudFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIjogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VydmljZShhcGlDYWxsZXIsIHV0aWxzKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIENvbm5lY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBnZXRQcm9wZXJ0eSA9IHV0aWxzLmdldFByb3BlcnR5RnJvbU9iaihvYmopO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGdldFByb3BlcnR5KFwibmFtZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5kZXRhaWxzID0gZ2V0UHJvcGVydHkoXCJkZXRhaWxzXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eSA9IGdldFByb3BlcnR5KFwiZW50aXR5XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eV9pZCA9IGdldFByb3BlcnR5KFwiZW50aXR5X2lkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbk1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbm5lY3Rpb24ob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0QWxsXCI6IGdldEFsbCxcclxuICAgICAgICAgICAgXCJnZXRDb25uZWN0aW9uVHlwZXNcIjogZ2V0Q29ubmVjdGlvblR5cGVzLFxyXG4gICAgICAgICAgICBcImdldENvbm5lY3Rpb25Nb2RlbFwiOiBnZXRDb25uZWN0aW9uTW9kZWxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcImNnQXBpQ2FsbGVyXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiY29ubmVjdGlvblNlcnZpY2VcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gRmluYW5jZShvYmopIHtcclxuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcclxuICAgICAgICAgICAgdGhpcy55ZWFyID0gZ2V0UHJvcGVydHkoXCJ5ZWFyXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmFtb3VudCA9IGdldFByb3BlcnR5KFwiYW1vdW50XCIsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluYW5jZU1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmFuY2Uob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0RmluYW5jZU1vZGVsXCI6IGdldEZpbmFuY2VNb2RlbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiZmluYW5jZVNlcnZpY2VcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjcvMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKHV0aWxzKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEZ1bmRpbmdDb25uZWN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaWQgPSBnZXRQcm9wZXJ0eShcImlkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnllYXIgPSBnZXRQcm9wZXJ0eShcInllYXJcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gZ2V0UHJvcGVydHkoXCJhbW91bnRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5ID0gZ2V0UHJvcGVydHkoXCJlbnRpdHlcIiwgXCJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmRpbmdDb25uZWN0aW9uKG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcImdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWxcIjogZ2V0RnVuZGluZ0Nvbm5lY3Rpb25Nb2RlbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgU2VydmljZS4kaW5qZWN0ID0gW1wiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlXCIsIFNlcnZpY2UpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA3LzEwLzE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgY29udHJvbERlcGVuZGVuY2llcyA9IFtjb250cm9sRGlyZWN0aXZlXTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sRGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9jb250cm9scy5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZU5ldHdvcmsgOiAnPScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6ICdjb250cm9sQ3RybCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6ICdjb250cm9sJyxcclxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlciA6IHtcclxuICAgICAgICAgICAgICAgIG1pbkNvbm5lY3Rpb25zIDogXCI9XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjb250cm9sJywgY29udHJvbERlcGVuZGVuY2llcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRodHRwLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY2F0ZWdvcnlTZXJ2aWNlLCBsb2NhdGlvblNlcnZpY2UsIHV0aWxzKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzRWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5lZGl0RW50aXR5ID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlNb2RlbCgkc2NvcGUuZW50aXR5KTtcclxuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eVR5cGVzKCk7XHJcbiAgICAgICAgJHNjb3BlLmluZmx1ZW5jZVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRJbmZsdWVuY2VUeXBlcygpO1xyXG5cclxuICAgICAgICB2YXIgY2F0ZWdvcnlCYWNrdXA7XHJcblxyXG4gICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gW107XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRyZXNzU2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuanNvbnAoJ2h0dHBzOi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnMnLCB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ0FpNTg1ODF5Qy1TcjdtY0ZiWVR0VWtTM2l4RTdmNlp1Sm5iRkpDVkk0aEF0VzFYb0RFZVp5aWRRejJnTENDeUQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdqc29ucCc6ICdKU09OX0NBTExCQUNLJyxcclxuICAgICAgICAgICAgICAgICAgICAnaW5jbHVkZSc6ICdjaXNvMidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQocmVzcG9uc2UuZGF0YS5yZXNvdXJjZVNldHMpICYmIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudG9nZ2xlQ2F0ZWdvcnkgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY2F0ZWdvcnlJbmRleCBpbiAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXR5Q2F0ZWdvcnkgPSAkc2NvcGUuZWRpdEVudGl0eS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlDYXRlZ29yeS5pZCA9PT0gY2F0ZWdvcnkuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlDYXRlZ29yeS5lbmFibGVkID0gY2F0ZWdvcnkuZW5hYmxlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24sIGlzTGFzdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkcmVzc1NlYXJjaChsb2NhdGlvbi5mb3JtYXR0ZWRBZGRyZXNzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGFwaUNhbGxSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdXRpbHMuaXNEZWZpbmVkKGFwaUNhbGxSZXN1bHRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGFwaUNhbGxSZXN1bHRbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQuYWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByZXN1bHQucG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZExvY2F0aW9uKGlzTGFzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlcyBBUEkgY2FsbCByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5hZGRyZXNzX2xpbmUgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZGRyZXNzTGluZSkgPyBhZGRyZXNzLmFkZHJlc3NMaW5lIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubG9jYWxpdHkgPSB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5sb2NhbGl0eSkgPyBhZGRyZXNzLmxvY2FsaXR5IDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uZGlzdHJpY3QgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5hZG1pbkRpc3RyaWN0KSA/IGFkZHJlc3MuYWRtaW5EaXN0cmljdCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvdW50cnkgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5pc0RlZmluZWQoYWRkcmVzcy5jb3VudHJ5UmVnaW9uKSA/IGFkZHJlc3MuY291bnRyeVJlZ2lvbiA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY291bnRyeV9jb2RlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMuaXNEZWZpbmVkKGFkZHJlc3MuY291bnRyeVJlZ2lvbklzbzIpID8gYWRkcmVzcy5jb3VudHJ5UmVnaW9uSXNvMiA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmNvb3JkaW5hdGVzID0gdXRpbHMuaXNEZWZpbmVkKHBvaW50LmNvb3JkaW5hdGVzKSA/IHBvaW50LmNvb3JkaW5hdGVzIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5wb3N0YWxfY29kZSA9IHV0aWxzLmlzRGVmaW5lZChhZGRyZXNzLnBvc3RhbENvZGUpID8gYWRkcmVzcy5wb3N0YWxDb2RlIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5hZGRMb2NhdGlvbiA9IGZ1bmN0aW9uIChpc0xhc3QpIHtcclxuICAgICAgICAgICAgaWYgKGlzTGFzdCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkubG9jYXRpb25zLnB1c2gobG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkS2V5UGVyc29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBBZGQgYmxhbmsgZmllbGQgdG8gZWRpdCBpZiB0aGVyZSBhcmUgbm9uZS5cclxuICAgICAgICAgICAgLy8gV0FUQ0ggT1VUISBUT0RPOiBJZiBzb21lb25lIGRlbGV0ZXMgYW4gb2xkIHBlcnNvbiwgZGVsZXRlIHRoZWlyIGlkIHRvby5cclxuICAgICAgICAgICAgLy8gaS5lLiBtYWtlIHN1cmUgb2xkL2NsZWFyZWQgZm9ybSBmaWVsZHMgYXJlbid0IGJlaW5nIGVkaXRlZCBpbnRvIG5ldyBwZW9wbGUuXHJcbiAgICAgICAgICAgIGlmICghKF8uc29tZSgkc2NvcGUuZWRpdEVudGl0eS5rZXlfcGVvcGxlLCB7J25hbWUnOiAnJywgJ2lkJzogbnVsbH0pKSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkua2V5X3Blb3BsZS5wdXNoKHsnbmFtZSc6ICcnLCAnaWQnOiBudWxsfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RnVuZGluZ0Nvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZW50aXR5LCBmdW5kaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciBlbnRpdHkncyBpZCB0byB0aGlzIGZpbmFuY2UgY29ubmVjdGlvbi5cclxuICAgICAgICAgICAgZnVuZGluZy5lbnRpdHlfaWQgPSBlbnRpdHkuaWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZEZ1bmRpbmdDb25uZWN0aW9uID0gZnVuY3Rpb24gKGZ1bmRpbmcpIHtcclxuICAgICAgICAgICAgaWYgKCFfLnNvbWUoZnVuZGluZywgeydlbnRpdHknOiAnJ30pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYXliZSBzZXQgYW1vdW50IHRvIDAgaW5zdGVhZCBvZiBudWxsP1xyXG4gICAgICAgICAgICAgICAgZnVuZGluZy5wdXNoKHsnZW50aXR5JzogJycsICdhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zZXRDb25uZWN0aW9uID0gZnVuY3Rpb24gKGVudGl0eSwgY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLmVudGl0eV9pZCA9IGVudGl0eS5pZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChjb25uZWN0aW9ucykge1xyXG4gICAgICAgICAgICAvLyBBZGQgYW4gZW1wdHkgY29ubmVjdGlvbiB0byBlZGl0IGlmIG5vbmUgZXhpc3QuXHJcbiAgICAgICAgICAgIGlmICghXy5zb21lKGNvbm5lY3Rpb25zLCB7J2VudGl0eSc6ICcnLCAnaWQnOiBudWxsfSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goeydlbnRpdHknOiAnJywgJ2lkJzogbnVsbCwgJ2RldGFpbHMnOiBudWxsfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuYWRkRmluYW5jZSA9IGZ1bmN0aW9uIChyZWNvcmRzKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZCBuZXcgZmluYW5jZSBmaWVsZCBpZiBhbGwgY3VycmVudCBmaWVsZHMgYXJlIHZhbGlkLlxyXG4gICAgICAgICAgICBpZiAoXy5ldmVyeShyZWNvcmRzLCBmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLmFtb3VudCA+IDAgJiYgci55ZWFyID4gMTc1MDtcclxuICAgICAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvcmRzLnB1c2goeydhbW91bnQnOiBudWxsLCAneWVhcic6IG51bGwsICdpZCc6IG51bGx9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNTYXZpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzU2F2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRvIGhvbWVDdHJsJ3MgcGFyZW50IHN0b3BFZGl0KCkgdG8gY2hhbmdlIHZpZXcgYmFjayBhbmQgYW55IG90aGVyXHJcbiAgICAgICAgICAgICAgICAvLyBoaWdoLWxldmVsIGNoYW5nZXMuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsRWRpdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvcigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudGl0eVNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5zYXZlRW50aXR5KCRzY29wZS5lZGl0RW50aXR5LmdlbmVyYXRlREJNb2RlbCgpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWxFZGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZW50aXR5JywgZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmVxdWFscyhuZXdWYWwsIG9sZFZhbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmVkaXRFbnRpdHkgPSBlbnRpdHlTZXJ2aWNlLmdldEVudGl0eU1vZGVsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzID0gYW5ndWxhci5jb3B5KGNhdGVnb3J5QmFja3VwKTtcclxuXHJcbiAgICAgICAgICAgIGluaXRDYXRlZ29yeUFycmF5KCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuaXNFZGl0aW5nID0gdXRpbHMuaXNEZWZpbmVkKCRzY29wZS5lZGl0RW50aXR5LmlkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgY2F0ZWdvcnkgZmllbGRzIHdpdGggZW50aXR5IHZhbHVlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIExvb3BzIHRocm91Z2ggY2F0ZWdvcnkgaW4gY2F0ZWdvcmllcyBhbmQgbG9vcHMgdGhyb3VnaCBjYXRlZ29yeSBpbiBlbnRpdHkuIElkZW50aWZpZXNcclxuICAgICAgICAgKiBjYXRlZ29yaWVzIGVuYWJsZWQgaW4gdGhlIGVudGl0eSBhbmQgc2V0cyBsb2NhbCBkaXNwbGF5IGRhdGEuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjcmVhdGVkXHJcbiAgICAgICAgICogYSBiYWNrdXAgb2YgZW50aXR5IGRhdGEgc28gdGhhdCB0aGUgYXBpIGRhdGEgaXMgbm90IHRhbXBlcmVkIHdpdGggZGlyZWN0bHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUT0RPOiByZXBsYWNlIHdpdGggYmV0dGVyIGRhdGEgc3RydWN0dXJlIGZvciBjYXRlZ29yaWVzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXRlZ29yeUFycmF5KCkge1xyXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeUluZGV4LFxyXG4gICAgICAgICAgICAgICAgZW50aXR5Q2F0ZWdvcnlJbmRleCxcclxuICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5O1xyXG5cclxuICAgICAgICAgICAgZm9yIChjYXRlZ29yeUluZGV4IGluICRzY29wZS5jYXRlZ29yaWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yaWVzLmhhc093blByb3BlcnR5KGNhdGVnb3J5SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeSA9ICRzY29wZS5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChlbnRpdHlDYXRlZ29yeUluZGV4IGluICRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5lZGl0RW50aXR5LmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoZW50aXR5Q2F0ZWdvcnlJbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eUNhdGVnb3J5ID0gJHNjb3BlLmVkaXRFbnRpdHkuY2F0ZWdvcmllc1tlbnRpdHlDYXRlZ29yeUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGVudGl0eUNhdGVnb3J5LmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LmVuYWJsZWQgPSBlbnRpdHlDYXRlZ29yeS5lbmFibGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmV0cmlldmUgQ2F0ZWdvcmllcyBmcm9tIERCXHJcbiAgICAgICAgY2F0ZWdvcnlTZXJ2aWNlXHJcbiAgICAgICAgICAgIC5nZXRBbGwoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlCYWNrdXAgPSBkYXRhLmNhdGVnb3JpZXM7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGVzIGJhY2t1cCBvZiBkYXRhIHVzaW5nIEFuZ3VsYXIgdG8gcHJldmVudCBhcGkgZGF0YSBmcm9tIGJlaW5nIHRhbXBlcmVkXHJcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RseVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBhbmd1bGFyLmNvcHkoY2F0ZWdvcnlCYWNrdXApO1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuICAgICAgICBcIiRzY29wZVwiLFxyXG4gICAgICAgIFwiJGh0dHBcIixcclxuICAgICAgICBcIiR0aW1lb3V0XCIsXHJcbiAgICAgICAgXCJfXCIsXHJcbiAgICAgICAgXCJlbnRpdHlTZXJ2aWNlXCIsXHJcbiAgICAgICAgXCJjYXRlZ29yeVNlcnZpY2VcIixcclxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxyXG4gICAgICAgIFwiY2dVdGlsU2VydmljZVwiXHJcbiAgICBdO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcclxuICAgICAgICAuY29udHJvbGxlcihcImVkaXRDdHJsXCIsIENvbnRyb2xsZXIpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKlxyXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgZWRpdEVudGl0eURlcGVuZGVuY2llcyA9IFtlZGl0RW50aXR5RGlyZWN0aXZlXTtcclxuXHJcbiAgICBmdW5jdGlvbiBlZGl0RW50aXR5RGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvZWRpdC1lbnRpdHkvZWRpdC5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3QgICA6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGUgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICdlbnRpdHknICA6IFwiPVwiLFxyXG4gICAgICAgICAgICAgICAgJ2VudGl0aWVzJzogXCI9XCIsXHJcbiAgICAgICAgICAgICAgICAnaXNPcGVuJyAgOiBcIj1cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ2VkaXRDdHJsJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdlZGl0RW50aXR5JywgZWRpdEVudGl0eURlcGVuZGVuY2llcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmNvbnN0YW50KCdfJywgd2luZG93Ll8pXHJcbiAgICAgICAgLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgJyRjb21waWxlUHJvdmlkZXInLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgLmZpbHRlcigndGhvdXNhbmRTdWZmaXgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGRlY2ltYWxzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeGVzID0gWydrJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRSddO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaXNOYU4oaW5wdXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0IDwgMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKGlucHV0KSAvIE1hdGgubG9nKDEwMDApKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGlucHV0IC8gTWF0aC5wb3coMTAwMCwgZXhwKSkudG9GaXhlZChkZWNpbWFscykgKyBzdWZmaXhlc1tleHAgLSAxXTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGhvbWVEZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgJyRzY29wZScsXHJcbiAgICAgICAgJyR0aW1lb3V0JyxcclxuICAgICAgICAnXycsXHJcbiAgICAgICAgJ2VudGl0eVNlcnZpY2UnLFxyXG4gICAgICAgICdjb25uZWN0aW9uU2VydmljZScsXHJcbiAgICAgICAgaG9tZUN0cmxcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gaG9tZUN0cmwoJHNjb3BlLCAkdGltZW91dCwgXywgZW50aXR5U2VydmljZSwgY29ubmVjdGlvblNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUuZW50aXRpZXMgICAgICAgICAgICAgICAgID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zICAgICAgICAgICAgICA9IG51bGw7XHJcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMgICAgICAgICAgICAgICA9IFtdO1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gICAgICAgICAgPSBudWxsO1xyXG4gICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24gICAgICAgICAgPSB7fTtcclxuICAgICAgICAkc2NvcGUuY2xpY2tlZExvY2F0aW9uLmxvY2F0aW9uID0gbnVsbDtcclxuICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eSAgICAgICAgICAgID0ge307XHJcbiAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICAgICA9IG51bGw7XHJcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgICAgICAgICAgICAgICAgICA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zICAgICAgICAgICAgICAgICAgPSB7J2ludGVyYWN0ZWQnOiBmYWxzZX07XHJcbiAgICAgICAgJHNjb3BlLnNob3dzZWFyY2hNQiAgICAgICAgICAgICA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zaG93QW5hbHl0aWNzICAgICAgICAgICAgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXMgICAgICAgICAgICAgID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xyXG4gICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXMgICAgICAgICAgPSBjb25uZWN0aW9uU2VydmljZS5nZXRDb25uZWN0aW9uVHlwZXMoKTtcclxuICAgICAgICAkc2NvcGUuc3RhdHVzICAgICAgICAgICAgICAgICAgID0ge1xyXG4gICAgICAgICAgICBcImlzTmV0d29ya1Nob3duXCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwibGljZW5zZVwiICAgICAgIDogdHJ1ZSxcclxuICAgICAgICAgICAgXCJuZXR3b3JrTG9hZGluZ1wiOiB0cnVlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZUFuYWx5dGljcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dBbmFseXRpY3MgPSAhJHNjb3BlLnNob3dBbmFseXRpY3M7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5taW5Db25uZWN0aW9ucyA9ICRzY29wZS5taW5Db25uZWN0aW9ucyA9IDI7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAvLyAkc2NvcGUuJHdhdGNoKCdtaW5Db25uZWN0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21pbkNvbm5lY3Rpb25zJywgd2F0Y2hNaW5Db25uZWN0aW9uKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hNaW5Db25uZWN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndHJpZ2dlck5ldHdvcmtEcmF3Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5taW5Db25uZWN0aW9ucyk7XHJcbiAgICAgICAgICAgICRzY29wZS5taW5Db25uZWN0aW9ucyA9IHNlbGYubWluQ29ubmVjdGlvbnM7XHJcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzID0gZnVuY3Rpb24gKGV4Y2VwdCkge1xyXG4gICAgICAgICAgICBpZiAoZXhjZXB0ID09PSBcInNlYXJjaFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhjZXB0ID09PSBcInNldHRpbmdzXCIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lZGl0aW5nICAgICAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChleGNlcHQgPT09IFwiZWRpdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdGluZyAgICAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd3NlYXJjaE1CICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJzZWFyY2hcIik7XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93c2VhcmNoTUIgICA9ICEkc2NvcGUuc2hvd3NlYXJjaE1CO1xyXG4gICAgICAgICAgICAvLyAkc2NvcGUuJGJyb2FkY2FzdCgnaGlkZUxpY2Vuc2UnKTtcclxuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5saWNlbnNlID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZVNldHRpbmdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaHlkZVBhcnRpYWxzKFwic2V0dGluZ3NcIik7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXR0aW5nc0VuYWJsZWQgPSAhJHNjb3BlLnNldHRpbmdzRW5hYmxlZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc3RhcnRFZGl0ID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudEVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5oeWRlUGFydGlhbHMoXCJlZGl0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc3dpdGNoVmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLiRicm9hZGNhc3QoJ3ZpZXdDaGFuZ2UnLCAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93biA/ICdNYXAnIDogJ05ldHdvcmsnKTtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLmNoYW5nZVZpZXcoISRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPyAnTWFwJyA6ICdOZXR3b3JrJyk7XHJcbiAgICAgICAgICAgICRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24gPSAhJHNjb3BlLnN0YXR1cy5pc05ldHdvcmtTaG93bjtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zdGF0dXMuaXNOZXR3b3JrU2hvd24pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd0cmlnZ2VyTmV0d29ya0RyYXcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdpbmRvdy5tb2JpbGVjaGVjayAgICAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGVjayAgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4ICA9IC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4MiA9IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pO1xyXG4gICAgICAgICAgICAoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KGEpIHx8IHJlZ2V4Mi50ZXN0KGEuc3Vic3RyKDAsIDQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5tb2JpbGUgICAgICAgICAgPSB3aW5kb3cubW9iaWxlY2hlY2soKTtcclxuICAgICAgICAkc2NvcGUuc2V0dGluZ3NFbmFibGVkID0gISRzY29wZS5tb2JpbGU7XHJcblxyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZW50aXR5U2VydmljZVxyXG4gICAgICAgICAgICAgICAgLmdldEFsbCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbnRpdGllcyA9IGRhdGEubm9kZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9ucyAgID0gXy51bmlxKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKF8uZmxhdHRlbihfLnBsdWNrKCRzY29wZS5lbnRpdGllcywgJ2xvY2F0aW9ucycpKSwgJ2xvY2FsaXR5JykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXNCeUxvY2F0aW9uID0gXy5tYXAobG9jYXRpb25zLCBmdW5jdGlvbiAobG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaW5kaW5ncyA9IF8uZmlsdGVyKCRzY29wZS5lbnRpdGllcywgXy5mbG93KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5wcm9wZXJ0eSgnbG9jYXRpb25zJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBhcnRpYWxSaWdodChfLmFueSwge2xvY2FsaXR5OiBsb2N9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogbG9jLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICA6ICdsb2NhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdGllczogZmluZGluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWN0ICAgIDogXy56aXBPYmplY3QoXy5wbHVjayhmaW5kaW5ncywgJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnBsdWNrKGZpbmRpbmdzLCAnaW5kZXgnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEl0ZW1zID0gZW50aXRpZXNCeUxvY2F0aW9uLmNvbmNhdCgkc2NvcGUuZW50aXRpZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLmdldFVSTElEKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gU2V0IHRoZSBlbnRpdHkgdG8gdGhlIElEIGluIHRoZSBVUkwgaWYgaXQgZXhpc3RzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuc2V0RW50aXR5SUQoJHNjb3BlLmdldFVSTElEKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3ZlcnZpZXdVcmwgPSAnanMvb3ZlcnZpZXcvb3ZlcnZpZXcuaHRtbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm92ZXJ2aWV3VXJsID0gbnVsbDtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNldEVudGl0eSAgID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkgICA9IGVudGl0eTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEVkaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnZW50aXR5Q2hhbmdlJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNldEVudGl0eUlEID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHkoXy5maW5kKCRzY29wZS5lbnRpdGllcywgeydpZCc6IGlkfSkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudExvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0b3BFZGl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2l0ZW1DaGFuZ2UnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdsb2NhdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRMb2NhdGlvbihpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZVtpdGVtICUgMSA9PT0gMCA/ICdzZXRFbnRpdHlJRCcgOiAnc2V0RW50aXR5J10oaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NlbGVjdEl0ZW0nLCBpdGVtKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdzZXRDdXJyZW50RW50aXR5JywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50RW50aXR5ID0gYXJncy52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignc2V0Q3VycmVudExvY2F0aW9uJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50TG9jYXRpb24gPSBhcmdzLnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2V0RW50aXRpZXMgPSBmdW5jdGlvbiAoZW50aXRpZXMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmVudGl0aWVzID0gZW50aXRpZXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN0b3BFZGl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oXCJlZGl0RW50aXR5U3VjY2Vzc1wiLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0aWVzKHJlc3BvbnNlLm5vZGVzKTtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLnNldEVudGl0eUlEKCRzY29wZS5jdXJyZW50RW50aXR5LmlkKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3RyaWdnZXJOZXR3b3JrRHJhdycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xyXG5cdFx0Ly9USElTIElTIFdIRVJFIFRIRSBNT0JJTEUgU1RVRkYgR09FU1xyXG5cdFx0JHNjb3BlLnRvZ2dsZU5vZGUgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTm9kZScsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogJHNjb3BlLmVudGl0eVR5cGVzW3R5cGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZUxpbmsgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndG9nZ2xlTGluaycsIHsnbmFtZSc6IHR5cGUsICdlbmFibGVkJzogJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1t0eXBlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICBcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignaG9tZUN0cmwnLCBob21lRGVwZW5kZW5jaWVzKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIsICQpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZnVuY3Rpb24gbGlua0Z1bmN0aW9uKHNjb3BlKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbCgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzU1dmgnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAzID4gcGFyc2VJbnQoc2VsZi5jc3MoJ2hlaWdodCcpKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jc3MoJ2hlaWdodCcsICc1NXZoJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNzcygnaGVpZ2h0JywgJzMwdmgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRldGFpbHNQYW5lbDtcclxuICAgICAgICBpZiAoc2NvcGUubW9iaWxlKSB7XHJcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbCA9ICQoXCIjZGV0YWlscy1wYW5lbFwiKTtcclxuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNzcyhcImhlaWdodFwiLCBcIjMwdmhcIik7XHJcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGxUb3AoMCk7XHJcbiAgICAgICAgICAgIGRldGFpbHNQYW5lbC5zY3JvbGwoc2Nyb2xsKTtcclxuICAgICAgICAgICAgZGV0YWlsc1BhbmVsLmNsaWNrKGNsaWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkTW9iaWxlRXZlbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIGxpbms6IGxpbmtGdW5jdGlvblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdhZGRNb2JpbGVFdmVudHMnLCBbYWRkTW9iaWxlRXZlbnRzXSk7XHJcbn0pKGFuZ3VsYXIsICQpO1xyXG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBmdW5jdGlvbiBtb2RhbEN0cmwoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xyXG4gICAgICAgICRzY29wZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21vZGFsQ3RybCcsIFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJywgbW9kYWxDdHJsXSk7XHJcblxyXG59KShhbmd1bGFyKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNy8xNC8xNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IFtdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxyXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwiL21hcC9tYXAuaHRtbFwiLFxyXG4gICAgICAgICAgICBcImNvbnRyb2xsZXJcIjogXCJtYXBDdHJsXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKFwiY2l2aWMtZ3JhcGhcIilcclxuICAgICAgICAgICAgLmRpcmVjdGl2ZShcIm1hcFwiLCBkZXBlbmRlbmNpZXMpO1xyXG5cclxufSkoYW5ndWxhcik7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICRmaWx0ZXIsIF8sIGNvbm5lY3Rpb25TZXJ2aWNlLCB1dGlscykge1xyXG4gICAgICAgIC8vIFRPRE86IE1ha2UgYSBoYXNobWFwIG9uIHRoZSBiYWNrZW5kIG9mIGlkIC0+IHBvc2l0aW9uLCB0aGVuIHVzZSBzb3VyY2U6XHJcbiAgICAgICAgLy8gZW50aXRpZXNbbWFwW3NvdXJjZWlkXV0gdG8gZ2V0IG5vZGVzLiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTY4MjQzMDhcclxuICAgICAgICAkc2NvcGUuaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuY29ubmVjdGlvbnMgPSB7fTtcclxuICAgICAgICBzdGFydExvYWQoKTtcclxuXHJcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY29kZXJ3YWxsLmNvbS9wL25naXNtYS9zYWZlLWFwcGx5LWluLWFuZ3VsYXItanNcclxuICAgICAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgICAgIHZhciBwaGFzZSA9IHRoaXMuJHJvb3QuJCRwaGFzZTtcclxuICAgICAgICAgICAgaWYgKHBoYXNlID09PSAnJGFwcGx5JyB8fCBwaGFzZSA9PT0gJyRkaWdlc3QnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKHR5cGVvZihmbikgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJGFwcGx5KGZuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3RyaWdnZXJOZXR3b3JrRHJhdycsIHN0YXJ0TG9hZCk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3ZpZXdDaGFuZ2UnLCBmdW5jdGlvbiAodmlld09iaikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aWV3T2JqKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gbWFrZSBvZmZzZXQgc2NhbGUgZ2xvYmFsIHZhcmlhYmxlXHJcbiAgICAgICAgdmFyIG9mZnNldFNjYWxlO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGRyYXdOZXR3b3JrID0gZnVuY3Rpb24gKGVudGl0eUFycmF5LCBjb25uZWN0aW9uQXJyYXkpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnI25ldHdvcmsnKTtcclxuICAgICAgLy8gICAgICAgLmNsYXNzZWQoXCJuZXR3b3JrLWNvbnRhaW5lclwiLCB0cnVlKVxyXG4gICAgICAvLyAgICAgICAuYXR0cihcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJ4TWluWU1pbiBtZWV0XCIpXHJcbiAgICAgIC8vIC5hdHRyKFwidmlld0JveFwiLCBcIjAgMCA2MDAgNDAwXCIgKTtcclxuICAgLy9jbGFzcyB0byBtYWtlIGl0IHJlc3BvbnNpdmVcclxuICAgLy8gLmNsYXNzZWQoXCJzdmctY29udGVudC1yZXNwb25zaXZlXCIsIHRydWUpOyBcclxuICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBzdmcubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gYm91bmRzLmhlaWdodDtcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gYm91bmRzLndpZHRoO1xyXG4gICAgICAgICAgICBvZmZzZXRTY2FsZSA9IDY7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0Tm9kZVNpemUgPSA3O1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0cyA9IHtcclxuICAgICAgICAgICAgICAgICdJbmRpdmlkdWFsJzogeyAneCc6IDEsICd5JzogMSB9LFxyXG4gICAgICAgICAgICAgICAgJ0Zvci1Qcm9maXQnOiB7ICd4JzogMSwgJ3knOiAtMSB9LFxyXG4gICAgICAgICAgICAgICAgJ05vbi1Qcm9maXQnOiB7ICd4JzogLTEsICd5JzogMSB9LFxyXG4gICAgICAgICAgICAgICAgJ0dvdmVybm1lbnQnOiB7ICd4JzogLTEsICd5JzogLTEgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbG93ZXJCb3VuZFJhZGl1cyA9IDEwO1xyXG4gICAgICAgICAgICB2YXIgdXBwZXJCb3VuZFJhZGl1cyA9IDUwO1xyXG4gICAgICAgICAgICB2YXIgbWF4RW1wbG95ZWVzID0gZDMubWF4KGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbC5lbXBsb3llZXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIG1heEZvbGxvd2VycyA9IGQzLm1heChlbnRpdHlBcnJheSwgZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwuZm9sbG93ZXJzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IHtcclxuICAgICAgICAgICAgICAgICdlbXBsb3llZXMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4RW1wbG95ZWVzXSlcclxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKSxcclxuICAgICAgICAgICAgICAgICdmb2xsb3dlcnMnOiBkMy5zY2FsZS5zcXJ0KCkuZG9tYWluKFsxMCwgbWF4Rm9sbG93ZXJzXSlcclxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoW2xvd2VyQm91bmRSYWRpdXMsIHVwcGVyQm91bmRSYWRpdXNdKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSB7fTtcclxuICAgICAgICAgICAgdmFyIGZvcmNlID0gZDMubGF5b3V0LmZvcmNlKClcclxuICAgICAgICAgICAgICAgIC5zaXplKFt3aWR0aCwgaGVpZ2h0XSlcclxuICAgICAgICAgICAgICAgIC5ub2RlcyhlbnRpdHlBcnJheSlcclxuICAgICAgICAgICAgICAgIC5saW5rcyhfLmZsYXR0ZW4oXy52YWx1ZXMoY29ubmVjdGlvbkFycmF5KSkpXHJcbiAgICAgICAgICAgICAgICAuY2hhcmdlKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZW1wbG95ZWVzID8gLTIgKiBzY2FsZS5lbXBsb3llZXMoZC5lbXBsb3llZXMpIDogLTIwO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5saW5rU3RyZW5ndGgoMClcclxuICAgICAgICAgICAgICAgIC5saW5rRGlzdGFuY2UoNTApO1xyXG5cclxuICAgICAgICAgICAgXy5mb3JFYWNoKGNvbm5lY3Rpb25BcnJheSwgZnVuY3Rpb24gKGNvbm5lY3Rpb25zLCB0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rc1t0eXBlXSA9IHN2Zy5zZWxlY3RBbGwoJy5saW5rIC4nICsgdHlwZSArICctbGluaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoY29ubmVjdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxzLmlzRGVmaW5lZChkLnNvdXJjZSkgfHwgIXV0aWxzLmlzRGVmaW5lZChkLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbGluayAnICsgdHlwZSArICctbGluayAnICsgZC5zb3VyY2UudHlwZSArICctbGluayAnICsgZC50YXJnZXQudHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnLWxpbmsnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBub2RlID0gc3ZnLnNlbGVjdEFsbCgnLm5vZGUnKVxyXG4gICAgICAgICAgICAgICAgLmRhdGEoZW50aXR5QXJyYXkpXHJcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vZGUgJyArIGQudHlwZSArICctbm9kZSc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhbGwoZm9yY2UuZHJhZyk7XHJcblxyXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5lbXBsb3llZXMgPyBzY2FsZVsnZW1wbG95ZWVzJ10oZC5lbXBsb3llZXMpIDogZGVmYXVsdE5vZGVTaXplO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBub2RlLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLm5pY2tuYW1lID8gZC5uaWNrbmFtZSA6IGQubmFtZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZHgnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgtMC4wNjUgKiB0aGlzLmdldENvbXB1dGVkVGV4dExlbmd0aCgpIC8gMikgKyAnZW0nO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkeScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAuMDggKiB0aGlzLnBhcmVudE5vZGUuZ2V0QkJveCgpLmhlaWdodCAvIDIgKyAwLjUpICsgJ2VtJztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9yY2Uub24oJ3RpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2x1c3RlciBpbiBmb3VyIGNvcm5lcnMgYmFzZWQgb24gb2Zmc2V0LlxyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBvZmZzZXRTY2FsZSAqIGUuYWxwaGE7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLmFscGhhKVxyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGVudGl0eUFycmF5LCBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eS54ICYmIG9mZnNldHNbZW50aXR5LnR5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS54ICs9IG9mZnNldHNbZW50aXR5LnR5cGVdLnggKiBrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHkueSArPSBvZmZzZXRzW2VudGl0eS50eXBlXS55ICogaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnggPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodXBwZXJCb3VuZFJhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbih3aWR0aCAtIHVwcGVyQm91bmRSYWRpdXMsIGVudGl0eS54KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHVwcGVyQm91bmRSYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oaGVpZ2h0IC0gdXBwZXJCb3VuZFJhZGl1cywgZW50aXR5LnkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuc291cmNlLng7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5zb3VyY2UueTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0Lnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBub2RlLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHNwZWVkQW5pbWF0ZSA9IGZ1bmN0aW9uICh0aWNrcykge1xyXG4gICAgICAgICAgICAgICAgLy8gU3BlZWQgdXAgdGhlIGluaXRpYWwgYW5pbWF0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2MTg5MTEwXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlja3M7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZS50aWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZS5hbHBoYSgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gaWYgKCEkc2NvcGUubW9iaWxlKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBzcGVlZEFuaW1hdGUoNyk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBjaGVjayBmb3IgbW9iaWxlIHRvIGNoYW5nZSBzY2FsZVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0U2NhbGUgPSAyO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiaW4gbW9iaWxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzcGVlZCB1cCBhbmltYXRpb24gZm9yIG1vYmlsZSBhbmQgZGVza3RvcCBuZXR3b3JrIGdyYXBoIHJlbmRlcmluZ1xyXG4gICAgICAgICAgICBzcGVlZEFuaW1hdGUoNyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3JjZS5zdGFydCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gSGFzaCBsaW5rZWQgbmVpZ2hib3JzIGZvciBlYXN5IGhvdmVyaW5nIGVmZmVjdHMuXHJcbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84NzgwMjc3XHJcbiAgICAgICAgICAgIHZhciBsaW5rZWRCeUluZGV4ID0ge307XHJcbiAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGwpIHtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsWzBdLCBmdW5jdGlvbiAoY29ubmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBjb25uZWN0aW9uLl9fZGF0YV9fLnNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gY29ubmVjdGlvbi5fX2RhdGFfXy50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkQnlJbmRleFtzb3VyY2UuaW5kZXggKyAnLCcgKyB0YXJnZXQuaW5kZXhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rZWRCeUluZGV4W3RhcmdldC5pbmRleCArICcsJyArIHNvdXJjZS5pbmRleF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5laWdoYm9yaW5nID0gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rZWRCeUluZGV4W2EuaW5kZXggKyAnLCcgKyBiLmluZGV4XSB8fCBhLmluZGV4ID09PSBiLmluZGV4O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvY3VzbmVpZ2hib3JzID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgJ3VuZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5vbi1uZWlnaGJvcnMuXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBseSAnZm9jdXNlZCcgY2xhc3MgdG8gYWxsIG5laWdoYm9ycy5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFNlZSBpZiBpdCBjYW4gYmUgZG9uZSB3aXRoIGp1c3Qgb25lIGNsYXNzIGFuZCA6bm90KC5mb2N1c2VkKSBDU1Mgc2VsZWN0b3JzLlxyXG4gICAgICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9yaW5nKGVudGl0eSwgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFuZWlnaGJvcmluZyhlbnRpdHksIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChsaW5rcywgZnVuY3Rpb24gKGxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdmb2N1c2VkJywgZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkuaW5kZXggPT09IG8uc291cmNlLmluZGV4IHx8IGVudGl0eS5pbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBvLnRhcmdldC5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShlbnRpdHkuaW5kZXggPT09IG8uc291cmNlLmluZGV4IHx8IGVudGl0eS5pbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPT09IG8udGFyZ2V0LmluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudEVudGl0eSAhPT0gZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldEVudGl0eShlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgZm9jdXNuZWlnaGJvcnMoZW50aXR5KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciB1bmZvY3VzID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgLy92YXIgdHJhbnNpdGlvbmRlbGF5ID0gNzU7XHJcbiAgICAgICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGxpbmtzLCBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LmZpeGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXN0YXJ0IGQzIGFuaW1hdGlvbnMuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yY2UucmVzdW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IFNob3cgZ2VuZXJpYyBkZXRhaWxzIGFuZCBub3QgaW5kaXZpZHVhbCBlbnRpdHkgZGV0YWlscz9cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGhvdmVyVGltZXI7XHJcbiAgICAgICAgICAgIHZhciBob3ZlciA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ICYmICEkc2NvcGUuZWRpdGluZyAmJiAhJHNjb3BlLmN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvdmVyVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciB1bmhvdmVyID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgJiYgISRzY29wZS5jdXJyZW50TG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBmb2N1c0xvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgSWYgdGhlIGN1cnJlbnQgZW50aXR5IGlzIHNob3duIGFuZCBpdCBkb2Vzbid0IG1hdGNoIHRoZSBjbGlja2VkIG5vZGUsIHRoZW4gc2V0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IG5vZGUgdG8gY2xpY2tlZC5cclxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzZWQoJ2ZvY3VzZWQnLCBmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm5hbWUgaW4gbG9jYXRpb24uZGljdDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKG4ubmFtZSBpbiBsb2NhdGlvbi5kaWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG8uc291cmNlLm5hbWUgaW4gbG9jYXRpb24uZGljdCAmJiBvLnRhcmdldC5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiBsb2NhdGlvbi5kaWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ3VuZm9jdXNlZCcsIGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShvLnNvdXJjZS5uYW1lIGluIGxvY2F0aW9uLmRpY3QpIHx8ICEoby50YXJnZXQubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIGxvY2F0aW9uLmRpY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHVuZm9jdXNMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG5vZGVcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCd1bmZvY3VzZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2gobGlua3MsIGZ1bmN0aW9uIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnZm9jdXNlZCcsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgndW5mb2N1c2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JjZS5yZXN1bWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBoaWdobGlnaHRMb2NhdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiAhPT0gbG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmZvY3VzTG9jYXRpb24oJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzTG9jYXRpb24obG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRklYIEZPUiBMT0NBVElPTiBOT1QgSElHSExJR0hUSU5HIG9uIHNlYXJjaCBlbnRlcjpcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9PT0gbG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IGxvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0xvY2F0aW9uKGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbnRlcmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGNsaWNrID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMaWNlbnNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxzLmlzRGVmaW5lZCgkc2NvcGUuY2xpY2tlZExvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1c0xvY2F0aW9uKCRzY29wZS5jbGlja2VkTG9jYXRpb24uZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICBJZiB0aGUgcHJldmlvdXMgbm9kZSBpcyBlcXVhbCB0byB0aGUgbmV3IG5vZGUsIGRvIG5vdGhpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9PT0gZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWCBGT1IgU0VBUkNIIE5PVCBXT1JLSU5HOiBlbnRpdHkgd2FzIG5vdCBmb2N1c2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIHN3aXRjaGluZyB0byBzdGFydGxvYWQgZnVuY3Rpb24gZm9yIG5ldHdvcmsgZ3JhcGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXMoZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBVbmZvY3VzIG9uIHByZXZpb3VzIG5vZGUgYW5kIGZvY3VzIG9uIG5ldyBub2RlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmZvY3VzKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsaWNrZWRFbnRpdHkuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1cyhlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTdG9wIGV2ZW50IHNvIHdlIGRvbid0IGRldGVjdCBhIGNsaWNrIG9uIHRoZSBiYWNrZ3JvdW5kLlxyXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzIyOTQxNzk2XHJcbiAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRjbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1dGlscy5pc0RlZmluZWQoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm9jdXMoJHNjb3BlLmNsaWNrZWRMb2NhdGlvbi5sb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkTG9jYXRpb24ubG9jYXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbHMuaXNEZWZpbmVkKCRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5mb2N1cygkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5zYWZlQXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIC8vVE9ETzogU2hvdyBnZW5lcmljIGRldGFpbHMgYW5kIG5vdCBpbmRpdmlkdWFsIGVudGl0eSBkZXRhaWxzLlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgZGJsY2xpY2sgPSBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS54ID0gd2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS55ID0gaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkucHggPSB3aWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LnB5ID0gaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZml4ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9IGVudGl0eTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5mb2N1cyhlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FmZUFwcGx5KCk7XHJcbiAgICAgICAgICAgIH07XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdG9nZ2xlTGluayA9IGZ1bmN0aW9uIChldmVudCl7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJZbywgdGhpcyB3b3JrcyFcIik7XHJcblx0XHRcdFx0XHJcblx0XHRcdH07XHJcblxyXG4gICAgICAgICAgICBub2RlLm9uKCdtb3VzZW92ZXInLCBob3Zlcik7XHJcbiAgICAgICAgICAgIG5vZGUub24oJ21vdXNlb3V0JywgdW5ob3Zlcik7XHJcbiAgICAgICAgICAgIG5vZGUub24oJ2NsaWNrJywgY2xpY2spO1xyXG4gICAgICAgICAgICBub2RlLm9uKCdkYmxjbGljaycsIGRibGNsaWNrKTtcclxuICAgICAgICAgICAgc3ZnLm9uKCdjbGljaycsIGJhY2tncm91bmRjbGljayk7XHJcblxyXG4gICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnd2VsbGNvbm5lY3RlZCcsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaGFzT3duUHJvcGVydHkoJ3dlbGxjb25uZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLiRvbignY2hhbmdlU2l6ZUJ5JywgZnVuY3Rpb24gKGV2ZW50LCBzaXplQnkpIHtcclxuICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbigyNTApXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFtzaXplQnldID8gc2NhbGVbc2l6ZUJ5XShkW3NpemVCeV0pIDogZGVmYXVsdE5vZGVTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTGluaycsIGZ1bmN0aW9uIChldmVudCwgbGluaykge1xyXG4gICAgICAgICAgICAgICAgLy8gbGlua3NbbGluay5uYW1lXVxyXG4gICAgICAgICAgICAgICAgLy8gLmNsYXNzZWQoeyd2aXNpYmxlJzogbGluay5lbmFibGVkLCAnaGlkZGVuJzogIWxpbmsuZW5hYmxlZH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBuZXh0IGxpbmUgdXBkYXRlcyBhIGRpY3Rpb25hcnkgd2l0aCBrZXlzIG9mIHRoZSBjb25uZWN0aW9uIHR5cGVzIGFuZCB2YWx1ZXMgdGhhdCBhcmUgVHJ1ZS9GYWxzZSBjb3JyZXNwb25kaW5nIHRvIENoZWNrL1VuY2hlY2tcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb25uZWN0aW9uVHlwZXNbbGluay5uYW1lXSA9IGxpbmsuZW5hYmxlZDtcclxuICAgICAgICAgICAgICAgIF8ubWFwKCRzY29wZS5lbnRpdHlUeXBlcywgZnVuY3Rpb24gKHZhbCwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ZnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy4nICsga2V5ICsgJy1saW5rJykgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2aXNpYmxlJzogZnVuY3Rpb24gKGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uVHlwZSBlbmFibGVkLCBjb25uZWN0aW9uIHNvdXJjZSBlbnRpdHkgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJHNjb3BlLmVudGl0eVR5cGVzW2wuc291cmNlLnR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGlkZGVuJzogZnVuY3Rpb24gKGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgQ29ubmVjdGlvblR5cGUsIHNvdXJjZSBlbnRpdHkgdHlwZSwgb3IgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKCEkc2NvcGUuZW50aXR5VHlwZXNbbC5zb3VyY2UudHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAhJHNjb3BlLmVudGl0eVR5cGVzW2wudGFyZ2V0LnR5cGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLiRvbigndG9nZ2xlTm9kZScsIGZ1bmN0aW9uIChldmVudCwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBuZXh0IGxpbmUgdXBkYXRlcyBhIGRpY3Rpb25hcnkgd2l0aCBrZXlzIG9mIHRoZSBlbnRpdGllcyBhbmQgdmFsdWVzIHRoYXQgYXJlIFRydWUvRmFsc2UgY29ycmVzcG9uZGluZyB0byBDaGVjay9VbmNoZWNrXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW50aXR5VHlwZXNbdHlwZS5uYW1lXSA9IHR5cGUuZW5hYmxlZDsgXHJcbiAgICAgICAgICAgICAgICBzdmdcclxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcuJyArIHR5cGUubmFtZSArICctbm9kZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoeyAndmlzaWJsZSc6IHR5cGUuZW5hYmxlZCwgJ2hpZGRlbic6ICF0eXBlLmVuYWJsZWQgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3ZnXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLicgKyB0eXBlLm5hbWUgKyAnLWxpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnOiBmdW5jdGlvbiAobCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdGlvblR5cGUgZW5hYmxlZCwgY29ubmVjdGlvbiBzb3VyY2UgZW50aXR5IHR5cGUgaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZWQsIGNvbm5lY3Rpb24gdGFyZ2V0IGVudGl0eSB0eXBlIGlzIGVuYWJsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmNvbm5lY3Rpb25UeXBlc1tsLnR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICRzY29wZS5lbnRpdHlUeXBlc1tsLnRhcmdldC50eXBlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdoaWRkZW4nOiBmdW5jdGlvbiAobCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9mIENvbm5lY3Rpb25UeXBlLCBzb3VyY2UgZW50aXR5IHR5cGUsIG9yIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50aXR5IHR5cGUgYXJlIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEkc2NvcGUuY29ubmVjdGlvblR5cGVzW2wudHlwZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoISRzY29wZS5lbnRpdHlUeXBlc1tsLnNvdXJjZS50eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICEkc2NvcGUuZW50aXR5VHlwZXNbbC50YXJnZXQudHlwZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS4kb24oJ3NlbGVjdEl0ZW0nLCBmdW5jdGlvbiAoZXZlbnQsIGl0ZW0pIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlNlbGVjdCBJdGVtXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2xvY2F0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodExvY2F0aW9uKCRzY29wZS5jdXJyZW50TG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2soJHNjb3BlLmN1cnJlbnRFbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdGFydExvYWQoKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRW50aXRpZXMgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZW50aXRpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5LmNvbGxhYm9yYXRpb25zLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPj0gJHNjb3BlLm1pbkNvbm5lY3Rpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb25uZWN0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKF8ua2V5cyhkYXRhLmNvbm5lY3Rpb25zKSwgZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuY29ubmVjdGlvbnNbdHlwZV0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbm5lY3Rpb25zW3R5cGVdID0gW107XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChkYXRhLmNvbm5lY3Rpb25zLCBmdW5jdGlvbiAoY29ubmVjdGlvbnMsIHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goY29ubmVjdGlvbnMsIGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VOb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsgJ2lkJzogY29ubmVjdGlvbi5zb3VyY2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gXy5maW5kKGZpbHRlcmVkRW50aXRpZXMsIHsgJ2lkJzogY29ubmVjdGlvbi50YXJnZXQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCB1dGlscy5pc0RlZmluZWQoc291cmNlTm9kZSkgJiYgdXRpbHMuaXNEZWZpbmVkKHRhcmdldE5vZGUpICkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRDb25uZWN0aW9uc1t0eXBlXS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6IHRhcmdldE5vZGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5jb25uZWN0aW9uc1t0eXBlXS5wdXNoKHsnc291cmNlJzogc291cmNlTm9kZSwgJ3RhcmdldCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhcmdldE5vZGV9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBzaG93IGxhYmVscyBvbiB0b3AgNSBtb3N0IGNvbm5lY3RlZCBlbnRpdGllcyBpbml0aWFsbHkuXHJcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgdG9wIDUgbW9zdC1jb25uZWN0ZWQgZW50aXRpZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcDUgPSBfLnRha2VSaWdodChfLnNvcnRCeShfLmZpbHRlcigkc2NvcGUuZW50aXRpZXMsIHsgJ3R5cGUnOiB0eXBlIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29sbGFib3JhdGlvbnMubGVuZ3RoJyksIDUpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0b3A1LCBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS53ZWxsY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpbHRlcmVkRW50aXRpZXMgPSBfLnNvcnRCeShmaWx0ZXJlZEVudGl0aWVzLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS53ZWxsY29ubmVjdGVkKSA/IDEgOiAwO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZHJhd05ldHdvcmsoZmlsdGVyZWRFbnRpdGllcywgZmlsdGVyZWRDb25uZWN0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb25TZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuZ2V0QWxsKClcclxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkZmlsdGVyXCIsIFwiX1wiLCBcImNvbm5lY3Rpb25TZXJ2aWNlXCIsIFwiY2dVdGlsU2VydmljZVwiXTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY2l2aWMtZ3JhcGgnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCduZXR3b3JrQ3RybCcsIENvbnRyb2xsZXIpO1xyXG5cclxufSkoYW5ndWxhciwgUlRQKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTEvMTYuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgZGlyZWN0aXZlXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcInJlc3RyaWN0XCI6IFwiRVwiLFxyXG4gICAgICAgICAgICBcInRlbXBsYXRlVXJsXCI6IFwianMvbmV0d29yay9uZXR3b3JrLmh0bWxcIixcclxuICAgICAgICAgICAgXCJjb250cm9sbGVyXCI6IFwibmV0d29ya0N0cmxcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaFwiKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoXCJuZXR3b3JrXCIsIGRlcGVuZGVuY2llcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDYvMjYvMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24oYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdGljdDogJ0UnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmICggJ3R5cGUnIGluIGF0dHJzICYmIGF0dHJzLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJyApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2gocGFyc2VGbG9hdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn0pKGFuZ3VsYXIpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBmdW5jdGlvbiBvdmVydmlld0N0cmwoJHNjb3BlLCBfKSB7XHJcbiAgICAgICAgJHNjb3BlLmNhdGVnb3JpemVkRW50aXRpZXMgPSB7fTtcclxuICAgICAgICBfLmZvckVhY2goXy5rZXlzKCRzY29wZS5lbnRpdHlUeXBlcyksIGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaXplZEVudGl0aWVzW3R5cGVdID0gXy5maWx0ZXIoJHNjb3BlLmVudGl0aWVzLCB7J3R5cGUnOiB0eXBlfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignb3ZlcnZpZXdDdHJsJywgWyckc2NvcGUnLCAnXycsIG92ZXJ2aWV3Q3RybF0pO1xyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gaXNEZWZpbmVkKG8pIHtcclxuICAgICAgICByZXR1cm4gISh0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvID09PSBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc09iamVjdChvKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChvKSAmJiAhQXJyYXkuaXNBcnJheShvKSAmJiAodHlwZW9mIG8gPT09IFwib2JqZWN0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFByb3BlcnR5RnJvbU9iaihvYmopIHtcclxuICAgICAgICB2YXIgZGVmT2JqID0gaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wZXJ0eSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlzRGVmaW5lZChkZWZhdWx0VmFsdWUpID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChkZWZPYmpbcHJvcGVydHldKVxyXG4gICAgICAgICAgICAgICAgPyBkZWZPYmpbcHJvcGVydHldXHJcbiAgICAgICAgICAgICAgICA6IHZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9vcEFuZEluaXQobW9kZWxBcnJheSwgaW5pdE1vZGVsRnVuY3Rpb24pIHtcclxuICAgICAgICB2YXIgbmV3QXJyYXkgPSBBcnJheS5pc0FycmF5KG1vZGVsQXJyYXkpXHJcbiAgICAgICAgICAgID8gbW9kZWxBcnJheS5maWx0ZXIoaXNPYmplY3QpLm1hcChpbml0TW9kZWxGdW5jdGlvbilcclxuICAgICAgICAgICAgOiBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ld0FycmF5LmNvbmNhdChbaW5pdE1vZGVsRnVuY3Rpb24oKV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJpc0RlZmluZWRcIjogaXNEZWZpbmVkLFxyXG4gICAgICAgICAgICBcImlzT2JqZWN0XCI6IGlzT2JqZWN0LFxyXG5cclxuICAgICAgICAgICAgXCJnZXRQcm9wZXJ0eUZyb21PYmpcIjogZ2V0UHJvcGVydHlGcm9tT2JqLFxyXG4gICAgICAgICAgICBcImxvb3BBbmRJbml0XCI6IGxvb3BBbmRJbml0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImNpdmljLWdyYXBoLnV0aWxcIilcclxuICAgICAgICAuZmFjdG9yeShcImNnVXRpbFNlcnZpY2VcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMS8xNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZnVuY3Rpb24gYW5hbHl0aWNzQ3RybCgkc2NvcGUpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignYW5hbHl0aWNzQ3RybCcsIFsnJHNjb3BlJywgYW5hbHl0aWNzQ3RybF0pO1xyXG59KShhbmd1bGFyKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBDb25maWcoJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIENvbmZpZy4kaW5qZWN0ID0gW1wiJGh0dHBQcm92aWRlclwiXTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImNpdmljLWdyYXBoLmFwaVwiKS5jb25maWcoQ29uZmlnKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgYXBpVXJsID0gXCJodHRwczovL2FwaS5jaXZpY2dyYXBoLmlvL2FwaVwiO1xyXG4gICAgLy92YXIgYXBpVXJsID0gXCIvYXBpXCI7XHJcblxyXG4gICAgdmFyIGRlZmF1bHRIZWFkZXIgPSB7XHJcbiAgICAgICAgLy8gXCJFdmVudC1OYW1lXCI6IFwiVGVzdC1FdmVudFwiXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIFNlcnZpY2UoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gbG9nQXBpRXJyb3IoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWNpZXZlZCBhbiBlcnJvciBmcm9tIEFQSSB3aXRoIHRoaXMgbWVzc2FnZTogJU9cIiwgZXJyLmRhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1bndyYXBBbmd1bGFySHR0cChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldCh1cmwsIHBhcmFtcykge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcclxuICAgICAgICAgICAgICAgIC5nZXQoYXBpVXJsICsgdXJsLCB7IFwicGFyYW1zXCI6IHBhcmFtcywgXCJoZWFkZXJzXCI6IGRlZmF1bHRIZWFkZXIgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHVud3JhcEFuZ3VsYXJIdHRwLCBsb2dBcGlFcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBwb3N0KHVybCwgZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcclxuICAgICAgICAgICAgICAgIC5wb3N0KGFwaVVybCArIHVybCwgZGF0YSwgeyBcImhlYWRlcnNcIjogZGVmYXVsdEhlYWRlciB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4odW53cmFwQW5ndWxhckh0dHAsIGxvZ0FwaUVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0XCI6IGdldCxcclxuICAgICAgICAgICAgXCJwb3N0XCI6IHBvc3RcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIFNlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCIsIFwiJHFcIl07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIikuZmFjdG9yeShcImNnQXBpQ2FsbGVyXCIsIFNlcnZpY2UpO1xyXG5cclxufSkoYW5ndWxhcik7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGJyaWFuYXZlY2NoaW9uZSBvbiA2LzI3LzE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgZnVuY3Rpb24gU2VydmljZSh1dGlscykge1xyXG4gICAgICAgIGZ1bmN0aW9uIExvY2F0aW9uKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2V0UHJvcGVydHkgPSB1dGlscy5nZXRQcm9wZXJ0eUZyb21PYmoob2JqKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRm9ybWF0dGVkQWRkcmVzcygpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZPYmogPSB1dGlscy5pc0RlZmluZWQob2JqKSA/IG9iaiA6IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGFkZHJlc3NMaW5lID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmouYWRkcmVzc19saW5lKSA/IGRlZk9iai5hZGRyZXNzX2xpbmUgKyAnICcgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxpdHkgPSAodXRpbHMuaXNEZWZpbmVkKGRlZk9iai5sb2NhbGl0eSkgPyBkZWZPYmoubG9jYWxpdHkgKyAnLCAnIDogJycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gKHV0aWxzLmlzRGVmaW5lZChkZWZPYmouY291bnRyeV9jb2RlKSA/IGRlZk9iai5jb3VudHJ5X2NvZGUgKyAnICcgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zdGFsQ29kZSA9ICh1dGlscy5pc0RlZmluZWQoZGVmT2JqLnBvc3RhbF9jb2RlKSA/IGRlZk9iai5wb3N0YWxfY29kZSA6ICcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGFkZHJlc3NMaW5lICsgbG9jYWxpdHkgKyBjb3VudHJ5Q29kZSArIHBvc3RhbENvZGUpLnRyaW0oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZi5pZCA9IGdldFByb3BlcnR5KFwiaWRcIik7XHJcbiAgICAgICAgICAgIHNlbGYuYWRkcmVzc19saW5lID0gZ2V0UHJvcGVydHkoXCJhZGRyZXNzX2xpbmVcIik7XHJcbiAgICAgICAgICAgIHNlbGYubG9jYWxpdHkgPSBnZXRQcm9wZXJ0eShcImxvY2FsaXR5XCIpO1xyXG4gICAgICAgICAgICBzZWxmLmRpc3RyaWN0ID0gZ2V0UHJvcGVydHkoXCJkaXN0cmljdFwiKTtcclxuICAgICAgICAgICAgc2VsZi5wb3N0YWxfY29kZSA9IGdldFByb3BlcnR5KFwicG9zdGFsX2NvZGVcIik7XHJcbiAgICAgICAgICAgIHNlbGYuY291bnRyeSA9IGdldFByb3BlcnR5KFwiY291bnRyeVwiKTtcclxuICAgICAgICAgICAgc2VsZi5jb3VudHJ5X2NvZGUgPSBnZXRQcm9wZXJ0eShcImNvdW50cnlfY29kZVwiKTtcclxuICAgICAgICAgICAgc2VsZi5jb29yZGluYXRlcyA9IGdldFByb3BlcnR5KFwiY29vcmRpbmF0ZXNcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiBDb252ZXJ0IHRoaXMgdG8gYSBtZXRob2QgdGhhdCBidWlsZHMgYmFzZWQgb2ZmIG9mIHRoZSBjdXJyZW50IG9iamVjdCdzIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgIC8vIFVubGVzcyB0aGlzIGlzIG5lZWRlZCBmb3IgdGhlIEFQSSBzcGVjaWZpY2FsbHksIHRoZW4gaGF2ZSB0aGlzIGJ1aWx0IGluIGEgc2ltaWxhciBmdW5jdGlvbiBhcyB0aGUgb25lIGluXHJcbiAgICAgICAgICAgIC8vIEVudGl0eU1vZGVsIGZvciBidWlsZGluZyBBUEkgc3BlY2lmaWMgb2JqZWN0c1xyXG4gICAgICAgICAgICBzZWxmLmZvcm1hdHRlZEFkZHJlc3MgPSBidWlsZEZvcm1hdHRlZEFkZHJlc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uTW9kZWwob2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYXRpb24ob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiZ2V0TG9jYXRpb25Nb2RlbFwiOiBnZXRMb2NhdGlvbk1vZGVsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXCJjZ1V0aWxTZXJ2aWNlXCJdO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdjaXZpYy1ncmFwaC5hcGknKVxyXG4gICAgICAgIC5mYWN0b3J5KCdsb2NhdGlvblNlcnZpY2UnLCBTZXJ2aWNlKTtcclxuXHJcbn0pKGFuZ3VsYXIpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBicmlhbmF2ZWNjaGlvbmUgb24gNi8yNy8xNi5cclxuICovXHJcbihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEVudGl0eVR5cGVzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwiR292ZXJubWVudFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcIkZvci1Qcm9maXRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgXCJOb24tUHJvZml0XCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwiSW5kaXZpZHVhbFwiOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJbmZsdWVuY2VUeXBlcygpIHtcclxuICAgICAgICByZXR1cm4gW1wiTG9jYWxcIiwgXCJOYXRpb25hbFwiLCBcIkdsb2JhbFwiXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBTZXJ2aWNlKGFwaUNhbGxlciwgZnVuQ29ublNlcnZpY2UsIGNvbm5TZXJ2aWNlLCBmaW5hbmNlU2VydmljZSwgbG9jYXRpb25TZXJ2aWNlLCBjYXRlZ29yeVNlcnZpY2UsIHV0aWxzKSB7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIEVudGl0eShvYmopIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgZGVmT2JqID0gdXRpbHMuaXNEZWZpbmVkKG9iaikgPyBvYmogOiB7fTtcclxuICAgICAgICAgICAgdmFyIGdldFByb3BlcnR5ID0gdXRpbHMuZ2V0UHJvcGVydHlGcm9tT2JqKG9iaik7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZURCTW9kZWwoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGJNb2RlbCA9IG5ldyBFbnRpdHkoc2VsZik7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmxvY2F0aW9ucy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwubG9jYXRpb25zLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfcmVjZWl2ZWQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmdyYW50c19yZWNlaXZlZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZ3JhbnRzX2dpdmVuLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5ncmFudHNfZ2l2ZW4ucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmludmVzdG1lbnRzX3JlY2VpdmVkLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5pbnZlc3RtZW50c19yZWNlaXZlZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuaW52ZXN0bWVudHNfbWFkZS5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9naXZlbi5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZGF0YV9yZWNlaXZlZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuY29sbGFib3JhdGlvbnMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmNvbGxhYm9yYXRpb25zLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5rZXlfcGVvcGxlLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5lbXBsb3ltZW50cy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZW1wbG95bWVudHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLnJldmVudWVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5yZXZlbnVlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGRiTW9kZWwuZXhwZW5zZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBkYk1vZGVsLmV4cGVuc2VzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5jYXRlZ29yaWVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgZGJNb2RlbC5kZXNjcmlwdGlvbiA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYk1vZGVsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxmLmlkID0gZ2V0UHJvcGVydHkoXCJpZFwiKTtcclxuICAgICAgICAgICAgc2VsZi5uYW1lID0gZ2V0UHJvcGVydHkoXCJuYW1lXCIpO1xyXG4gICAgICAgICAgICBzZWxmLmluZmx1ZW5jZSA9IGdldFByb3BlcnR5KFwiaW5mbHVlbmNlXCIpO1xyXG4gICAgICAgICAgICBzZWxmLnR5cGUgPSBnZXRQcm9wZXJ0eShcInR5cGVcIik7XHJcbiAgICAgICAgICAgIHNlbGYubmlja25hbWUgPSBnZXRQcm9wZXJ0eShcIm5pY2tuYW1lXCIpO1xyXG4gICAgICAgICAgICBzZWxmLnVybCA9IGdldFByb3BlcnR5KFwidXJsXCIpO1xyXG4gICAgICAgICAgICBzZWxmLnR3aXR0ZXJfaGFuZGxlID0gZ2V0UHJvcGVydHkoXCJ0d2l0dGVyX2hhbmRsZVwiKTtcclxuICAgICAgICAgICAgc2VsZi5lbXBsb3llZXMgPSBnZXRQcm9wZXJ0eShcImVtcGxveWVlc1wiKTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYubG9jYXRpb25zID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmxvY2F0aW9ucywgbG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmdyYW50c19yZWNlaXZlZCA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5ncmFudHNfcmVjZWl2ZWQsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmludmVzdG1lbnRzX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX3JlY2VpdmVkLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcclxuICAgICAgICAgICAgc2VsZi5ncmFudHNfZ2l2ZW4gPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZ3JhbnRzX2dpdmVuLCBmdW5Db25uU2VydmljZS5nZXRGdW5kaW5nQ29ubmVjdGlvbk1vZGVsKTtcclxuICAgICAgICAgICAgc2VsZi5pbnZlc3RtZW50c19tYWRlID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmludmVzdG1lbnRzX21hZGUsIGZ1bkNvbm5TZXJ2aWNlLmdldEZ1bmRpbmdDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmRhdGFfZ2l2ZW4gPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouZGF0YV9naXZlbiwgY29ublNlcnZpY2UuZ2V0Q29ubmVjdGlvbk1vZGVsKTtcclxuICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmRhdGFfcmVjZWl2ZWQsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdGlvbnMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY29sbGFib3JhdGlvbnMsIGNvbm5TZXJ2aWNlLmdldENvbm5lY3Rpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHNlbGYua2V5X3Blb3BsZSA9IHV0aWxzLmxvb3BBbmRJbml0KGRlZk9iai5rZXlfcGVvcGxlLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmVtcGxveW1lbnRzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmVtcGxveW1lbnRzLCBjb25uU2VydmljZS5nZXRDb25uZWN0aW9uTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLnJldmVudWVzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLnJldmVudWVzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmV4cGVuc2VzID0gdXRpbHMubG9vcEFuZEluaXQoZGVmT2JqLmV4cGVuc2VzLCBmaW5hbmNlU2VydmljZS5nZXRGaW5hbmNlTW9kZWwpO1xyXG4gICAgICAgICAgICBzZWxmLmNhdGVnb3JpZXMgPSB1dGlscy5sb29wQW5kSW5pdChkZWZPYmouY2F0ZWdvcmllcywgY2F0ZWdvcnlTZXJ2aWNlLmdldENhdGVnb3J5TW9kZWwpO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5nZW5lcmF0ZURCTW9kZWwgPSBnZW5lcmF0ZURCTW9kZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRFbnRpdHlNb2RlbChvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRpdHkob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5nZXQoJy9lbnRpdGllcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZUVudGl0eShlbnRpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUNhbGxlci5wb3N0KFwiL3NhdmVcIiwgeyBcImVudGl0eVwiOiBlbnRpdHkgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcImdldEVudGl0eU1vZGVsXCI6IGdldEVudGl0eU1vZGVsLFxyXG4gICAgICAgICAgICBcImdldEVudGl0eVR5cGVzXCI6IGdldEVudGl0eVR5cGVzLFxyXG4gICAgICAgICAgICBcImdldEluZmx1ZW5jZVR5cGVzXCI6IGdldEluZmx1ZW5jZVR5cGVzLFxyXG4gICAgICAgICAgICBcImdldEFsbFwiOiBnZXRBbGwsXHJcbiAgICAgICAgICAgIFwic2F2ZUVudGl0eVwiOiBzYXZlRW50aXR5XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBTZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgXCJjZ0FwaUNhbGxlclwiLFxyXG4gICAgICAgIFwiZnVuZGluZ0Nvbm5lY3Rpb25TZXJ2aWNlXCIsXHJcbiAgICAgICAgXCJjb25uZWN0aW9uU2VydmljZVwiLFxyXG4gICAgICAgIFwiZmluYW5jZVNlcnZpY2VcIixcclxuICAgICAgICBcImxvY2F0aW9uU2VydmljZVwiLFxyXG4gICAgICAgIFwiY2F0ZWdvcnlTZXJ2aWNlXCIsXHJcbiAgICAgICAgXCJjZ1V0aWxTZXJ2aWNlXCJcclxuICAgIF07XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJjaXZpYy1ncmFwaC5hcGlcIilcclxuICAgICAgICAuZmFjdG9yeShcImVudGl0eVNlcnZpY2VcIiwgU2VydmljZSk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgYnJpYW5hdmVjY2hpb25lIG9uIDcvMTAvMTYuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBjb250cm9sRGVwcyA9IFtcclxuICAgICAgICAnZW50aXR5U2VydmljZScsXHJcbiAgICAgICAgJ2Nvbm5lY3Rpb25TZXJ2aWNlJyxcclxuICAgICAgICAnJHJvb3RTY29wZScsXHJcbiAgICAgICAgJ18nLFxyXG4gICAgICAgICckbW9kYWwnLFxyXG4gICAgICAgIGNvbnRyb2xDdHJsXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xDdHJsKGVudGl0eVNlcnZpY2UsIGNvbm5lY3Rpb25TZXJ2aWNlLCAkcm9vdFNjb3BlLCBfLCAkbW9kYWwpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmVudGl0eVR5cGVzID0gZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlcygpO1xyXG4gICAgICAgIHZtLmNvbm5lY3Rpb25UeXBlcyA9IGNvbm5lY3Rpb25TZXJ2aWNlLmdldENvbm5lY3Rpb25UeXBlcygpO1xyXG4gICAgICAgIHZtLnNpemVCeUxpc3QgPSBbXHJcbiAgICAgICAgICAgIHsnbmFtZSc6ICdFbXBsb3llZXMnLCAndmFsdWUnOiAnZW1wbG95ZWVzJ30sXHJcbiAgICAgICAgICAgIHsnbmFtZSc6ICdUd2l0dGVyIEZvbGxvd2VycycsICd2YWx1ZSc6ICdmb2xsb3dlcnMnfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdm0uc2l6ZUJ5ID0gJ2VtcGxveWVlcyc7XHJcbiAgICAgICAgdm0uc2hvd1ZpZXcgPSB7XHJcbiAgICAgICAgICAgICdOZXR3b3JrJzogdHJ1ZSxcclxuICAgICAgICAgICAgJ01hcCc6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2bS5zd2l0Y2hWaWV3ID0gc3dpdGNoVmlldztcclxuICAgICAgICB2bS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiaW5zaWRlIGNvbnRyb2xDdHJsIGNoYW5nZXZpZXdcIik7XHJcblxyXG4gICAgICAgICAgICBfLmZvckVhY2goXy5rZXlzKHZtLnNob3dWaWV3KSwgZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZtLnNob3dWaWV3W25hbWVdID0gdmlldyA9PT0gbmFtZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndmlld0NoYW5nZScsIHZtLnNob3dWaWV3KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLnNob3dBYm91dCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGNvbnRyb2xDdHJsIHNob3dBYm91dFwiKTtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29udHJvbC9hYm91dC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtb2RhbEN0cmwnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdm0udG9nZ2xlTm9kZSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiSW5zaWRlIHRoZSBjb250cm9sQ3RybCB0b2dnbGVOb2RlXCIpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZU5vZGUnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmVudGl0eVR5cGVzW3R5cGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdm0udG9nZ2xlTGluayA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiSW5zaWRlIHRoZSBjb250cm9sQ3RybCB0b2dnbGVMaW5rXCIpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RvZ2dsZUxpbmsnLCB7J25hbWUnOiB0eXBlLCAnZW5hYmxlZCc6IHZtLmNvbm5lY3Rpb25UeXBlc1t0eXBlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZtLmNoYW5nZVNpemVCeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjaGFuZ2VTaXplQnknLCB2bS5zaXplQnkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVmlldygpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJpbnNpZGUgY29udHJvbEN0cmwgc3dpdGNoIHZpZXdcIik7XHJcbiAgICAgICAgICAgIHZtLmNoYW5nZVZpZXcoIXZtLnRvZ2dsZU5ldHdvcmsgPyAnTWFwJyA6ICdOZXR3b3JrJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5jaGFuZ2VTaXplQnkoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignY29udHJvbEN0cmwnLCBjb250cm9sRGVwcyk7XHJcblxyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIGRldGFpbHNDdHJsKCRzY29wZSwgXykge1xyXG4gICAgICAgICRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCA9IHtcclxuICAgICAgICAgICAgJ2tleV9wZW9wbGUnOiAzLFxyXG4gICAgICAgICAgICAnZ3JhbnRzX2dpdmVuJzogMyxcclxuICAgICAgICAgICAgJ2dyYW50c19yZWNlaXZlZCc6IDMsXHJcbiAgICAgICAgICAgICdpbnZlc3RtZW50c19tYWRlJzogMyxcclxuICAgICAgICAgICAgJ2ludmVzdG1lbnRzX3JlY2VpdmVkJzogMyxcclxuICAgICAgICAgICAgJ2NvbGxhYm9yYXRpb25zJzogMyxcclxuICAgICAgICAgICAgJ2VtcGxveW1lbnRzJzogMyxcclxuICAgICAgICAgICAgJ3JlbGF0aW9ucyc6IDMsXHJcbiAgICAgICAgICAgICdkYXRhX2dpdmVuJzogMyxcclxuICAgICAgICAgICAgJ2RhdGFfcmVjZWl2ZWQnOiAzLFxyXG4gICAgICAgICAgICAncmV2ZW51ZXMnOiAzLFxyXG4gICAgICAgICAgICAnZXhwZW5zZXMnOiAzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLml0ZW1zU2hvd24gPSBfLmNsb25lKCRzY29wZS5pdGVtc1Nob3duRGVmYXVsdCk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2VudGl0eUNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgaXRlbXMgc2hvd24gaW4gZGV0YWlscyBsaXN0LlxyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93biA9IF8uY2xvbmUoJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuc2hvd01vcmUgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNTaG93blt0eXBlXSA9ICRzY29wZS5jdXJyZW50RW50aXR5W3R5cGVdLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5zaG93TGVzcyA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtc1Nob3duW3R5cGVdID0gJHNjb3BlLml0ZW1zU2hvd25EZWZhdWx0W3R5cGVdO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NpdmljLWdyYXBoJylcclxuICAgICAgICAuY29udHJvbGxlcignZGV0YWlsc0N0cmwnLCBbJyRzY29wZScsIFwiX1wiLCBkZXRhaWxzQ3RybF0pO1xyXG59KShhbmd1bGFyKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyLCBkMywgTCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXHJcbiAgICAgICAgJyRzY29wZScsXHJcbiAgICAgICAgJyR0aW1lb3V0JyxcclxuICAgICAgICAnbGVhZmxldERhdGEnLFxyXG4gICAgICAgICdfJyxcclxuICAgICAgICAnJGZpbHRlcicsXHJcbiAgICAgICAgbWFwQ3RybFxyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBtYXBDdHJsKCRzY29wZSwgJHRpbWVvdXQsIGxlYWZsZXREYXRhLCBfLCAkZmlsdGVyKSB7XHJcblxyXG4gICAgICAgICRzY29wZS5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBjZW50ZXIgIDoge1xyXG4gICAgICAgICAgICAgICAgbGF0IDogMjAuMDAsXHJcbiAgICAgICAgICAgICAgICBsbmcgOiAtNDAuMDAsXHJcbiAgICAgICAgICAgICAgICB6b29tOiAzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXIgICAgICAgICA6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L21hcGJveC5saWdodC97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWkdGMmFXUnNjbTUwSWl3aVlTSTZJakEwTTJSa056TXpaV0ptTnpFek5HWXpNVGRoWVRFeFl6QXlabVU0WlRFMUluMC5UTllsRnRhMlZJdHJrbjRMMFo5QkpRJyxcclxuICAgICAgICAgICAgICAgIHRpbGVMYXllck9wdGlvbnMgIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICByZXVzZVRpbGVzICA6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2wgICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFNlZSBodHRwczovL2NvZGVyd2FsbC5jb20vcC9uZ2lzbWEvc2FmZS1hcHBseS1pbi1hbmd1bGFyLWpzXHJcbiAgICAgICAgJHNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XHJcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gJyRhcHBseScgfHwgcGhhc2UgPT09ICckZGlnZXN0Jykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZuICYmICh0eXBlb2YoZm4pID09PSAnZnVuY3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRhcHBseShmbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVQaWVDaGFydCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSAgID0gb3B0aW9ucy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBpZSAgICA9IGQzLmxheW91dC5waWUoKS5zb3J0KG51bGwpLnZhbHVlKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBhcmMgICAgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMob3B0aW9ucy5yKS5pbm5lclJhZGl1cyhvcHRpb25zLnIgLSAxMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gb3B0aW9ucy5yICsgb3B0aW9ucy5zdHJva2VXaWR0aDtcclxuICAgICAgICAgICAgICAgIHZhciB3ICAgICAgPSBjZW50ZXIgKiAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIGggICAgICA9IHc7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3ZnICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGQzLm5zLnByZWZpeC5zdmcsICdzdmcnKTtcclxuICAgICAgICAgICAgICAgIHZhciB2aXMgICAgPSBkMy5zZWxlY3Qoc3ZnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BpZWNoYXJ0JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJjcyA9IHZpcy5zZWxlY3RBbGwoJy5hcmMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHBpZShkYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcmMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXIgKyAnLCcgKyBjZW50ZXIgKyAnKScpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHZhciBtYXAgPSBMLm1hcGJveC5tYXAoJ21hcCcsICdleGFtcGxlcy5tYXAtOWlqdWsyNHknLCB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbWluWm9vbTogMSxcclxuICAgICAgICAgICAgICAgIC8vICAgICBtYXhab29tOiAyXHJcbiAgICAgICAgICAgICAgICAvLyB9KS5zZXRWaWV3KFs0MCwgLTc0LjUwXSwgOSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXJjcy5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgYXJjKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEudHlwZSArICctYXJjJztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBhcmNzLmFwcGVuZChcInN2Zzp0ZXh0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTQgKiBvcHRpb25zLmNvdW50LnRvU3RyaW5nKCkubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgNSlcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXJjVGV4dFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LlhNTFNlcmlhbGl6ZXIgPyAobmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZylcclxuICAgICAgICAgICAgICAgICAgICA6IHN2Zy54bWwgPyBzdmcueG1sIDogJyc7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEVudGl0aWVzID0gJHNjb3BlLmVudGl0aWVzO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBMLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246ICd0b3ByaWdodCd9KS5hZGRUbyhtYXApO1xyXG4gICAgICAgICAgICAgICAgTC5jb250cm9sLmxvY2F0ZShcclxuICAgICAgICAgICAgICAgICAgICB7cG9zaXRpb246ICd0b3ByaWdodCcsIHNob3dQb3B1cDogZmFsc2UsIGljb246ICdmYSBmYS1sb2NhdGlvbi1hcnJvdyd9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2x1c3Rlckljb24oY2x1c3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiAgICAgICA9IGNsdXN0ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsICAgICAgICAgID0gY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbHVzdGVyTWFya2VycyA9IF8ucGx1Y2soY2hpbGRyZW4sICdvcHRpb25zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50cyAgICAgICAgID0gXy5tYXAoXy5jb3VudEJ5KGNsdXN0ZXJNYXJrZXJzLCAndHlwZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjb3VudCwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyd0eXBlJzogdHlwZSwgJ3ZhbHVlJzogY291bnR9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByICAgICAgICAgICAgICA9IDI4O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJva2VXaWR0aCAgICA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25EaW0gICAgICAgID0gKHIgKyBzdHJva2VXaWR0aCkgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sICAgICAgICAgICA9IGNyZWF0ZVBpZUNoYXJ0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGF0YTogY291bnRzLCByOiByLCBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsIGNvdW50OiB0b3RhbH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTC5EaXZJY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCAgICAgOiBodG1sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdtYXJrZXItY2x1c3RlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplIDogbmV3IEwucG9pbnQoaWNvbkRpbSwgaWNvbkRpbSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uICA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnTm9uLVByb2ZpdCc6IEwuaWNvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25VcmwgOiAnaW1nL21hcmtlci1ub25wcm9mLnN2ZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICdGb3ItUHJvZml0JzogTC5pY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLXByb2Yuc3ZnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs2MCwgNjBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgJ0luZGl2aWR1YWwnOiBMLmljb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsIDogJ2ltZy9tYXJrZXItaW5kLnN2ZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBbNjAsIDYwXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICdHb3Zlcm5tZW50JzogTC5pY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblVybCA6ICdpbWcvbWFya2VyLWdvdi5zdmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzYwLCA2MF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3BpZGVyZnlPbk1heFpvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNyZWF0ZUZ1bmN0aW9uOiBjbHVzdGVySWNvbixcclxuICAgICAgICAgICAgICAgICAgICBtYXhDbHVzdGVyUmFkaXVzOiAzMCxcclxuICAgICAgICAgICAgICAgICAgICBzcGlkZXJmeURpc3RhbmNlTXVsdGlwbGllcjogMS4zXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb3V0ZXJMb29wKGVudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGlubmVyTG9vcChsb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmV2ZXJ5KGxvYy5jb29yZGluYXRlcykpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYy5jb29yZGluYXRlc1swXS50b0ZpeGVkKDUpID09PSAnNDAuNzgyMDAnICYmIGxvYy5jb29yZGluYXRlc1sxXS50b0ZpeGVkKDUpID09PSAnLTczLjgzMTcwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzBdID0gNDAuNzcwNjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2MuY29vcmRpbmF0ZXNbMV0gPSAtNzMuOTc0MDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBMLm1hcmtlcihsb2MuY29vcmRpbmF0ZXMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG1hcmtlckljb25bZW50aXR5LnR5cGVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpdGxlJzogZW50aXR5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZW50aXR5X2lkJzogZW50aXR5LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBlbnRpdHkubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogZW50aXR5LnR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuYWRkTGF5ZXIobSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goZW50aXR5LmxvY2F0aW9ucywgaW5uZXJMb29wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk9yaWdpbmFsOiAlT1wiLCAkc2NvcGUuZW50aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWx0ZXJlZDogJU9cIiwgZmlsdGVyZWRFbnRpdGllcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGZpbHRlcmVkRW50aXRpZXMsIG91dGVyTG9vcCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobWFya2Vycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25Mb2NhdGlvbkVycm9yKGxlYWZsZXRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGVhZmxldEVycm9yLm1lc3NhZ2UgKyBcIiAgJU9cIiwgbGVhZmxldEVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtYXAub24oJ2xvY2F0aW9uZXJyb3InLCBvbkxvY2F0aW9uRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gbWFwLmxvY2F0ZSh7c2V0VmlldzogdHJ1ZSwgbWF4Wm9vbTogMTF9KTtcclxuICAgICAgICAgICAgICAgIG1hcmtlcnMub24oJ2NsaWNrJywgZnVuY3Rpb24gKG1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRFbnRpdHlJRChtYXJrZXIubGF5ZXIub3B0aW9ucy5lbnRpdHlfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGlja2VkRW50aXR5LmVudGl0eSA9ICRzY29wZS5jdXJyZW50RW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZXR0aW5nc0VuYWJsZWQgJiYgJHNjb3BlLm1vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xpY2tlZEVudGl0eS5lbnRpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25zLmludGVyYWN0ZWQgICA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJG9uKCdzZWxlY3RJdGVtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9ICRzY29wZS5jdXJyZW50RW50aXR5LmxvY2F0aW9ucy5sZW5ndGggPiAwID8gXy5wbHVjayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRFbnRpdHkubG9jYXRpb25zLCAnY29vcmRpbmF0ZXMnKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldFZpZXcoY29vcmRpbmF0ZXNbMF0sIDExKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbnMuaW50ZXJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhZmVBcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjaXZpYy1ncmFwaCcpXHJcblxyXG4gICAgICAgIC5jb250cm9sbGVyKCdtYXBDdHJsJywgZGVwZW5kZW5jaWVzKTtcclxufSkoYW5ndWxhciwgZDMsIEwpO1xyXG4iXX0=
